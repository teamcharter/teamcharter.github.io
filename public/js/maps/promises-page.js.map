{"version":3,"sources":["promises-page.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","Object","defineProperty","value","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","2","Database","firebase","CharterFirebase","initializeApp","db","database","auth","localhost","noScreenshots","prometheus","Prometheus","init","callback","fallback","called","onAuthStateChanged","user","logon","uid","name","displayName","email","image","photoURL","login","method","provider","GoogleAuthProvider","FacebookAuthProvider","signInWithPopup","then","result","credential","accessToken","providerId","providerData","console","error","catch","getPrometheus","getCurrentUser","currentUser","saveFeedback","tid","feedback","ref","push","timestamp","Date","now","getUser","Promise","resolve","reject","once","snap","val","getTeam","team","keys","getTeamEdits","edits","onTeamChange","members","on","promises","memberMap","status","p","all","users","forEach","member","idx","updateTeamName","field","set","updateQuestion","question","updateExpectations","list","submitUpdate","update","save","type","addLink","data","url","added","updateLink","key","p1","p2","removeLink","removed","remove","updateRole","author","role","responsibility","addTemplateRole","joined","icon","updateRoleIcon","joinTeam","joinCode","success","addMember","done","removeMember","getAllTeams","orderByChild","startAt","endAt","nodes","createNewTeam","teamName","res","pathList","path","ct","getInstructorClasses","map","cid","classData","teams","resolveTeam","rejectTeam","_loop","teamList","tidx","meta","getClassTeams","classCode","_loop2","addTeamToClass","access","addInstructorToClass","isAlreadyInstructor","getInstructorsByClass","getTeamPromises","onTeamPromisesChange","err","onPromiseChange","promiseid","commentOnPromise","params","text","addPromise","payload","finished","unsetPromise","updatePromise","editData","addLinkToPromise","hasLinkId","linkid","3","mainPromiseTab","log","renderedTable","allPromiseData","renderPromiseTable","parsePromiseData","document","getElementById","addEventListener","renderPromiseEditor","reportErrorToUser","querySelector","window","location","origin","search","promiseData","profiles","table","views","getPromiseTable","tableHolder","innerHTML","appendChild","Array","from","querySelectorAll","button","dataset","renderPromiseBox","focusedPromise","renderPromiseBoxCallback","inPromise","box","getPromiseBox","promise","saveTyping","textarea","out","focusedPromiseDiv","justSubmittedComment","editPromiseDiv","style","display","allPromisesDiv","myTextarea","promptLinkDataThen","completed","editor","links","inDeletable","deletable","model","div","getPromiseEditor","warning","title","description","due","parse","innerText","isNaN","cancel","output","sort","b","node","promise_id","level","started","lastActive","comments","generated","message","_callback","inPrefill","prefill","vex","dialog","prompt","checkUserPermission","isMentor","body","classList","add","editableNodes","setAttribute","confirm","buttons","$","extend","YES","NO","yes","alert","renderTeamCharter","MENTOR_MODE","fillText","className","spans","getElementsByClassName","fillSrc","src","initWithTeamCode","_callback2","TEAM_ID","cancels","_config","_database","_views","qs","split","join","tokens","re","exec","decodeURIComponent","getQueryParams","mentor","Views","feedbackBtn","checkedPermissions","./config","./database","./views","4","getRoleAndUpdateTile","posted","dateFormat","moment","format","diff","daysSinceLastUpdate","duration","asDays","tagClass","html","createElement","getRoleTile","editSection","editable","getRoleTemplateTile","editButton","onSave","resp","onIconEdit","getProgressUpdate","getLinkItem","indexOf","getTeamTile","link","isTemplate","getClassTile","classLink","filter","getUserTile","subtitle","getClassTeamTable","updates","upid","lastAccess","fromNow","getClassTeamGrid","_uid","_profile","_userModel","_userDiv","profile","userModel","userDiv","pdid","authorName","sinceStart","dur","daysLeft","Math","floor","dueDate","authorImage","linkList","comment","commentAuthor","sinceComment"],"mappings":"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","file":"../promises-page.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar config = {\n\tapiKey: \"AIzaSyBWk9EWPkkvqiruG8aYnHV0dBPg1z3EtN4\",\n\tauthDomain: \"charter-ecb07.firebaseapp.com\",\n\tdatabaseURL: \"https://charter-ecb07.firebaseio.com\",\n\tprojectId: \"charter-ecb07\",\n\tstorageBucket: \"\",\n\tmessagingSenderId: \"134239305153\"\n};\nexports.config = config;\n\n},{}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar Database = function Database(firebase, config) {\n\n\tvar CharterFirebase = firebase.initializeApp(config, 'Charter Database');\n\tvar db = CharterFirebase.database();\n\tvar auth = CharterFirebase.auth();\n\tconfig.localhost = true;\n\tconfig.noScreenshots = true;\n\tvar prometheus = Prometheus(config, CharterFirebase);\n\n\t// Super Dirty: Update Prometheus Promos and Features Here\n\t// db.ref('prometheus/features/contributor').set({info: {name: 'Charter Contributor'}, validate: 'return {allowed: userData.contributor,data: userData}'})\n\n\t//db.ref('classes/master/teams').remove();\n\t/*db.ref('teams').once('value', (snap) => {\n \tlet teamMap = snap.val() || {};\n \tfor (let tid in teamMap) {\n \t\tdb.ref(`classes/master/teams/${tid}`).set({\n \t\t\taccess: true,\n \t\t\tjoined: Date.now()\n \t\t});\n \t}\n });*/\n\n\tvar database = {\n\n\t\tinit: function init(callback, fallback) {\n\t\t\tvar called = false;\n\t\t\tauth.onAuthStateChanged(function (user) {\n\t\t\t\tif (user) {\n\t\t\t\t\t//\n\t\t\t\t\tprometheus.logon(user.uid, {\n\t\t\t\t\t\tname: user.displayName,\n\t\t\t\t\t\temail: user.email,\n\t\t\t\t\t\timage: user.photoURL,\n\t\t\t\t\t\tuid: user.uid\n\t\t\t\t\t});\n\t\t\t\t\t//\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tcallback(user);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tfallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tlogin: function login(callback, method) {\n\t\t\t//auth.signOut().then((done) => {\n\t\t\tvar provider = new firebase.auth.GoogleAuthProvider();\n\t\t\tif (method === 'facebook') {\n\t\t\t\tprovider = new firebase.auth.FacebookAuthProvider();\n\t\t\t}\n\t\t\tauth.signInWithPopup(provider).then(function (result) {\n\t\t\t\t//console.log(result);\n\t\t\t\tvar token = result.credential.accessToken;\n\t\t\t\tvar user = result.user;\n\t\t\t\tvar providerId = 'Unknown Provider';\n\t\t\t\ttry {\n\t\t\t\t\tproviderId = user.providerData[0].providerId;\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\t\t\t\t//\n\t\t\t\tprometheus.logon(user.uid, {\n\t\t\t\t\tname: user.displayName,\n\t\t\t\t\temail: user.email,\n\t\t\t\t\timage: user.photoURL,\n\t\t\t\t\tuid: user.uid,\n\t\t\t\t\tprovider: providerId\n\t\t\t\t});\n\t\t\t\t//\n\t\t\t\tcallback(user);\n\t\t\t}).catch(function (error) {\n\t\t\t\t/*let errorCode = error.code;\n    let errorMessage = error.message;\n    let email = error.email;\n    let credential = error.credential;*/\n\t\t\t\tconsole.error(error);\n\t\t\t});\n\t\t\t/*}).catch((err) => {\n   \tconsole.error(err);\n   });*/\n\t\t},\n\n\t\tgetPrometheus: function getPrometheus() {\n\t\t\treturn prometheus;\n\t\t},\n\n\t\tgetCurrentUser: function getCurrentUser() {\n\t\t\treturn auth.currentUser || {};\n\t\t},\n\n\t\tsaveFeedback: function saveFeedback(tid, uid, feedback) {\n\t\t\treturn db.ref('feedback').push({\n\t\t\t\ttid: tid,\n\t\t\t\tuid: uid,\n\t\t\t\tfeedback: feedback,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t},\n\n\t\tgetUser: function getUser(uid) {\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('prometheus/users/' + uid + '/profile').once('value', function (snap) {\n\t\t\t\t\tvar user = snap.val();\n\t\t\t\t\tresolve(user);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tgetTeam: function getTeam(tid) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('teams/' + tid).once('value', function (snap) {\n\t\t\t\t\tvar team = snap.val() || {};\n\t\t\t\t\tif (Object.keys(team).length > 0) {\n\t\t\t\t\t\tteam.tid = tid;\n\t\t\t\t\t\tresolve(team);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve({});\n\t\t\t\t\t}\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tgetTeamEdits: function getTeamEdits(tid) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('edits/' + tid).once('value', function (snap) {\n\t\t\t\t\tvar edits = snap.val() || {};\n\t\t\t\t\tresolve(edits);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tonTeamChange: function onTeamChange(tid, callback, fallback) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tvar members = {};\n\t\t\tdb.ref('teams/' + tid).on('value', function (snap) {\n\t\t\t\tvar promises = [];\n\t\t\t\tvar team = snap.val() || {};\n\t\t\t\tvar memberMap = team.members || {};\n\t\t\t\tfor (var uid in memberMap) {\n\t\t\t\t\tif (!(uid in members)) {\n\t\t\t\t\t\tif (memberMap[uid].status === 'template') {\n\t\t\t\t\t\t\tmembers[uid] = {\n\t\t\t\t\t\t\t\tname: 'Unknown',\n\t\t\t\t\t\t\t\timage: './public/img/no-user.png',\n\t\t\t\t\t\t\t\tuid: uid,\n\t\t\t\t\t\t\t\temail: 'team@omnipointment.com'\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar p = database.getUser(uid);\n\t\t\t\t\t\t\tp.uid = uid;\n\t\t\t\t\t\t\tpromises.push(p);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (promises.length > 0) {\n\t\t\t\t\tPromise.all(promises).then(function (users) {\n\t\t\t\t\t\tusers.forEach(function (member, idx) {\n\t\t\t\t\t\t\tvar uid = promises[idx].uid;\n\t\t\t\t\t\t\tmembers[uid] = member;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcallback(team, members);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcallback(team, members);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tupdateTeamName: function updateTeamName(tid, uid, name) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'name',\n\t\t\t\tuid: uid,\n\t\t\t\tvalue: name,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\treturn db.ref('teams/' + tid + '/name').set(name);\n\t\t},\n\n\t\tupdateQuestion: function updateQuestion(tid, uid, question) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'question',\n\t\t\t\tuid: uid,\n\t\t\t\tvalue: question,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\treturn db.ref('teams/' + tid + '/question').set(question);\n\t\t},\n\n\t\tupdateExpectations: function updateExpectations(tid, uid, list) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'expectations',\n\t\t\t\tuid: uid,\n\t\t\t\tvalue: list,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\treturn db.ref('teams/' + tid + '/expectations').set(list);\n\t\t},\n\n\t\tsubmitUpdate: function submitUpdate(tid, uid, update) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'SUBMIT_UPDATE',\n\t\t\t\ttid: tid,\n\t\t\t\tupdate: update\n\t\t\t});\n\t\t\t//\n\t\t\treturn db.ref('teams/' + tid + '/updates/' + uid).push({\n\t\t\t\tupdate: update,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t},\n\n\t\taddLink: function addLink(tid, uid, data) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'ADD_LINK',\n\t\t\t\ttid: tid,\n\t\t\t\tname: data.name,\n\t\t\t\turl: data.url\n\t\t\t});\n\t\t\t//\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'link',\n\t\t\t\tuid: uid,\n\t\t\t\tvalue: data,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\treturn db.ref('teams/' + tid + '/links').push({\n\t\t\t\tname: data.name,\n\t\t\t\turl: data.url,\n\t\t\t\tuid: uid,\n\t\t\t\tadded: Date.now()\n\t\t\t});\n\t\t},\n\n\t\tupdateLink: function updateLink(tid, uid, key, data) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\tif (!key) {\n\t\t\t\tthrow Error('No link id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'UPDATE_LINK',\n\t\t\t\ttid: tid,\n\t\t\t\tname: data.name,\n\t\t\t\turl: data.url,\n\t\t\t\tkey: key\n\t\t\t});\n\t\t\t//\n\t\t\tdata.key = key;\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'link',\n\t\t\t\tuid: uid,\n\t\t\t\tvalue: data,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\tvar p1 = db.ref('teams/' + tid + '/links/' + key + '/name').set(data.name);\n\t\t\tvar p2 = db.ref('teams/' + tid + '/links/' + key + '/url').set(data.url);\n\t\t\treturn Promise.all([p1, p2]);\n\t\t},\n\n\t\tremoveLink: function removeLink(tid, uid, key) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\tif (!key) {\n\t\t\t\tthrow Error('No link id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'REMOVE_LINK',\n\t\t\t\ttid: tid,\n\t\t\t\tkey: key\n\t\t\t});\n\t\t\t//\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'link',\n\t\t\t\tuid: uid,\n\t\t\t\tvalue: {\n\t\t\t\t\tremoved: true,\n\t\t\t\t\tkey: key\n\t\t\t\t},\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\treturn db.ref('teams/' + tid + '/links/' + key).remove();\n\t\t},\n\n\t\tupdateRole: function updateRole(tid, author, data) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!author) {\n\t\t\t\tthrow Error('No authoring user id given.');\n\t\t\t}\n\t\t\tif (!data.uid) {\n\t\t\t\tdata.uid = author; // If someone is editing their own role\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'UPDATE_ROLE',\n\t\t\t\ttid: tid,\n\t\t\t\tuid: data.uid,\n\t\t\t\trole: data.role,\n\t\t\t\tresponsibility: data.responsibility\n\t\t\t});\n\t\t\t//\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'role',\n\t\t\t\tuid: author,\n\t\t\t\tvalue: data,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\tvar p1 = db.ref('teams/' + tid + '/members/' + data.uid + '/role').set(data.role);\n\t\t\tvar p2 = db.ref('teams/' + tid + '/members/' + data.uid + '/responsibility').set(data.responsibility);\n\t\t\treturn Promise.all([p1, p2]);\n\t\t},\n\n\t\taddTemplateRole: function addTemplateRole(tid, author) {\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'ADD_TEMPLATE_ROLE',\n\t\t\t\ttid: tid\n\t\t\t});\n\t\t\t//\n\t\t\treturn db.ref('teams/' + tid + '/members').push({\n\t\t\t\tstatus: 'template',\n\t\t\t\trole: 'Team Member',\n\t\t\t\tjoined: Date.now(),\n\t\t\t\tmember: true,\n\t\t\t\ticon: 'user'\n\t\t\t});\n\t\t},\n\n\t\tupdateRoleIcon: function updateRoleIcon(tid, author, data) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!author) {\n\t\t\t\tthrow Error('No authoring user id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'UPDATE_ROLE_ICON',\n\t\t\t\ttid: tid,\n\t\t\t\tuid: data.uid,\n\t\t\t\ticon: data.icon\n\t\t\t});\n\t\t\t//\n\t\t\tif (!data.uid) {\n\t\t\t\tdata.uid = author; // If someone is editing their own role\n\t\t\t}\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'role',\n\t\t\t\tuid: author,\n\t\t\t\tvalue: data,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\treturn db.ref('teams/' + tid + '/members/' + data.uid + '/icon').set(data.icon);\n\t\t},\n\n\t\tjoinTeam: function joinTeam(tid, uid, joinCode) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given');\n\t\t\t}\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdatabase.getTeam(tid).then(function (team) {\n\t\t\t\t\tif (joinCode === team.joinCode || !team.joinCode) {\n\t\t\t\t\t\tdatabase.addMember(tid, uid).then(function (done) {\n\t\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\t\tsuccess: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}).catch(reject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\tsuccess: false\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\taddMember: function addMember(tid, uid) {\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'ADD_MEMBER',\n\t\t\t\ttid: tid,\n\t\t\t\tuid: uid\n\t\t\t});\n\t\t\t//\n\t\t\treturn db.ref('teams/' + tid + '/members/' + uid).set({\n\t\t\t\tstatus: 'member',\n\t\t\t\trole: 'Team Member',\n\t\t\t\tjoined: Date.now(),\n\t\t\t\tmember: true\n\t\t\t});\n\t\t},\n\n\t\tremoveMember: function removeMember(tid, author, uid) {\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'REMOVE_MEMBER',\n\t\t\t\ttid: tid,\n\t\t\t\tuid: uid\n\t\t\t});\n\t\t\t//\n\t\t\treturn db.ref('teams/' + tid + '/members/' + uid).remove();\n\t\t},\n\n\t\tgetAllTeams: function getAllTeams(uid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar ref = db.ref('teams');\n\t\t\t\tvar query = ref.orderByChild('members/' + uid + '/member').startAt(true).endAt(true);\n\t\t\t\tquery.once('value', function (snap) {\n\t\t\t\t\tvar nodes = snap.val() || {};\n\t\t\t\t\tresolve(nodes);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tcreateNewTeam: function createNewTeam(uid, joinCode, data) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar teamName = data.name;\n\t\t\t\tdb.ref('teams').push({\n\t\t\t\t\tname: teamName || 'New Team Charter',\n\t\t\t\t\tjoinCode: joinCode,\n\t\t\t\t\tstatus: data.status || 'regular'\n\t\t\t\t}).then(function (res) {\n\t\t\t\t\tvar pathList = res.path.ct;\n\t\t\t\t\tvar tid = pathList[pathList.length - 1];\n\t\t\t\t\t//\n\t\t\t\t\tprometheus.save({\n\t\t\t\t\t\ttype: 'CREATE_TEAM',\n\t\t\t\t\t\ttid: tid,\n\t\t\t\t\t\tname: teamName,\n\t\t\t\t\t\tdata: data\n\t\t\t\t\t});\n\t\t\t\t\t//\n\t\t\t\t\tdatabase.addMember(tid, uid).then(function (done) {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\ttid: tid\n\t\t\t\t\t\t});\n\t\t\t\t\t}).catch(reject);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tgetInstructorClasses: function getInstructorClasses(uid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar ref = db.ref('classes');\n\t\t\t\tvar query = ref.orderByChild('members/' + uid + '/access').startAt(true).endAt(true);\n\t\t\t\tquery.once('value', function (snap) {\n\t\t\t\t\tvar nodes = snap.val() || {};\n\t\t\t\t\tvar list = Object.keys(nodes).map(function (cid) {\n\t\t\t\t\t\tvar classData = nodes[cid];\n\t\t\t\t\t\tclassData.cid = cid;\n\t\t\t\t\t\treturn classData;\n\t\t\t\t\t});\n\t\t\t\t\tif (list.length > 0) {\n\t\t\t\t\t\tvar promises = [];\n\t\t\t\t\t\tlist.forEach(function (classData) {\n\t\t\t\t\t\t\tvar cid = classData.cid;\n\n\t\t\t\t\t\t\tvar _loop = function _loop(tid) {\n\t\t\t\t\t\t\t\tvar p = new Promise(function (resolveTeam, rejectTeam) {\n\t\t\t\t\t\t\t\t\tdatabase.getTeam(tid).then(resolveTeam).catch(rejectTeam);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tp.cid = cid;\n\t\t\t\t\t\t\t\tpromises.push(p);\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tfor (var tid in classData.teams) {\n\t\t\t\t\t\t\t\t_loop(tid);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tPromise.all(promises).then(function (teamList) {\n\t\t\t\t\t\t\tteamList.forEach(function (team, tidx) {\n\t\t\t\t\t\t\t\tvar meta = promises[tidx];\n\t\t\t\t\t\t\t\tif (nodes[meta.cid]) {\n\t\t\t\t\t\t\t\t\tif (nodes[meta.cid].teams[team.tid]) {\n\t\t\t\t\t\t\t\t\t\tnodes[meta.cid].teams[team.tid] = team;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tresolve(nodes);\n\t\t\t\t\t\t}).catch(reject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve({});\n\t\t\t\t\t}\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tgetClassTeams: function getClassTeams(classCode) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar ref = db.ref('classes/' + classCode);\n\t\t\t\tref.once('value', function (snap) {\n\t\t\t\t\tvar val = snap.val() || {};\n\t\t\t\t\tvar nodes = {};\n\t\t\t\t\tnodes[classCode] = val;\n\t\t\t\t\tvar list = Object.keys(nodes).map(function (cid) {\n\t\t\t\t\t\tvar classData = nodes[cid];\n\t\t\t\t\t\tclassData.cid = cid;\n\t\t\t\t\t\treturn classData;\n\t\t\t\t\t});\n\t\t\t\t\tif (list.length > 0) {\n\t\t\t\t\t\tvar promises = [];\n\t\t\t\t\t\tlist.forEach(function (classData) {\n\t\t\t\t\t\t\tvar cid = classData.cid;\n\n\t\t\t\t\t\t\tvar _loop2 = function _loop2(tid) {\n\t\t\t\t\t\t\t\tvar p = new Promise(function (resolveTeam, rejectTeam) {\n\t\t\t\t\t\t\t\t\tdatabase.getTeam(tid).then(resolveTeam).catch(rejectTeam);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tp.cid = cid;\n\t\t\t\t\t\t\t\tpromises.push(p);\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tfor (var tid in classData.teams) {\n\t\t\t\t\t\t\t\t_loop2(tid);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tPromise.all(promises).then(function (teamList) {\n\t\t\t\t\t\t\tteamList.forEach(function (team, tidx) {\n\t\t\t\t\t\t\t\tvar meta = promises[tidx];\n\t\t\t\t\t\t\t\tif (nodes[meta.cid]) {\n\t\t\t\t\t\t\t\t\tif (nodes[meta.cid].teams[team.tid]) {\n\t\t\t\t\t\t\t\t\t\tnodes[meta.cid].teams[team.tid] = team;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tresolve(nodes);\n\t\t\t\t\t\t}).catch(reject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve({});\n\t\t\t\t\t}\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\taddTeamToClass: function addTeamToClass(tid, uid, code) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('classes/' + code).once('value', function (snap) {\n\t\t\t\t\tvar classData = snap.val();\n\t\t\t\t\tif (classData) {\n\t\t\t\t\t\t//\n\t\t\t\t\t\tprometheus.save({\n\t\t\t\t\t\t\ttype: 'ADD_TEAM_TO_CLASS',\n\t\t\t\t\t\t\ttid: tid,\n\t\t\t\t\t\t\tclassCode: code\n\t\t\t\t\t\t});\n\t\t\t\t\t\t//\n\t\t\t\t\t\tdb.ref('classes/' + code + '/teams/' + tid).set({\n\t\t\t\t\t\t\taccess: true,\n\t\t\t\t\t\t\tjoined: Date.now()\n\t\t\t\t\t\t}).then(function (done) {\n\t\t\t\t\t\t\tresolve(classData);\n\t\t\t\t\t\t}).catch(reject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject('Could not find a class with code: ' + code + '.');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\taddInstructorToClass: function addInstructorToClass(uid, code) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('classes/' + code).once('value', function (snap) {\n\t\t\t\t\tvar classData = snap.val();\n\t\t\t\t\tif (classData) {\n\t\t\t\t\t\tvar memberMap = classData.members || {};\n\t\t\t\t\t\tif (uid in memberMap) {\n\t\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\t\tisAlreadyInstructor: true,\n\t\t\t\t\t\t\t\tclassData: classData\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\tprometheus.save({\n\t\t\t\t\t\t\t\ttype: 'ADD_INSTRUCTOR_TO_CLASS',\n\t\t\t\t\t\t\t\tclassCode: code\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\tdb.ref('classes/' + code + '/members/' + uid).set({\n\t\t\t\t\t\t\t\taccess: true,\n\t\t\t\t\t\t\t\ttype: 'instructor',\n\t\t\t\t\t\t\t\tjoined: Date.now()\n\t\t\t\t\t\t\t}).then(function (done) {\n\t\t\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\t\t\tisAlreadyInstructor: false,\n\t\t\t\t\t\t\t\t\tclassData: classData\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}).catch(reject);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject('Could not find a class with code: ' + code + '.');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tgetInstructorsByClass: function getInstructorsByClass(classCode) {},\n\n\t\tgetTeamPromises: function getTeamPromises(tid) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('promises/' + tid).once('value', function (snap) {\n\t\t\t\t\tvar val = snap.val();\n\t\t\t\t\tresolve(val);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tonTeamPromisesChange: function onTeamPromisesChange(tid, callback, fallback) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tdb.ref('promises/' + tid).on('value', function (snap) {\n\t\t\t\t\tvar val = snap.val();\n\t\t\t\t\tcallback(val);\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(err);\n\t\t\t\tif (fallback) {\n\t\t\t\t\tfallback(err);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tonPromiseChange: function onPromiseChange(tid, promiseid, callback, fallback) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!promiseid) {\n\t\t\t\tthrow Error('No promise id given');\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tdb.ref('promises/' + tid).on('value', function (snap) {\n\t\t\t\t\tvar val = snap.val();\n\t\t\t\t\tcallback(val);\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\tif (fallback) {\n\t\t\t\t\tfallback(err);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\n\t\tcommentOnPromise: function commentOnPromise(params) {\n\t\t\tif (!params.tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!params.promiseid) {\n\t\t\t\tthrow Error('No promise id given');\n\t\t\t}\n\t\t\tif (!params.author) {\n\t\t\t\tthrow Error('No author id given');\n\t\t\t}\n\t\t\tif (!params.text) {\n\t\t\t\tthrow Error('No text given');\n\t\t\t}\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('promises/' + params.tid).push({\n\t\t\t\t\ttype: 'comment',\n\t\t\t\t\tpromiseid: params.promiseid,\n\t\t\t\t\tauthor: params.author,\n\t\t\t\t\ttimestamp: Date.now(),\n\t\t\t\t\ttext: params.text\n\t\t\t\t}).then(resolve).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\taddPromise: function addPromise(params) {\n\t\t\tif (!params.tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!params.author) {\n\t\t\t\tthrow Error('No author id given');\n\t\t\t}\n\t\t\tvar payload = {\n\t\t\t\ttype: 'edit',\n\t\t\t\tauthor: params.author,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t};\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('promises/' + params.tid).push(payload).then(function (done) {\n\t\t\t\t\tvar promiseid = done.path.ct[2];\n\t\t\t\t\tdb.ref('promises/' + params.tid + '/' + promiseid + '/promiseid').set(promiseid).then(function (finished) {\n\t\t\t\t\t\tpayload.promiseid = promiseid;\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\tpromiseid: promiseid,\n\t\t\t\t\t\t\tdata: payload\n\t\t\t\t\t\t});\n\t\t\t\t\t}).catch(reject);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tunsetPromise: function unsetPromise(params) {\n\t\t\tif (!params.tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!params.promiseid) {\n\t\t\t\tthrow Error('No promise id given');\n\t\t\t}\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('promises/' + params.tid + '/' + params.promiseid).remove().then(resolve).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tupdatePromise: function updatePromise(params) {\n\t\t\tif (!params.tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!params.promiseid) {\n\t\t\t\tthrow Error('No promise id given');\n\t\t\t}\n\t\t\tif (!params.author) {\n\t\t\t\tthrow Error('No author id given');\n\t\t\t}\n\t\t\tvar tid = params.tid + '';\n\t\t\tvar editData = params;\n\t\t\tdelete editData.tid;\n\t\t\teditData.timestamp = Date.now();\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('promises/' + tid).push(editData).then(resolve).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\taddLinkToPromise: function addLinkToPromise(params) {\n\t\t\tif (!params.tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!params.promiseid) {\n\t\t\t\tthrow Error('No promise id given');\n\t\t\t}\n\t\t\tif (!params.author) {\n\t\t\t\tthrow Error('No author id given');\n\t\t\t}\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar hasLinkId = params.linkid ? true : false;\n\t\t\t\tdb.ref('promises/' + params.tid).push({\n\t\t\t\t\ttype: 'link',\n\t\t\t\t\tpromiseid: params.promiseid,\n\t\t\t\t\tlinkid: params.linkid || false,\n\t\t\t\t\tauthor: params.author,\n\t\t\t\t\ttimestamp: Date.now(),\n\t\t\t\t\tname: params.name || false,\n\t\t\t\t\turl: params.url || false\n\t\t\t\t}).then(function (done) {\n\t\t\t\t\tif (hasLinkId) {\n\t\t\t\t\t\tresolve(done);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar linkid = done.path.ct[2];\n\t\t\t\t\t\tdb.ref('promises/' + params.tid + '/' + linkid + '/linkid').set(linkid).then(resolve).catch(reject);\n\t\t\t\t\t}\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t}\n\n\t};\n\n\treturn database;\n};\n\nexports.Database = Database;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nvar _config = require('./config');\n\nvar _database = require('./database');\n\nvar _views = require('./views');\n\nvar database = (0, _database.Database)(firebase, _config.config);\n\nvar params = getQueryParams(document.location.search);\nvar TEAM_ID = params.team;\nvar MENTOR_MODE = params.mentor ? true : false;\n\nvar views = (0, _views.Views)();\n\nvar loginBtn = document.getElementById('login');\nvar feedbackBtn = document.getElementById('feedback');\n\nvar allPromisesDiv = document.getElementById('all-promises');\nvar focusedPromiseDiv = document.getElementById('focused-promise-box');\nvar editPromiseDiv = document.getElementById('edit-promise');\n\ndatabase.init(main, function () {\n\t// No user signed in\n\twindow.location = window.location.origin + '/login.html' + document.location.search;\n});\n\nfunction main(user) {\n\n\tinitWithTeamCode(function (tid) {\n\n\t\tconsole.log('What makes working at Omnipointment better than, say, Google?');\n\n\t\tfillText('fill-user-name', user.displayName);\n\t\tfillSrc('fill-user-image', user.photoURL);\n\n\t\tvar prometheus = database.getPrometheus();\n\n\t\tfeedbackBtn.addEventListener('click', function (e) {\n\t\t\tvex.dialog.prompt({\n\t\t\t\tmessage: 'What feedback do you have to share with us?',\n\t\t\t\tcallback: function callback(feedback) {\n\t\t\t\t\tif (feedback) {\n\t\t\t\t\t\tvar uid = database.getCurrentUser().uid;\n\t\t\t\t\t\tdatabase.saveFeedback(tid, uid, feedback).then(function (done) {\n\t\t\t\t\t\t\tvex.dialog.alert('Thank you for your feedback, it really helps us a lot!');\n\t\t\t\t\t\t}).catch(reportErrorToUser);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tvar checkedPermissions = false;\n\t\tdatabase.onTeamChange(tid, function (team, members) {\n\t\t\tif (!checkedPermissions) {\n\t\t\t\tcheckUserPermission(tid, team, members, user);\n\t\t\t\tcheckedPermissions = true;\n\t\t\t}\n\t\t}, reportErrorToUser);\n\n\t\tdatabase.getPrometheus().save({\n\t\t\ttype: 'PROMISES_PAGE',\n\t\t\ttid: tid,\n\t\t\tmentor: isMentor()\n\t\t});\n\t});\n}\n\n/*let user_uids = {\n\tvinesh: '74EmwjB7Y6S02sFYfgIGn7a5zuP2',\n\tfaraz: '82dZC5ktFbeSNIDcT20CLVB8qMW2',\n\tkelly: 'G9hzoVBclzRzqLo4VUlZq4yVxFG2',\n\trosa: 'jCKUJrFM4EfxAH2VZjwtMjvKEnW2'\n}\n\nlet promiseData = {\n\ta0: {\n\t\tpromiseid: \"promise-a\",\n\t\ttype: \"edit\",\n\t\tauthor: user_uids.rosa,\n\t\ttimestamp: new Date(\"8/1/2017 4:07 PM\").getTime(),\n\t\t//\n\t\ttitle: \"Brainstorm\",\n\t\tdescription: \"brainstorm 50 startups\",\n\t\tdue: new Date(\"8/3/2017 1:50 PM\").getTime(),\n\t\tlevel: 1 // small\n\t},\n\ta1: {\n\t\tpromiseid: \"promise-a\",\n\t\ttype: \"comment\",\n\t\tauthor: user_uids.rosa,\n\t\ttimestamp: new Date(\"8/1/2017 4:08 PM\").getTime(),\n\t\t//\n\t\ttext: \"I will follow the IDEO rules of brainstorming.\"\n\t},\n\ta2: {\n\t\tpromiseid: \"promise-a\",\n\t\ttype: \"edit\",\n\t\tauthor: user_uids.rosa,\n\t\ttimestamp: new Date(\"8/1/2017 4:09 PM\").getTime(),\n\t\t//\n\t\tdescription: \"brainstorm 50 startups for us to learn about\"\n\t},\n\ta3: {\n\t\tpromiseid: \"promise-a\",\n\t\ttype: \"edit\",\n\t\tauthor: user_uids.rosa,\n\t\ttimestamp: new Date(\"8/1/2017 4:10 PM\").getTime(),\n\t\t//\n\t\ttitle: \"Brainstorm Startups\"\n\t},\n\ta4: {\n\t\tpromiseid: \"promise-a\",\n\t\ttype: \"link\",\n\t\tauthor: user_uids.rosa,\n\t\ttimestamp: new Date(\"8/1/2017 4:12 PM\").getTime(),\n\t\t//\n\t\tlinkid: \"link-a\",\n\t\turl: \"https://drive.google.com/drive/u/0/folders/0B7DvBWuSCfXcbGZTclg2TTlYRU0\",\n\t\tname: \"Brainstorm Doc\"\n\t},\n\ta5: {\n\t\tpromiseid: \"promise-a\",\n\t\ttype: \"comment\",\n\t\tauthor: user_uids.vinesh,\n\t\ttimestamp: new Date(\"8/1/2017 4:17 PM\").getTime(),\n\t\t//\n\t\ttext: \"Did you consider AirBnb?\"\n\t},\n\ta6: {\n\t\tpromiseid: \"promise-a\",\n\t\ttype: \"comment\",\n\t\tauthor: user_uids.rosa,\n\t\ttimestamp: new Date(\"8/1/2017 4:18 PM\").getTime(),\n\t\t//\n\t\ttext: \"Yes, I did!\"\n\t},\n\ta7: {\n\t\tpromiseid: \"promise-a\",\n\t\ttype: \"complete\",\n\t\tauthor: user_uids.rosa,\n\t\ttimestamp: new Date(\"8/2/2017 9:43 AM\").getTime(),\n\t\t//\n\t\tcompleted: true\n\t},\n\ta8: {\n\t\tpromiseid: \"promise-a\",\n\t\ttype: \"complete\",\n\t\tauthor: user_uids.rosa,\n\t\ttimestamp: new Date(\"8/2/2017 2:31 PM\").getTime(),\n\t\t//\n\t\tcompleted: false\n\t},\n\ta9: {\n\t\tpromiseid: \"promise-a\",\n\t\ttype: \"comment\",\n\t\tauthor: user_uids.rosa,\n\t\ttimestamp: new Date(\"8/2/2017 2:31 PM\").getTime(),\n\t\t//\n\t\ttext: \"Added some extra companies I came up with.\"\n\t},\n\ta10: {\n\t\tpromiseid: \"promise-a\",\n\t\ttype: \"complete\",\n\t\tauthor: user_uids.rosa,\n\t\ttimestamp: new Date(\"8/2/2017 2:32 PM\").getTime(),\n\t\t//\n\t\tcompleted: true\n\t},\n\tb0: {\n\t\tpromiseid: \"promise-b\",\n\t\ttype: \"edit\",\n\t\tauthor: user_uids.vinesh,\n\t\ttimestamp: new Date(\"8/3/2017 1:32 PM\").getTime(),\n\t\t//\n\t\ttitle: \"Articles\",\n\t\tdescription: \"find articles about startup leadership\",\n\t\tdue: new Date(\"8/3/2017 1:50 PM\").getTime(),\n\t\tlevel: 2 // medium\n\t},\n};*/\n\nfunction mainPromiseTab(tid, team, members, user) {\n\n\tconsole.log('main promise tab');\n\n\t//database.getTeam(tid).then((team) => {\n\t//console.log(members)\n\t//});\n\n\tvar renderedTable = false;\n\n\tdatabase.onTeamPromisesChange(tid, function (allPromiseData) {\n\t\tvar teamPromises = parsePromiseData(allPromiseData);\n\t\t//console.log(teamPromises);\n\t\trenderPromiseTable(teamPromises, members, tid);\n\t\tif (!renderedTable) {\n\t\t\trenderedTable = true;\n\t\t\tdocument.getElementById('new-promise').addEventListener('click', function (e) {\n\t\t\t\tdatabase.addPromise({\n\t\t\t\t\ttid: tid,\n\t\t\t\t\tauthor: database.getCurrentUser().uid\n\t\t\t\t}).then(function (res) {\n\t\t\t\t\tvar promiseid = res.promiseid;\n\t\t\t\t\tvar promiseData = res.data;\n\t\t\t\t\tvar wrapper = parsePromiseData({ init: promiseData });\n\t\t\t\t\tvar focusedPromise = wrapper[promiseid];\n\t\t\t\t\t//console.log(focusedPromise)\n\t\t\t\t\trenderPromiseEditor(promiseid, focusedPromise, members, tid, true);\n\t\t\t\t}).catch(reportErrorToUser);\n\t\t\t});\n\t\t}\n\t});\n\n\tdocument.querySelector('#charter-tab').addEventListener('click', function (e) {\n\t\twindow.location = window.location.origin + '/charter.html' + document.location.search;\n\t});\n\n\tdocument.querySelector('#promises-tab').addEventListener('click', function (e) {\n\t\twindow.location = window.location.origin + '/promises.html' + document.location.search;\n\t});\n\n\tdocument.querySelector('#health-tab').addEventListener('click', function (e) {\n\t\twindow.location = window.location.origin + '/health.html' + document.location.search;\n\t});\n\n\t/*let proms = [];\n for (let person_key in user_uids) {\n \tlet uid = user_uids[person_key];\n \tlet pr = database.getUser(uid);\n \tpr.uid = uid;\n \tproms.push(pr);\n }\n Promise.all(proms).then((users) => {\n \t\tlet user_profiles = {};\n \tusers.forEach((userData, uidx) => {\n \t\tlet uid = proms[uidx].uid;\n \t\tuser_profiles[uid] = userData;\n \t});\n \t\tlet teamPromises = parsePromiseData(promiseData);\n \tconsole.log(teamPromises);\n \t\trenderPromiseTable(teamPromises, user_profiles, tid);\n \t});*/\n}\n\nfunction renderPromiseTable(promiseData, profiles, tid) {\n\n\tvar table = views.getPromiseTable({\n\t\tpromises: promiseData,\n\t\tprofiles: profiles\n\t});\n\n\tvar tableHolder = document.getElementById('promise-table');\n\ttableHolder.innerHTML = '';\n\ttableHolder.appendChild(table);\n\n\tvar promiseButtons = Array.from(document.querySelectorAll('[data-promiseid]'));\n\tpromiseButtons.forEach(function (button) {\n\t\tbutton.addEventListener('click', function (e) {\n\t\t\tvar promiseid = button.dataset['promiseid'];\n\t\t\tconsole.log('promiseid: ' + promiseid);\n\t\t\tvar focusedPromise = promiseData[promiseid];\n\t\t\trenderPromiseBox(promiseid, focusedPromise, profiles, tid);\n\t\t});\n\t});\n\n\t/*let i = 0;\n for (let pdid in promiseData) {\n \tif (i > 0) {\n \t\trenderPromiseBox(pdid, promiseData[pdid], profiles, tid);\n \t\tbreak;\n \t}\n \ti++;\n }*/\n}\n\nfunction renderPromiseBox(promiseid, focusedPromise, profiles, tid) {\n\n\trenderPromiseBoxCallback(promiseid, focusedPromise, profiles, tid);\n\n\tdatabase.onPromiseChange(tid, promiseid, function (data) {\n\n\t\tvar wrapper = parsePromiseData(data);\n\t\tvar inPromise = wrapper[promiseid];\n\t\t// Account for change in profiles?\n\t\trenderPromiseBoxCallback(promiseid, inPromise, profiles, tid);\n\t});\n}\n\nvar justSubmittedComment = false;\n\nfunction renderPromiseBoxCallback(promiseid, focusedPromise, profiles, tid) {\n\n\tvar box = views.getPromiseBox({\n\t\tpromise: focusedPromise,\n\t\tprofiles: profiles\n\t});\n\n\tvar saveTyping = false;\n\tvar textarea = document.querySelector('[data-fpb=\"textarea\"]');\n\tif (textarea) {\n\t\tsaveTyping = textarea.value;\n\t}\n\n\tvar out = focusedPromiseDiv;\n\tout.innerHTML = '';\n\tout.appendChild(box);\n\n\tif (justSubmittedComment) {\n\t\tsaveTyping = false;\n\t\tjustSubmittedComment = false;\n\t}\n\n\tif (saveTyping) {\n\t\ttextarea = document.querySelector('[data-fpb=\"textarea\"]');\n\t\ttextarea.value = saveTyping;\n\t}\n\n\teditPromiseDiv.style.display = 'none';\n\tallPromisesDiv.style.display = 'none';\n\tout.style.display = 'block';\n\n\tdocument.querySelector('[data-fpb=\"back\"]').addEventListener('click', function (e) {\n\t\tallPromisesDiv.style.display = 'block';\n\t\tout.style.display = 'none';\n\t});\n\n\tdocument.querySelector('[data-fpb=\"edit\"]').addEventListener('click', function (e) {\n\t\trenderPromiseEditor(promiseid, focusedPromise, profiles, tid, false);\n\t});\n\n\tdocument.querySelector('[data-fpb=\"comment\"]').addEventListener('click', function (e) {\n\t\tvar myTextarea = document.querySelector('[data-fpb=\"textarea\"]');\n\t\tvar text = myTextarea.value;\n\t\tif (text) {\n\t\t\tjustSubmittedComment = true;\n\t\t\tdatabase.commentOnPromise({\n\t\t\t\ttid: tid,\n\t\t\t\tpromiseid: promiseid,\n\t\t\t\tauthor: database.getCurrentUser().uid,\n\t\t\t\ttext: text\n\t\t\t}).then(function (done) {\n\t\t\t\tmyTextarea.value = '';\n\t\t\t}).catch(reportErrorToUser);\n\t\t}\n\t});\n\n\tdocument.querySelector('[data-fpb=\"link\"]').addEventListener('click', function (e) {\n\t\tvar msg = 'Enter Link URL:';\n\t\tpromptLinkDataThen(msg, function (url, name) {\n\t\t\tdatabase.addLinkToPromise({\n\t\t\t\ttid: tid,\n\t\t\t\tpromiseid: promiseid,\n\t\t\t\tauthor: database.getCurrentUser().uid,\n\t\t\t\turl: url,\n\t\t\t\tname: name\n\t\t\t}).then(function (done) {}).catch(reportErrorToUser);\n\t\t});\n\t});\n\n\tdocument.querySelector('[data-fpb=\"complete\"]').addEventListener('click', function (e) {\n\t\tdatabase.updatePromise({\n\t\t\ttype: 'complete',\n\t\t\ttid: tid,\n\t\t\tpromiseid: promiseid,\n\t\t\tauthor: database.getCurrentUser().uid,\n\t\t\tcompleted: !focusedPromise.completed\n\t\t}).then(function (done) {}).catch(reportErrorToUser);\n\t});\n\n\tArray.from(document.querySelectorAll('.edit-link[data-for]')).forEach(function (editor) {\n\t\teditor.addEventListener('click', function (e) {\n\t\t\tvar key = editor.dataset['for'];\n\t\t\tconsole.log('link key: ' + key);\n\t\t\tvar linkData = focusedPromise.links[key];\n\t\t\tvar msg = 'Edit Link URL:';\n\t\t\tpromptLinkDataThen(msg, function (url, name) {\n\t\t\t\tdatabase.addLinkToPromise({\n\t\t\t\t\ttid: tid,\n\t\t\t\t\tpromiseid: promiseid,\n\t\t\t\t\tlinkid: key,\n\t\t\t\t\tauthor: database.getCurrentUser().uid,\n\t\t\t\t\turl: url,\n\t\t\t\t\tname: name\n\t\t\t\t}).then(function (done) {}).catch(reportErrorToUser);\n\t\t\t}, linkData);\n\t\t});\n\t});\n}\n\nfunction renderPromiseEditor(promiseid, focusedPromise, profiles, tid, inDeletable) {\n\tvar deletable = inDeletable || false;\n\tvar out = focusedPromiseDiv;\n\tallPromisesDiv.style.display = 'none';\n\tout.style.display = 'none';\n\teditPromiseDiv.style.display = 'block';\n\tvar model = focusedPromise;\n\tmodel.deletable = deletable;\n\tvar div = views.getPromiseEditor(model);\n\teditPromiseDiv.innerHTML = '';\n\teditPromiseDiv.appendChild(div);\n\tvar warning = document.querySelector('[data-pef=\"warning\"]');\n\tvar btn = document.querySelector('[data-pef=\"submit\"]');\n\tbtn.addEventListener('click', function (e) {\n\t\tvar title = document.querySelector('[data-pef=\"title\"]');\n\t\tvar description = document.querySelector('[data-pef=\"description\"]');\n\t\tvar due = document.querySelector('[data-pef=\"due\"]');\n\t\tvar timestamp = Date.parse(due.innerText);\n\t\tif (isNaN(timestamp) == false) {\n\t\t\tdatabase.updatePromise({\n\t\t\t\ttype: 'edit',\n\t\t\t\ttid: tid,\n\t\t\t\tpromiseid: promiseid,\n\t\t\t\tauthor: database.getCurrentUser().uid,\n\t\t\t\ttitle: title.innerText,\n\t\t\t\tdescription: description.innerText,\n\t\t\t\tdue: timestamp\n\t\t\t}).then(function (done) {\n\t\t\t\teditPromiseDiv.style.display = 'none';\n\t\t\t\trenderPromiseBox(promiseid, focusedPromise, profiles, tid);\n\t\t\t}).catch(reportErrorToUser);\n\t\t} else {\n\t\t\twarning.innerText = 'Choose a valid date.';\n\t\t}\n\t});\n\tvar remove = document.querySelector('[data-pef=\"remove\"]');\n\tif (remove) {\n\t\tremove.addEventListener('click', function (e) {\n\t\t\tdatabase.unsetPromise({\n\t\t\t\ttid: tid,\n\t\t\t\tpromiseid: promiseid\n\t\t\t}).then(function (done) {\n\t\t\t\tallPromisesDiv.style.display = 'block';\n\t\t\t\tout.style.display = 'none';\n\t\t\t\teditPromiseDiv.style.display = 'none';\n\t\t\t}).catch(reportErrorToUser);\n\t\t});\n\t}\n\tvar cancel = document.querySelector('[data-pef=\"cancel\"]');\n\tif (cancel) {\n\t\tcancel.addEventListener('click', function (e) {\n\t\t\teditPromiseDiv.style.display = 'none';\n\t\t\trenderPromiseBox(promiseid, focusedPromise, profiles, tid);\n\t\t});\n\t}\n}\n\nfunction parsePromiseData(data) {\n\t//console.log(data);\n\tvar output = {};\n\tif (data) {\n\t\tObject.keys(data).map(function (key) {\n\t\t\tvar val = data[key];\n\t\t\tval.key = key;\n\t\t\treturn val;\n\t\t}).sort(function (a, b) {\n\t\t\treturn a.timestamp - b.timestamp;\n\t\t}).forEach(function (node) {\n\t\t\tvar promiseid = node.promiseid;\n\t\t\tif (!(promiseid in output)) {\n\t\t\t\toutput[promiseid] = {\n\t\t\t\t\t//\n\t\t\t\t\tpromise_id: false,\n\t\t\t\t\tauthor: false,\n\t\t\t\t\ttitle: 'Untitled Promise',\n\t\t\t\t\tdescription: '...',\n\t\t\t\t\tlevel: 1,\n\t\t\t\t\tcompleted: false,\n\t\t\t\t\t//\n\t\t\t\t\tstarted: false,\n\t\t\t\t\tfinished: false,\n\t\t\t\t\tdue: false,\n\t\t\t\t\tlastActive: 0,\n\t\t\t\t\t//\n\t\t\t\t\tlinks: {},\n\t\t\t\t\tcomments: {}\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (output[promiseid].lastActive < node.timestamp) {\n\t\t\t\toutput[promiseid].lastActive = node.timestamp;\n\t\t\t}\n\t\t\tswitch (node.type) {\n\t\t\t\tcase 'edit':\n\t\t\t\t\tif (!output[promiseid].started) {\n\t\t\t\t\t\toutput[promiseid].started = node.timestamp;\n\t\t\t\t\t}\n\t\t\t\t\tif (node.author && !output[promiseid].author) {\n\t\t\t\t\t\toutput[promiseid].author = node.author;\n\t\t\t\t\t}\n\t\t\t\t\tif (node.title) {\n\t\t\t\t\t\toutput[promiseid].title = node.title;\n\t\t\t\t\t\t// Add Comment\n\t\t\t\t\t}\n\t\t\t\t\tif (node.description) {\n\t\t\t\t\t\toutput[promiseid].description = node.description;\n\t\t\t\t\t\t// Add Comment\n\t\t\t\t\t\toutput[promiseid].comments[node.key] = {\n\t\t\t\t\t\t\tauthor: node.author,\n\t\t\t\t\t\t\ttimestamp: node.timestamp,\n\t\t\t\t\t\t\ttext: 'Set description: ' + node.description,\n\t\t\t\t\t\t\tgenerated: true\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tif (node.level) {\n\t\t\t\t\t\toutput[promiseid].level = node.level;\n\t\t\t\t\t\t// Add Comment\n\t\t\t\t\t}\n\t\t\t\t\tif (node.due) {\n\t\t\t\t\t\toutput[promiseid].due = node.due;\n\t\t\t\t\t\t// Add Comment\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'comment':\n\t\t\t\t\toutput[promiseid].comments[node.key] = {\n\t\t\t\t\t\tauthor: node.author,\n\t\t\t\t\t\ttimestamp: node.timestamp,\n\t\t\t\t\t\ttext: node.text\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'link':\n\t\t\t\t\tvar linkid = node.linkid;\n\t\t\t\t\tif (!(linkid in output[promiseid].links)) {\n\t\t\t\t\t\toutput[promiseid].links[linkid] = {\n\t\t\t\t\t\t\tlinkid: linkid\n\t\t\t\t\t\t};\n\t\t\t\t\t\toutput[promiseid].comments[node.key] = {\n\t\t\t\t\t\t\tauthor: node.author,\n\t\t\t\t\t\t\ttimestamp: node.timestamp,\n\t\t\t\t\t\t\ttext: 'Added link: ' + (node.name || 'untitled link') + '.',\n\t\t\t\t\t\t\tgenerated: true\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tif (node.url) {\n\t\t\t\t\t\toutput[promiseid].links[linkid].url = node.url;\n\t\t\t\t\t}\n\t\t\t\t\tif (node.name) {\n\t\t\t\t\t\toutput[promiseid].links[linkid].name = node.name;\n\t\t\t\t\t}\n\t\t\t\t\tif (node.remove) {\n\t\t\t\t\t\tdelete output[promiseid].links[linkid];\n\t\t\t\t\t\t// Add Comment\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'complete':\n\t\t\t\t\toutput[promiseid].completed = node.completed;\n\t\t\t\t\toutput[promiseid].finished = node.timestamp;\n\t\t\t\t\t// Add Comment\n\t\t\t\t\toutput[promiseid].comments[node.key] = {\n\t\t\t\t\t\tauthor: node.author,\n\t\t\t\t\t\ttimestamp: node.timestamp,\n\t\t\t\t\t\ttext: 'Marked as ' + (node.completed ? 'complete' : 'incomplete') + '.',\n\t\t\t\t\t\tgenerated: true\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t}\n\treturn output;\n}\n\nfunction promptLinkDataThen(message, _callback, inPrefill) {\n\tvar prefill = inPrefill || {};\n\tvex.dialog.prompt({\n\t\tmessage: message,\n\t\tvalue: prefill.url,\n\t\tcallback: function callback(url) {\n\t\t\tif (url) {\n\t\t\t\tvex.dialog.prompt({\n\t\t\t\t\tmessage: 'What is the name of this link?',\n\t\t\t\t\tvalue: prefill.name,\n\t\t\t\t\tcallback: function callback(name) {\n\t\t\t\t\t\tif (url && name) {\n\t\t\t\t\t\t\t_callback(url, name);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction checkUserPermission(tid, team, members, user) {\n\t/*return new Promise((resolve, reject) => {\n \t});*/\n\n\tif (isMentor()) {\n\t\tconsole.log('in mentor mode');\n\t\tdocument.body.classList.add('mentoring');\n\t\tvar editableNodes = document.querySelectorAll('[contenteditable=true]');\n\t\tfor (var n = 0; n < editableNodes.length; n++) {\n\t\t\teditableNodes[n].setAttribute('contenteditable', false);\n\t\t}\n\t}\n\n\tvar uid = database.getCurrentUser().uid;\n\tif (uid in members || isMentor()) {\n\t\tif (Object.keys(team).length > 0) {\n\t\t\tmainPromiseTab(tid, team, members, user);\n\t\t}\n\t} else if (params.code) {\n\t\tvex.dialog.confirm({\n\t\t\tmessage: 'Do you want to join ' + (team.name || 'this team') + '?',\n\t\t\tbuttons: [$.extend({}, vex.dialog.buttons.YES, { text: 'Yes' }), $.extend({}, vex.dialog.buttons.NO, { text: 'No' })],\n\t\t\tcallback: function callback(yes) {\n\t\t\t\tif (yes) {\n\t\t\t\t\tdatabase.joinTeam(tid, uid, params.code).then(function (res) {\n\t\t\t\t\t\tif (res.success) {\n\t\t\t\t\t\t\tvex.dialog.alert({\n\t\t\t\t\t\t\t\tmessage: 'Congratulations, you just joined ' + (team.name || 'your new team') + '!'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (Object.keys(team).length > 0) {\n\t\t\t\t\t\t\t\trenderTeamCharter(tid, team, members);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twindow.location = window.location.origin + '/me.html';\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\twindow.location = window.location.origin + '/me.html';\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t} else {\n\t\twindow.location = window.location.origin + '/me.html';\n\t}\n}\n\nfunction isMentor() {\n\treturn MENTOR_MODE;\n}\n\nfunction reportErrorToUser(err) {\n\tconsole.error(err);\n\tvex.dialog.alert(err + '');\n}\n\nfunction getQueryParams(qs) {\n\tqs = qs.split('+').join(' ');\n\tvar params = {},\n\t    tokens,\n\t    re = /[?&]?([^=]+)=([^&]*)/g;\n\twhile (tokens = re.exec(qs)) {\n\t\tparams[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);\n\t}\n\treturn params;\n}\n\nfunction fillText(className, text) {\n\tvar spans = document.getElementsByClassName(className);\n\tfor (var s = 0; s < spans.length; s++) {\n\t\tspans[s].innerText = text;\n\t}\n}\n\nfunction fillSrc(className, text) {\n\tvar spans = document.getElementsByClassName(className);\n\tfor (var s = 0; s < spans.length; s++) {\n\t\tspans[s].src = text;\n\t}\n}\n\nvar cancels = 0;\nfunction initWithTeamCode(_callback2) {\n\tif (TEAM_ID) {\n\t\t_callback2(TEAM_ID);\n\t} else {\n\t\tvex.dialog.prompt({\n\t\t\tmessage: 'Enter your team code:',\n\t\t\tcallback: function callback(code) {\n\t\t\t\tif (code) {\n\t\t\t\t\t_callback2(code);\n\t\t\t\t} else if (cancels >= 1) {\n\t\t\t\t\twindow.location = './';\n\t\t\t\t} else {\n\t\t\t\t\tcancels++;\n\t\t\t\t\tinitWithTeamCode(_callback2);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\n},{\"./config\":1,\"./database\":2,\"./views\":4}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar Views = function Views() {\n\n\tvar views = {\n\n\t\tgetRoleAndUpdateTile: function getRoleAndUpdateTile(model) {\n\t\t\tvar posted = new Date(model.timestamp);\n\t\t\tvar dateFormat = moment(posted).format('M/D h:mm A');\n\t\t\tvar diff = moment(Date.now()).diff(moment(model.timestamp));\n\t\t\tvar daysSinceLastUpdate = moment.duration(diff).asDays();\n\t\t\tvar tagClass = 'is-success';\n\t\t\tif (daysSinceLastUpdate >= 5) {\n\t\t\t\ttagClass = 'is-danger';\n\t\t\t} else if (daysSinceLastUpdate >= 3) {\n\t\t\t\ttagClass = 'is-warning';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-5\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"media\">\\n\\t\\t\\t\\t\\t\\t\\t<figure class=\"media-left\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"image is-48x48\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + model.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t\\t\\t\\t</figure>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"media-content content\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title is-5\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"subtitle is-6\">' + model.role + '</p>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-7\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"tag ' + tagClass + '\">' + dateFormat + '</span> ' + model.update + '\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('tile');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetRoleTile: function getRoleTile(model) {\n\t\t\tvar editSection = '<div class=\"content\">\\n\\t\\t\\t\\t<h3 class=\"title is-5\">' + model.role + '</h3>\\n\\t\\t\\t\\t<p class=\"subtitle is-6\">' + model.responsibility + '</p>\\n\\t\\t\\t</div>';\n\t\t\tif (model.editable) {\n\t\t\t\teditSection = '<div class=\"content\">\\n\\t\\t\\t\\t\\t<h3 id=\"my-title\" class=\"title is-5\" contenteditable=\"true\">' + model.role + '</h3>\\n\\t\\t\\t\\t\\t<p id=\"my-responsibility\" class=\"subtitle is-6\" contenteditable=\"true\">' + model.responsibility + '</p>\\n\\t\\t\\t\\t\\t<button id=\"my-role-save\" class=\"button is-primary is-outlined is-hidden-to-mentor\">\\n\\t\\t\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t\\t\\t<i class=\"fa fa-edit\"></i>\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t<span>Save Role</span>\\n\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t</div>';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-5\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"media\">\\n\\t\\t\\t\\t\\t\\t\\t<figure class=\"media-left\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"image is-48x48\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + model.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t\\t\\t\\t</figure>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title is-5\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-7\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t' + editSection + '\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('tile');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetRoleTemplateTile: function getRoleTemplateTile(model) {\n\t\t\tvar editSection = '<div class=\"content\">\\n\\t\\t\\t\\t<h3 class=\"title is-5\">' + model.role + '</h3>\\n\\t\\t\\t\\t<p class=\"subtitle is-6\">' + model.responsibility + '</p>\\n\\t\\t\\t</div>';\n\t\t\tvar editButton = '';\n\t\t\tif (model.editable) {\n\t\t\t\teditSection = '<div class=\"content\">\\n\\t\\t\\t\\t\\t<h3 data-bind=\"field-role\" class=\"title is-5\" contenteditable=\"true\">' + model.role + '</h3>\\n\\t\\t\\t\\t\\t<p data-bind=\"field-responsibility\" class=\"subtitle is-6\" contenteditable=\"true\">' + model.responsibility + '</p>\\n\\t\\t\\t\\t</div>';\n\t\t\t\teditButton = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-4\">\\n\\t\\t\\t\\t\\t<button data-bind=\"button-save\" class=\"button is-primary is-outlined is-hidden-to-mentor\">\\n\\t\\t\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t\\t\\t<i class=\"fa fa-edit\"></i>\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t<span>Save Role</span>\\n\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical {model.editable ? \\'is-8\\' : \\'is-12\\'}\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"media\">\\n\\t\\t\\t\\t\\t\\t\\t<figure class=\"media-left\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<div data-bind=\"field-icon\" class=\"image is-48x48 icon-image\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\"fa fa-' + (model.icon || 'user') + '\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t</figure>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t\\t\\t' + editSection + '\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t' + editButton + '\\n\\t\\t\\t';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('tile');\n\t\t\tdiv.innerHTML = html;\n\t\t\tif (model.editable && model.onSave) {\n\t\t\t\tvar button = div.querySelectorAll('[data-bind=button-save]')[0];\n\t\t\t\tvar role = div.querySelectorAll('[data-bind=field-role]')[0];\n\t\t\t\tvar resp = div.querySelectorAll('[data-bind=field-responsibility]')[0];\n\t\t\t\tbutton.addEventListener('click', function (e) {\n\t\t\t\t\tmodel.onSave({\n\t\t\t\t\t\te: e,\n\t\t\t\t\t\tmodel: model,\n\t\t\t\t\t\trole: role.innerText,\n\t\t\t\t\t\tresponsibility: resp.innerText\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tvar iconEdit = div.querySelectorAll('[data-bind=field-icon]')[0];\n\t\t\t\ticonEdit.addEventListener('click', function (e) {\n\t\t\t\t\tmodel.onIconEdit({\n\t\t\t\t\t\te: e,\n\t\t\t\t\t\tmodel: model\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn div;\n\t\t},\n\n\t\tgetProgressUpdate: function getProgressUpdate(model) {\n\t\t\tvar posted = new Date(model.timestamp);\n\t\t\tvar dateFormat = moment(posted).format('M/D h:mm A');\n\t\t\tvar diff = moment(Date.now()).diff(moment(model.timestamp));\n\t\t\tvar daysSinceLastUpdate = moment.duration(diff).asDays();\n\t\t\tvar tagClass = 'is-success';\n\t\t\tif (daysSinceLastUpdate >= 5) {\n\t\t\t\ttagClass = 'is-danger';\n\t\t\t} else if (daysSinceLastUpdate >= 3) {\n\t\t\t\ttagClass = 'is-warning';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-5\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<span class=\"tags has-addons\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"tag ' + tagClass + ' is-medium\">' + dateFormat + '</span>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"tag is-medium\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\"image image-tag-rounded is-32x32\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + model.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\"is-medium\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t' + model.name + '\\n\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-7\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t' + model.update + '\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('tile');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetLinkItem: function getLinkItem(model) {\n\t\t\tvar icon = 'file';\n\t\t\tif (model.url.indexOf('docs.google') > -1) {\n\t\t\t\ticon = 'google';\n\t\t\t\tif (model.url.indexOf('docs.google.com/document') > -1) {\n\t\t\t\t\ticon = 'file-text';\n\t\t\t\t} else if (model.url.indexOf('docs.google.com/spreadsheets') > -1) {\n\t\t\t\t\ticon = 'table';\n\t\t\t\t} else if (model.url.indexOf('docs.google.com/presentation') > -1) {\n\t\t\t\t\ticon = 'slideshare';\n\t\t\t\t}\n\t\t\t} else if (model.url.indexOf('omnipointment.com/meeting') > -1) {\n\t\t\t\ticon = 'calendar';\n\t\t\t} else if (model.url.indexOf('github.com') > -1) {\n\t\t\t\ticon = 'github';\n\t\t\t} else if (model.url.indexOf('youtube.com') > -1) {\n\t\t\t\ticon = 'youtube-play';\n\t\t\t} else if (model.url.indexOf('vimeo.com') > -1) {\n\t\t\t\ticon = 'vimeo';\n\t\t\t} else if (model.url.indexOf('codeshare.io') > -1 || model.url.indexOf('codepen.io') > -1) {\n\t\t\t\ticon = 'code-fork';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<a target=\"_blank\" href=\"' + model.url + '\">\\n\\t\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t\\t<i class=\"fa fa-' + icon + '\"></i>\\n\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t<span>' + model.name + '</span>\\n\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t<a class=\"is-danger is-hidden-to-mentor\">\\n\\t\\t\\t\\t\\t<span class=\"icon edit-link\" data-for=\"' + model.key + '\">\\n\\t\\t\\t\\t\\t\\t<i class=\"fa fa-edit\"></i>\\n\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t</a>\\n\\t\\t\\t';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('team-link');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetTeamTile: function getTeamTile(model) {\n\t\t\tvar origin = window.location.origin;\n\t\t\tvar link = origin + '/charter.html?team=' + model.tid;\n\t\t\tvar tag = '<span class=\"tag is-warning\">Template</span>';\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-vertical\">\\n\\t\\t\\t\\t\\t<div class=\"box\">\\n\\t\\t\\t\\t\\t\\t<div class=\"tile\">\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title\">' + model.name + ' ' + (model.isTemplate ? tag : '') + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t<div class=\"tile\">\\n\\t\\t\\t\\t\\t\\t\\t<a href=\"' + link + '\" class=\"button is-primary is-outlined\">View Team Charter</a>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('column');\n\t\t\tdiv.classList.add('is-4');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetClassTile: function getClassTile(model) {\n\t\t\tvar origin = window.location.origin;\n\t\t\tvar classLink = origin + '/class.html?class=' + model.cid;\n\t\t\tvar list = Object.keys(model.teams).filter(function (tid) {\n\t\t\t\treturn Object.keys(model.teams[tid]).length > 0;\n\t\t\t}).map(function (tid) {\n\t\t\t\tvar team = model.teams[tid];\n\t\t\t\tteam.tid = tid;\n\t\t\t\treturn team;\n\t\t\t});\n\t\t\tvar n = list.length;\n\t\t\tvar items = list.map(function (team) {\n\t\t\t\tvar teamLink = origin + '/charter.html?team=' + team.tid + '&mentor=true';\n\t\t\t\tvar itemHTML = '\\n\\t\\t\\t\\t\\t<div class=\"column is-4\">\\n\\t\\t\\t\\t\\t\\t<a href=' + teamLink + ' class=\"button is-primary is-outlined is-fullwidth\">' + team.name + '</a>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t';\n\t\t\t\treturn itemHTML;\n\t\t\t});\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-vertical\">\\n\\t\\t\\t\\t\\t<div class=\"tile box is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t<p class=\"subtitle\">' + n + ' team' + (n === 1 ? '' : 's') + ' | Code: ' + model.cid + '</p>\\n\\t\\t\\t\\t\\t\\t\\t<a href=\"' + classLink + '\" class=\"button is-primary is-outlined\">View Class Dashboard</a>\\n\\t\\t\\t';\n\t\t\t/*<div class=\"columns is-multiline\">\n   \t${items.join('')}\n   </div>*/\n\t\t\thtml += '\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\t//<a href=\"${link}\" class=\"button is-primary is-outlined\">View Class Progress</a>\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('column');\n\t\t\tdiv.classList.add('is-4');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetUserTile: function getUserTile(model) {\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t<div class=\"media\">\\n\\t\\t\\t\\t\\t\\t<figure class=\"media-left\">\\n\\t\\t\\t\\t\\t\\t\\t<p class=\"image is-48x48 image-tag-rounded\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + model.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t\\t\\t</figure>\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title is-5\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t<p class=\"subtitle is-6\">' + model.subtitle + '</p>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('column');\n\t\t\tdiv.classList.add('is-4');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetClassTeamTable: function getClassTeamTable(model) {\n\t\t\tvar html = '\\n\\t\\t\\t\\t<thead>\\n\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t<th>Team Name</th>\\n\\t\\t\\t\\t\\t\\t<th>Members</th>\\n\\t\\t\\t\\t\\t\\t<th>Charter Edits</th>\\n\\t\\t\\t\\t\\t\\t<th>Progress Updates</th>\\n\\t\\t\\t\\t\\t\\t<th>Last Active</th>\\n\\t\\t\\t\\t\\t\\t<th>View Team</th>\\n\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t</thead>\\n\\t\\t\\t\\t<tbody>\\n\\t\\t\\t';\n\t\t\tmodel.teams.forEach(function (team) {\n\t\t\t\tvar updates = 0;\n\t\t\t\tfor (var uid in team.updates) {\n\t\t\t\t\tfor (var upid in team.updates[uid]) {\n\t\t\t\t\t\tupdates++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar link = origin + '/charter.html?team=' + team.tid + '&mentor=true';\n\t\t\t\tvar members = team.members || {};\n\t\t\t\thtml += '\\n\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t<td>' + team.name + '</td>\\n\\t\\t\\t\\t\\t\\t<td>' + Object.keys(members).length + '</td>\\n\\t\\t\\t\\t\\t\\t<td>' + Object.keys(team.edits).length + '</td>\\n\\t\\t\\t\\t\\t\\t<td>' + updates + '</td>\\n\\t\\t\\t\\t\\t\\t<td>' + moment(team.lastAccess).fromNow() + '</td>\\n\\t\\t\\t\\t\\t\\t<td>\\n\\t\\t\\t\\t\\t\\t\\t<a href=\"' + link + '\" class=\"button is-primary is-outlined\">View Charter</a>\\n\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t';\n\t\t\t});\n\t\t\thtml += '\\n\\t\\t\\t\\t</tbody>\\n\\t\\t\\t';\n\t\t\tvar table = document.createElement('table');\n\t\t\ttable.classList.add('table');\n\t\t\ttable.classList.add('is-narrow');\n\t\t\ttable.classList.add('is-fullwidth');\n\t\t\ttable.innerHTML = html;\n\t\t\treturn table;\n\t\t},\n\n\t\tgetClassTeamGrid: function getClassTeamGrid(model) {\n\t\t\tvar html = '';\n\t\t\tmodel.teams.forEach(function (team) {\n\t\t\t\tvar updates = 0;\n\t\t\t\tfor (var uid in team.updates) {\n\t\t\t\t\tfor (var upid in team.updates[uid]) {\n\t\t\t\t\t\tupdates++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar link = origin + '/charter.html?team=' + team.tid + '&code=' + team.joinCode;\n\t\t\t\tvar members = team.members || {};\n\t\t\t\thtml += '\\n\\t\\t\\t\\t\\t<div class=\"column is-6\">\\n\\t\\t\\t\\t\\t\\t<div class=\"box content has-text-centered\">\\n\\t\\t\\t\\t\\t\\t\\t<h2 class=\"title is-4\">' + team.name + '</h2 class=\"title is-4\">\\n\\t\\t\\t\\t\\t\\t\\t<p class=\"subtitle is-neatly-spaced\">Last active ' + moment(team.lastAccess).fromNow() + '</p>\\n\\t\\t\\t\\t\\t\\t\\t<p class=\"subtitle is-neatly-spaced\">' + Object.keys(team.edits).length + ' charter edits</p>\\n\\t\\t\\t\\t';\n\t\t\t\tfor (var _uid in team.members) {\n\t\t\t\t\tvar _profile = model.profiles[_uid];\n\t\t\t\t\tvar _userModel = {\n\t\t\t\t\t\tname: 'Unknown Student',\n\t\t\t\t\t\timage: './public/img/no-user.png',\n\t\t\t\t\t\tsubtitle: '...'\n\t\t\t\t\t};\n\t\t\t\t\tif (_profile.name) {\n\t\t\t\t\t\t_userModel.name = _profile.name;\n\t\t\t\t\t}\n\t\t\t\t\tif (_profile.image) {\n\t\t\t\t\t\t_userModel.image = _profile.image;\n\t\t\t\t\t}\n\t\t\t\t\tif (team.members[_uid].role) {\n\t\t\t\t\t\t_userModel.subtitle = team.members[_uid].role;\n\t\t\t\t\t}\n\t\t\t\t\tvar _userDiv = views.getUserTile(_userModel);\n\t\t\t\t\thtml += _userDiv.innerHTML;\n\t\t\t\t}\n\t\t\t\thtml += '\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"is-grouped has-text-centered\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<a href=\"' + link + '\" class=\"button is-primary is-outlined\">Join Team</a>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t';\n\t\t\t});\n\t\t\thtml += '\\n\\t\\t\\t\\t\\t<div class=\"column is-6\">\\n\\t\\t\\t\\t\\t\\t<div class=\"box content has-text-centered\">\\n\\t\\t\\t\\t\\t\\t\\t<h2 class=\"title is-4\">Start New Team</h2 class=\"title is-4\">\\n\\t\\t\\t\\t\\t\\t\\t<p class=\"subtitle is-neatly-spaced\">Don\\'t see your team?</p>\\n\\t\\t\\t';\n\n\t\t\tvar profile = model.profiles[model.uid];\n\t\t\tvar userModel = {\n\t\t\t\tname: 'Unknown Student',\n\t\t\t\timage: './public/img/no-user.png',\n\t\t\t\tsubtitle: 'Team Member'\n\t\t\t};\n\t\t\tif (profile.name) {\n\t\t\t\tuserModel.name = profile.name;\n\t\t\t}\n\t\t\tif (profile.image) {\n\t\t\t\tuserModel.image = profile.image;\n\t\t\t}\n\t\t\tvar userDiv = views.getUserTile(userModel);\n\t\t\thtml += userDiv.innerHTML;\n\n\t\t\thtml += '\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"is-grouped has-text-centered\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<a id=\"new-team\" class=\"button is-primary is-outlined\">Start New Team</a>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('columns');\n\t\t\tdiv.classList.add('is-multiline');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetPromiseTable: function getPromiseTable(model) {\n\t\t\tvar html = '\\n\\t\\t\\t\\t<thead>\\n\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t<th>Name</th>\\n\\t\\t\\t\\t\\t\\t<th>Member</th>\\n\\t\\t\\t\\t\\t\\t<th>Status</th>\\n\\t\\t\\t\\t\\t\\t<th>Last Active</th>\\n\\t\\t\\t\\t\\t\\t<th>View</th>\\n\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t</thead>\\n\\t\\t\\t\\t<tbody>\\n\\t\\t\\t';\n\n\t\t\tObject.keys(model.promises).map(function (pdid) {\n\t\t\t\tvar val = model.promises[pdid];\n\t\t\t\tval.key = pdid;\n\t\t\t\treturn val;\n\t\t\t}).sort(function (a, b) {\n\t\t\t\treturn 0;\n\t\t\t}).forEach(function (promise) {\n\t\t\t\tvar authorName = 'Unknown';\n\t\t\t\tvar sinceStart = moment(promise.started).fromNow();\n\t\t\t\ttry {\n\t\t\t\t\tauthorName = model.profiles[promise.author].name;\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\t\t\t\tvar dur = moment.duration(moment(promise.due).diff(moment(Date.now())));\n\t\t\t\tvar daysLeft = Math.floor(dur.asDays());\n\t\t\t\thtml += '\\n\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t<td>' + promise.title + '</td>\\n\\t\\t\\t\\t\\t\\t<td>' + authorName + '</td>\\n\\t\\t\\t\\t\\t\\t<td>' + (promise.completed ? 'Complete' : daysLeft + ' days left') + '</td>\\n\\t\\t\\t\\t\\t\\t<td>' + sinceStart + '</td>\\n\\t\\t\\t\\t\\t\\t<td>\\n\\t\\t\\t\\t\\t\\t\\t<button data-promiseid=\"' + promise.key + '\" class=\"button is-primary is-outlined\">View</button>\\n\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t';\n\t\t\t});\n\t\t\thtml += '\\n\\t\\t\\t\\t</tbody>\\n\\t\\t\\t';\n\t\t\tvar table = document.createElement('table');\n\t\t\ttable.classList.add('table');\n\t\t\ttable.classList.add('is-narrow');\n\t\t\ttable.classList.add('is-fullwidth');\n\t\t\ttable.classList.add('is-striped');\n\t\t\ttable.innerHTML = html;\n\t\t\treturn table;\n\t\t},\n\n\t\tgetPromiseBox: function getPromiseBox(model) {\n\t\t\tvar promise = model.promise;\n\t\t\tvar profiles = model.profiles;\n\t\t\tvar levelText = 'Unknown';\n\t\t\tswitch (promise.level) {\n\t\t\t\tcase 1:\n\t\t\t\t\tlevelText = 'Small';break;\n\t\t\t\tcase 2:\n\t\t\t\t\tlevelText = 'Medium';break;\n\t\t\t\tcase 3:\n\t\t\t\t\tlevelText = 'Large';break;\n\t\t\t}\n\t\t\tvar sinceStart = moment(promise.started).fromNow();\n\t\t\tvar dueDate = moment(promise.due).format('M/D');\n\t\t\tvar authorName = 'Unknown';\n\t\t\tvar authorImage = './public/img/no-user.png';\n\t\t\ttry {\n\t\t\t\tauthorName = profiles[promise.author].name;\n\t\t\t\tauthorImage = profiles[promise.author].image;\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t\t//<h1 class=\"title is-2\">${promise.title} <span class=\"tag is-warning\">${levelText}</span></h1>\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"column\">\\n\\t\\t\\t\\t<div class=\"box content\">\\n\\t\\t\\t\\t\\t<h1 class=\"title is-2\">' + promise.title + '</h1>\\n\\t\\t\\t\\t\\t<p class=\"subtitle is-neatly-spaced\">\\n\\t\\t\\t\\t\\t\\t<div class=\"comment\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"image is-16x16 is-rounded is-inline-image\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + authorImage + '\">\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"title is-6\">' + authorName + '</span>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"is-faded\"> started ' + sinceStart + '</span>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t\\t<p class=\"subtitle is-normally-spaced\">I promise to ' + promise.description + ' by ' + dueDate + '.</p>\\n\\t\\t\\t';\n\t\t\tvar linkList = Object.keys(promise.links).map(function (key) {\n\t\t\t\tvar val = promise.links[key];\n\t\t\t\tval.key = key;\n\t\t\t\treturn val;\n\t\t\t});\n\t\t\tif (linkList.length > 0) {\n\t\t\t\thtml += '<div>';\n\t\t\t\tlinkList.forEach(function (link) {\n\t\t\t\t\thtml += '<div class=\"team-link\">' + views.getLinkItem(link).innerHTML + '</div>';\n\t\t\t\t\t//html += `<li><a href=\"${link.url}\" target=\"_blank\">${link.name}</a></li>`;\n\t\t\t\t});\n\t\t\t\thtml += '</div>';\n\t\t\t}\n\t\t\thtml += '\\n\\t\\t\\t\\t\\t<div class=\"is-grouped\">\\n\\t\\t\\t\\t\\t\\t<button data-fpb=\"edit\" class=\"button is-primary is-outlined is-hidden-to-mentor\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\"fa fa-edit\"></i>\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t<span>Edit</span>\\n\\t\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t\\t<button data-fpb=\"link\" class=\"button is-primary is-outlined is-hidden-to-mentor\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\"fa fa-link\"></i>\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t<span>Add Link</span>\\n\\t\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t\\t<button data-fpb=\"back\" class=\"button is-danger is-outlined\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\"fa fa-arrow-left\"></i>\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t<span>Back to Promises</span>\\n\\t\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\"column\">\\n\\t\\t\\t\\t<div class=\"box content\">\\n\\t\\t\\t\\t\\t<h1 class=\"title is-4\">Progress</h1>\\n\\t\\t\\t\\t\\t<div id=\"comments-field\">\\n\\t\\t\\t\\t\\t';\n\n\t\t\tObject.keys(promise.comments).map(function (key) {\n\t\t\t\treturn promise.comments[key];\n\t\t\t}).sort(function (a, b) {\n\t\t\t\treturn a.timestamp - b.timestamp;\n\t\t\t}).forEach(function (comment) {\n\t\t\t\tvar commentAuthor = {\n\t\t\t\t\tname: 'Unknown',\n\t\t\t\t\timage: './public/img/no-user.png'\n\t\t\t\t};\n\t\t\t\ttry {\n\t\t\t\t\tcommentAuthor.name = profiles[comment.author].name;\n\t\t\t\t\tcommentAuthor.image = profiles[comment.author].image;\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\t\t\t\tvar sinceComment = moment(comment.timestamp).format('M/D h:mm A'); //.fromNow();\n\t\t\t\tif (comment.generated) {\n\t\t\t\t\thtml += '\\n\\t\\t\\t\\t\\t\\t<div class=\"comment\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"image is-16x16 is-rounded is-inline-image\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + commentAuthor.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"title is-6\">' + commentAuthor.name + '</span>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"is-faded\"> ' + sinceComment + ': </span>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"generated-text\">' + comment.text + '</span>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t';\n\t\t\t\t} else {\n\t\t\t\t\thtml += '\\n\\t\\t\\t\\t\\t\\t<div class=\"comment\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"image is-16x16 is-rounded is-inline-image\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + commentAuthor.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"title is-6\">' + commentAuthor.name + '</span>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"is-faded\"> ' + sinceComment + ': </span>\\n\\t\\t\\t\\t\\t\\t\\t<span>' + comment.text + '</span>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t';\n\t\t\t\t}\n\t\t\t});\n\n\t\t\thtml += '\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t<div class=\"is-hidden-to-mentor\">\\n\\t\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"tile-editable\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<textarea data-fpb=\"textarea\" class=\"textarea\" rows=\"2\" placeholder=\"Write here...\"></textarea>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"is-grouped\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<button data-fpb=\"comment\" class=\"button is-primary\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\"fa fa-comment-o\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>Comment</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t\\t\\t\\t<button data-fpb=\"complete\" class=\"button is-primary is-outlined\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\"fa ' + (promise.completed ? 'fa-times' : 'fa-check') + '\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>' + (promise.completed ? 'Mark as Incomplete' : 'Mark as Complete') + '</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t';\n\t\t\tvar box = document.createElement('div');\n\t\t\tbox.classList.add('columns');\n\t\t\tbox.innerHTML = html;\n\t\t\treturn box;\n\t\t},\n\n\t\tgetPromiseEditor: function getPromiseEditor(model) {\n\t\t\tif (model.description === '...') {\n\t\t\t\tmodel.description = false;\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<h1 data-pef=\"title\" class=\"title is-2 nlp-editable\" contenteditable=\"true\">' + (model.title ? model.title : 'Title of Promise') + '</h1>\\n\\t\\t\\t\\t<p class=\"subtitle is-neatly-spaced\">\\n\\t\\t\\t\\t\\tI promise to <span data-pef=\"description\" class=\"nlp-editable\" contenteditable=\"true\">' + (model.description ? model.description : '(do something for my team)') + '</span> by <span data-pef=\"due\" class=\"nlp-editable\" contenteditable=\"true\">' + (model.due ? moment(model.due).format('M/D/YYYY') : 'MM/DD/YYYY') + '</span>.\\n\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t<p data-pef=\"warning\" class=\"is-danger-text\"></p>\\n\\t\\t\\t\\t<button data-pef=\"submit\" class=\"button is-primary\">Save Promise</button>\\n\\t\\t\\t';\n\t\t\tif (model.deletable) {\n\t\t\t\thtml += '<button data-pef=\"remove\" class=\"button is-danger is-outlined\">Cancel</button>';\n\t\t\t} else {\n\t\t\t\thtml += '<button data-pef=\"cancel\" class=\"button is-danger is-outlined\">Cancel</button>';\n\t\t\t}\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('box');\n\t\t\tdiv.classList.add('content');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t}\n\n\t};\n\n\treturn views;\n};\n\nexports.Views = Views;\n\n},{}]},{},[3])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29uZmlnLmpzIiwic3JjL2pzL2RhdGFiYXNlLmpzIiwic3JjL2pzL3Byb21pc2VzLXBhZ2UuanMiLCJzcmMvanMvdmlld3MuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OztBQ0FBLElBQUksU0FBUztBQUNaLFNBQVEseUNBREk7QUFFWixhQUFZLCtCQUZBO0FBR1osY0FBYSxzQ0FIRDtBQUlaLFlBQVcsZUFKQztBQUtaLGdCQUFlLEVBTEg7QUFNWixvQkFBbUI7QUFOUCxDQUFiO1FBUVEsTSxHQUFBLE07Ozs7Ozs7O0FDUlIsSUFBSSxXQUFXLFNBQVgsUUFBVyxDQUFDLFFBQUQsRUFBVyxNQUFYLEVBQXNCOztBQUVwQyxLQUFJLGtCQUFrQixTQUFTLGFBQVQsQ0FBdUIsTUFBdkIsRUFBK0Isa0JBQS9CLENBQXRCO0FBQ0EsS0FBSSxLQUFLLGdCQUFnQixRQUFoQixFQUFUO0FBQ0EsS0FBSSxPQUFPLGdCQUFnQixJQUFoQixFQUFYO0FBQ0MsUUFBTyxTQUFQLEdBQW1CLElBQW5CO0FBQ0EsUUFBTyxhQUFQLEdBQXVCLElBQXZCO0FBQ0QsS0FBSSxhQUFhLFdBQVcsTUFBWCxFQUFtQixlQUFuQixDQUFqQjs7QUFFRDtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7Ozs7QUFVQyxLQUFJLFdBQVc7O0FBRWQsUUFBTSxjQUFDLFFBQUQsRUFBVyxRQUFYLEVBQXdCO0FBQzdCLE9BQUksU0FBUyxLQUFiO0FBQ0EsUUFBSyxrQkFBTCxDQUF3QixVQUFDLElBQUQsRUFBVTtBQUNqQyxRQUFJLElBQUosRUFBVTtBQUNUO0FBQ0EsZ0JBQVcsS0FBWCxDQUFpQixLQUFLLEdBQXRCLEVBQTJCO0FBQzFCLFlBQU0sS0FBSyxXQURlO0FBRTFCLGFBQU8sS0FBSyxLQUZjO0FBRzFCLGFBQU8sS0FBSyxRQUhjO0FBSTFCLFdBQUssS0FBSztBQUpnQixNQUEzQjtBQU1BO0FBQ0Es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QXlCLFVBQXpCLENBQVosR0FBa0QsWUFIM1Isa0xBQUo7QUFRQSxPQUFJLE1BQU0sU0FBVixFQUFxQjtBQUNwQjtBQUNBLElBRkQsTUFFTztBQUNOO0FBQ0E7QUFDRCxPQUFJLE1BQU0sU0FBUyxhQUFULENBQXVCLEtBQXZCLENBQVY7QUFDQyxPQUFJLFNBQUosQ0FBYyxHQUFkLENBQWtCLEtBQWxCO0FBQ0EsT0FBSSxTQUFKLENBQWMsR0FBZCxDQUFrQixTQUFsQjtBQUNBLE9BQUksU0FBSixHQUFnQixJQUFoQjtBQUNELFVBQU8sR0FBUDtBQUNBOztBQXJxQlUsRUFBWjs7QUF5cUJBLFFBQU8sS0FBUDtBQUVBLENBN3FCRDs7UUErcUJRLEssR0FBQSxLIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImxldCBjb25maWcgPSB7XG5cdGFwaUtleTogXCJBSXphU3lCV2s5RVdQa2t2cWlydUc4YVluSFYwZEJQZzF6M0V0TjRcIixcblx0YXV0aERvbWFpbjogXCJjaGFydGVyLWVjYjA3LmZpcmViYXNlYXBwLmNvbVwiLFxuXHRkYXRhYmFzZVVSTDogXCJodHRwczovL2NoYXJ0ZXItZWNiMDcuZmlyZWJhc2Vpby5jb21cIixcblx0cHJvamVjdElkOiBcImNoYXJ0ZXItZWNiMDdcIixcblx0c3RvcmFnZUJ1Y2tldDogXCJcIixcblx0bWVzc2FnaW5nU2VuZGVySWQ6IFwiMTM0MjM5MzA1MTUzXCJcbn07XG5leHBvcnQge2NvbmZpZ307IiwibGV0IERhdGFiYXNlID0gKGZpcmViYXNlLCBjb25maWcpID0+IHtcblxuXHRsZXQgQ2hhcnRlckZpcmViYXNlID0gZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcChjb25maWcsICdDaGFydGVyIERhdGFiYXNlJyk7XG5cdGxldCBkYiA9IENoYXJ0ZXJGaXJlYmFzZS5kYXRhYmFzZSgpO1xuXHRsZXQgYXV0aCA9IENoYXJ0ZXJGaXJlYmFzZS5hdXRoKCk7XG5cdFx0Y29uZmlnLmxvY2FsaG9zdCA9IHRydWU7XG5cdFx0Y29uZmlnLm5vU2NyZWVuc2hvdHMgPSB0cnVlO1xuXHRsZXQgcHJvbWV0aGV1cyA9IFByb21ldGhldXMoY29uZmlnLCBDaGFydGVyRmlyZWJhc2UpO1xuXG4vLyBTdXBlciBEaXJ0eTogVXBkYXRlIFByb21ldGhldXMgUHJvbW9zIGFuZCBGZWF0dXJlcyBIZXJlXG4vLyBkYi5yZWYoJ3Byb21ldGhldXMvZmVhdHVyZXMvY29udHJpYnV0b3InKS5zZXQoe2luZm86IHtuYW1lOiAnQ2hhcnRlciBDb250cmlidXRvcid9LCB2YWxpZGF0ZTogJ3JldHVybiB7YWxsb3dlZDogdXNlckRhdGEuY29udHJpYnV0b3IsZGF0YTogdXNlckRhdGF9J30pXG5cbi8vZGIucmVmKCdjbGFzc2VzL21hc3Rlci90ZWFtcycpLnJlbW92ZSgpO1xuLypkYi5yZWYoJ3RlYW1zJykub25jZSgndmFsdWUnLCAoc25hcCkgPT4ge1xuXHRsZXQgdGVhbU1hcCA9IHNuYXAudmFsKCkgfHwge307XG5cdGZvciAobGV0IHRpZCBpbiB0ZWFtTWFwKSB7XG5cdFx0ZGIucmVmKGBjbGFzc2VzL21hc3Rlci90ZWFtcy8ke3RpZH1gKS5zZXQoe1xuXHRcdFx0YWNjZXNzOiB0cnVlLFxuXHRcdFx0am9pbmVkOiBEYXRlLm5vdygpXG5cdFx0fSk7XG5cdH1cbn0pOyovXG5cblx0bGV0IGRhdGFiYXNlID0ge1xuXHRcdFxuXHRcdGluaXQ6IChjYWxsYmFjaywgZmFsbGJhY2spID0+IHtcblx0XHRcdGxldCBjYWxsZWQgPSBmYWxzZTtcblx0XHRcdGF1dGgub25BdXRoU3RhdGVDaGFuZ2VkKCh1c2VyKSA9PiB7XG5cdFx0XHRcdGlmICh1c2VyKSB7XG5cdFx0XHRcdFx0Ly9cblx0XHRcdFx0XHRwcm9tZXRoZXVzLmxvZ29uKHVzZXIudWlkLCB7XG5cdFx0XHRcdFx0XHRuYW1lOiB1c2VyLmRpc3BsYXlOYW1lLFxuXHRcdFx0XHRcdFx0ZW1haWw6IHVzZXIuZW1haWwsXG5cdFx0XHRcdFx0XHRpbWFnZTogdXNlci5waG90b1VSTCxcblx0XHRcdFx0XHRcdHVpZDogdXNlci51aWRcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvL1xuXHRcdFx0XHRcdGlmICghY2FsbGVkKSB7XG5cdFx0XHRcdFx0XHRjYWxsZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2sodXNlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmICghY2FsbGVkKSB7XG5cdFx0XHRcdFx0XHRjYWxsZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0ZmFsbGJhY2soKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRsb2dpbjogKGNhbGxiYWNrLCBtZXRob2QpID0+IHtcblx0XHRcdC8vYXV0aC5zaWduT3V0KCkudGhlbigoZG9uZSkgPT4ge1xuXHRcdFx0XHRsZXQgcHJvdmlkZXIgPSBuZXcgZmlyZWJhc2UuYXV0aC5Hb29nbGVBdXRoUHJvdmlkZXIoKTtcblx0XHRcdFx0aWYgKG1ldGhvZCA9PT0gJ2ZhY2Vib29rJykge1xuXHRcdFx0XHRcdHByb3ZpZGVyID0gbmV3IGZpcmViYXNlLmF1dGguRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRhdXRoLnNpZ25JbldpdGhQb3B1cChwcm92aWRlcikudGhlbigocmVzdWx0KSA9PiB7XG5cdFx0XHRcdFx0Ly9jb25zb2xlLmxvZyhyZXN1bHQpO1xuXHRcdFx0XHRcdGxldCB0b2tlbiA9IHJlc3VsdC5jcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xuXHRcdFx0XHRcdGxldCB1c2VyID0gcmVzdWx0LnVzZXI7XG5cdFx0XHRcdFx0bGV0IHByb3ZpZGVySWQgPSAnVW5rbm93biBQcm92aWRlcic7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdHByb3ZpZGVySWQgPSB1c2VyLnByb3ZpZGVyRGF0YVswXS5wcm92aWRlcklkO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vXG5cdFx0XHRcdFx0cHJvbWV0aGV1cy5sb2dvbih1c2VyLnVpZCwge1xuXHRcdFx0XHRcdFx0bmFtZTogdXNlci5kaXNwbGF5TmFtZSxcblx0XHRcdFx0XHRcdGVtYWlsOiB1c2VyLmVtYWlsLFxuXHRcdFx0XHRcdFx0aW1hZ2U6IHVzZXIucGhvdG9VUkwsXG5cdFx0XHRcdFx0XHR1aWQ6IHVzZXIudWlkLFxuXHRcdFx0XHRcdFx0cHJvdmlkZXI6IHByb3ZpZGVySWRcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvL1xuXHRcdFx0XHRcdGNhbGxiYWNrKHVzZXIpO1xuXHRcdFx0XHR9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0XHRcdC8qbGV0IGVycm9yQ29kZSA9IGVycm9yLmNvZGU7XG5cdFx0XHRcdFx0bGV0IGVycm9yTWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG5cdFx0XHRcdFx0bGV0IGVtYWlsID0gZXJyb3IuZW1haWw7XG5cdFx0XHRcdFx0bGV0IGNyZWRlbnRpYWwgPSBlcnJvci5jcmVkZW50aWFsOyovXG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdFx0XHRcdH0pO1xuXHRcdFx0Lyp9KS5jYXRjaCgoZXJyKSA9PiB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyKTtcblx0XHRcdH0pOyovXG5cdFx0fSxcblxuXHRcdGdldFByb21ldGhldXM6ICgpID0+IHtcblx0XHRcdHJldHVybiBwcm9tZXRoZXVzO1xuXHRcdH0sXG5cblx0XHRnZXRDdXJyZW50VXNlcjogKCkgPT4ge1xuXHRcdFx0cmV0dXJuIGF1dGguY3VycmVudFVzZXIgfHwge307XG5cdFx0fSxcblxuXHRcdHNhdmVGZWVkYmFjazogKHRpZCwgdWlkLCBmZWVkYmFjaykgPT4ge1xuXHRcdFx0cmV0dXJuIGRiLnJlZihgZmVlZGJhY2tgKS5wdXNoKHtcblx0XHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRcdHVpZDogdWlkLFxuXHRcdFx0XHRmZWVkYmFjazogZmVlZGJhY2ssXG5cdFx0XHRcdHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGdldFVzZXI6ICh1aWQpID0+IHtcblx0XHRcdGlmICghdWlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB1c2VyIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0ZGIucmVmKGBwcm9tZXRoZXVzL3VzZXJzLyR7dWlkfS9wcm9maWxlYCkub25jZSgndmFsdWUnLCAoc25hcCkgPT4ge1xuXHRcdFx0XHRcdGxldCB1c2VyID0gc25hcC52YWwoKTtcblx0XHRcdFx0XHRyZXNvbHZlKHVzZXIpO1xuXHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGdldFRlYW06ICh0aWQpID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0ZGIucmVmKGB0ZWFtcy8ke3RpZH1gKS5vbmNlKCd2YWx1ZScsIChzbmFwKSA9PiB7XG5cdFx0XHRcdFx0bGV0IHRlYW0gPSBzbmFwLnZhbCgpIHx8IHt9O1xuXHRcdFx0XHRcdGlmIChPYmplY3Qua2V5cyh0ZWFtKS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHR0ZWFtLnRpZCA9IHRpZDtcblx0XHRcdFx0XHRcdHJlc29sdmUodGVhbSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlc29sdmUoe30pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRnZXRUZWFtRWRpdHM6ICh0aWQpID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0ZGIucmVmKGBlZGl0cy8ke3RpZH1gKS5vbmNlKCd2YWx1ZScsIChzbmFwKSA9PiB7XG5cdFx0XHRcdFx0bGV0IGVkaXRzID0gc25hcC52YWwoKSB8fCB7fTtcblx0XHRcdFx0XHRyZXNvbHZlKGVkaXRzKTtcblx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRvblRlYW1DaGFuZ2U6ICh0aWQsIGNhbGxiYWNrLCBmYWxsYmFjaykgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRsZXQgbWVtYmVycyA9IHt9O1xuXHRcdFx0ZGIucmVmKGB0ZWFtcy8ke3RpZH1gKS5vbigndmFsdWUnLCAoc25hcCkgPT4ge1xuXHRcdFx0XHRsZXQgcHJvbWlzZXMgPSBbXTtcblx0XHRcdFx0bGV0IHRlYW0gPSBzbmFwLnZhbCgpIHx8IHt9O1xuXHRcdFx0XHRsZXQgbWVtYmVyTWFwID0gdGVhbS5tZW1iZXJzIHx8IHt9O1xuXHRcdFx0XHRmb3IgKGxldCB1aWQgaW4gbWVtYmVyTWFwKSB7XG5cdFx0XHRcdFx0aWYgKCEodWlkIGluIG1lbWJlcnMpKSB7XG5cdFx0XHRcdFx0XHRpZiAobWVtYmVyTWFwW3VpZF0uc3RhdHVzID09PSAndGVtcGxhdGUnKSB7XG5cdFx0XHRcdFx0XHRcdG1lbWJlcnNbdWlkXSA9IHtcblx0XHRcdFx0XHRcdFx0XHRuYW1lOiAnVW5rbm93bicsXG5cdFx0XHRcdFx0XHRcdFx0aW1hZ2U6ICcuL3B1YmxpYy9pbWcvbm8tdXNlci5wbmcnLFxuXHRcdFx0XHRcdFx0XHRcdHVpZDogdWlkLFxuXHRcdFx0XHRcdFx0XHRcdGVtYWlsOiAndGVhbUBvbW5pcG9pbnRtZW50LmNvbSdcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0bGV0IHAgPSBkYXRhYmFzZS5nZXRVc2VyKHVpZCk7XG5cdFx0XHRcdFx0XHRcdHAudWlkID0gdWlkO1xuXHRcdFx0XHRcdFx0XHRwcm9taXNlcy5wdXNoKHApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAocHJvbWlzZXMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCh1c2VycykgPT4ge1xuXHRcdFx0XHRcdFx0dXNlcnMuZm9yRWFjaCgobWVtYmVyLCBpZHgpID0+IHtcblx0XHRcdFx0XHRcdFx0bGV0IHVpZCA9IHByb21pc2VzW2lkeF0udWlkO1xuXHRcdFx0XHRcdFx0XHRtZW1iZXJzW3VpZF0gPSBtZW1iZXI7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKHRlYW0sIG1lbWJlcnMpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNhbGxiYWNrKHRlYW0sIG1lbWJlcnMpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0dXBkYXRlVGVhbU5hbWU6ICh0aWQsIHVpZCwgbmFtZSkgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRkYi5yZWYoYGVkaXRzLyR7dGlkfWApLnB1c2goe1xuXHRcdFx0XHRmaWVsZDogJ25hbWUnLFxuXHRcdFx0XHR1aWQ6IHVpZCxcblx0XHRcdFx0dmFsdWU6IG5hbWUsXG5cdFx0XHRcdHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gZGIucmVmKGB0ZWFtcy8ke3RpZH0vbmFtZWApLnNldChuYW1lKTtcblx0XHR9LFxuXG5cdFx0dXBkYXRlUXVlc3Rpb246ICh0aWQsIHVpZCwgcXVlc3Rpb24pID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0ZGIucmVmKGBlZGl0cy8ke3RpZH1gKS5wdXNoKHtcblx0XHRcdFx0ZmllbGQ6ICdxdWVzdGlvbicsXG5cdFx0XHRcdHVpZDogdWlkLFxuXHRcdFx0XHR2YWx1ZTogcXVlc3Rpb24sXG5cdFx0XHRcdHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gZGIucmVmKGB0ZWFtcy8ke3RpZH0vcXVlc3Rpb25gKS5zZXQocXVlc3Rpb24pO1xuXHRcdH0sXG5cblx0XHR1cGRhdGVFeHBlY3RhdGlvbnM6ICh0aWQsIHVpZCwgbGlzdCkgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRkYi5yZWYoYGVkaXRzLyR7dGlkfWApLnB1c2goe1xuXHRcdFx0XHRmaWVsZDogJ2V4cGVjdGF0aW9ucycsXG5cdFx0XHRcdHVpZDogdWlkLFxuXHRcdFx0XHR2YWx1ZTogbGlzdCxcblx0XHRcdFx0dGltZXN0YW1wOiBEYXRlLm5vdygpXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBkYi5yZWYoYHRlYW1zLyR7dGlkfS9leHBlY3RhdGlvbnNgKS5zZXQobGlzdCk7XG5cdFx0fSxcblxuXHRcdHN1Ym1pdFVwZGF0ZTogKHRpZCwgdWlkLCB1cGRhdGUpID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCF1aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHVzZXIgaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHQvL1xuXHRcdFx0cHJvbWV0aGV1cy5zYXZlKHtcblx0XHRcdFx0dHlwZTogJ1NVQk1JVF9VUERBVEUnLFxuXHRcdFx0XHR0aWQ6IHRpZCxcblx0XHRcdFx0dXBkYXRlOiB1cGRhdGVcblx0XHRcdH0pO1xuXHRcdFx0Ly9cblx0XHRcdHJldHVybiBkYi5yZWYoYHRlYW1zLyR7dGlkfS91cGRhdGVzLyR7dWlkfWApLnB1c2goe1xuXHRcdFx0XHR1cGRhdGU6IHVwZGF0ZSxcblx0XHRcdFx0dGltZXN0YW1wOiBEYXRlLm5vdygpXG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0YWRkTGluazogKHRpZCwgdWlkLCBkYXRhKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghdWlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB1c2VyIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0Ly9cblx0XHRcdHByb21ldGhldXMuc2F2ZSh7XG5cdFx0XHRcdHR5cGU6ICdBRERfTElOSycsXG5cdFx0XHRcdHRpZDogdGlkLFxuXHRcdFx0XHRuYW1lOiBkYXRhLm5hbWUsXG5cdFx0XHRcdHVybDogZGF0YS51cmxcblx0XHRcdH0pO1xuXHRcdFx0Ly9cblx0XHRcdGRiLnJlZihgZWRpdHMvJHt0aWR9YCkucHVzaCh7XG5cdFx0XHRcdGZpZWxkOiAnbGluaycsXG5cdFx0XHRcdHVpZDogdWlkLFxuXHRcdFx0XHR2YWx1ZTogZGF0YSxcblx0XHRcdFx0dGltZXN0YW1wOiBEYXRlLm5vdygpXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBkYi5yZWYoYHRlYW1zLyR7dGlkfS9saW5rc2ApLnB1c2goe1xuXHRcdFx0XHRuYW1lOiBkYXRhLm5hbWUsXG5cdFx0XHRcdHVybDogZGF0YS51cmwsXG5cdFx0XHRcdHVpZDogdWlkLFxuXHRcdFx0XHRhZGRlZDogRGF0ZS5ub3coKVxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdHVwZGF0ZUxpbms6ICh0aWQsIHVpZCwga2V5LCBkYXRhKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghdWlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB1c2VyIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFrZXkpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIGxpbmsgaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHQvL1xuXHRcdFx0cHJvbWV0aGV1cy5zYXZlKHtcblx0XHRcdFx0dHlwZTogJ1VQREFURV9MSU5LJyxcblx0XHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRcdG5hbWU6IGRhdGEubmFtZSxcblx0XHRcdFx0dXJsOiBkYXRhLnVybCxcblx0XHRcdFx0a2V5OiBrZXlcblx0XHRcdH0pO1xuXHRcdFx0Ly9cblx0XHRcdGRhdGEua2V5ID0ga2V5O1xuXHRcdFx0ZGIucmVmKGBlZGl0cy8ke3RpZH1gKS5wdXNoKHtcblx0XHRcdFx0ZmllbGQ6ICdsaW5rJyxcblx0XHRcdFx0dWlkOiB1aWQsXG5cdFx0XHRcdHZhbHVlOiBkYXRhLFxuXHRcdFx0XHR0aW1lc3RhbXA6IERhdGUubm93KClcblx0XHRcdH0pO1xuXHRcdFx0bGV0IHAxID0gZGIucmVmKGB0ZWFtcy8ke3RpZH0vbGlua3MvJHtrZXl9L25hbWVgKS5zZXQoZGF0YS5uYW1lKTtcblx0XHRcdGxldCBwMiA9IGRiLnJlZihgdGVhbXMvJHt0aWR9L2xpbmtzLyR7a2V5fS91cmxgKS5zZXQoZGF0YS51cmwpO1xuXHRcdFx0cmV0dXJuIFByb21pc2UuYWxsKFtwMSwgcDJdKTtcblx0XHR9LFxuXG5cdFx0cmVtb3ZlTGluazogKHRpZCwgdWlkLCBrZXkpID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCF1aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHVzZXIgaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWtleSkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gbGluayBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdC8vXG5cdFx0XHRwcm9tZXRoZXVzLnNhdmUoe1xuXHRcdFx0XHR0eXBlOiAnUkVNT1ZFX0xJTksnLFxuXHRcdFx0XHR0aWQ6IHRpZCxcblx0XHRcdFx0a2V5OiBrZXlcblx0XHRcdH0pO1xuXHRcdFx0Ly9cblx0XHRcdGRiLnJlZihgZWRpdHMvJHt0aWR9YCkucHVzaCh7XG5cdFx0XHRcdGZpZWxkOiAnbGluaycsXG5cdFx0XHRcdHVpZDogdWlkLFxuXHRcdFx0XHR2YWx1ZToge1xuXHRcdFx0XHRcdHJlbW92ZWQ6IHRydWUsXG5cdFx0XHRcdFx0a2V5OiBrZXlcblx0XHRcdFx0fSxcblx0XHRcdFx0dGltZXN0YW1wOiBEYXRlLm5vdygpXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBkYi5yZWYoYHRlYW1zLyR7dGlkfS9saW5rcy8ke2tleX1gKS5yZW1vdmUoKTtcblx0XHR9LFxuXG5cdFx0dXBkYXRlUm9sZTogKHRpZCwgYXV0aG9yLCBkYXRhKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghYXV0aG9yKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyBhdXRob3JpbmcgdXNlciBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghZGF0YS51aWQpIHtcblx0XHRcdFx0ZGF0YS51aWQgPSBhdXRob3I7IC8vIElmIHNvbWVvbmUgaXMgZWRpdGluZyB0aGVpciBvd24gcm9sZVxuXHRcdFx0fVxuXHRcdFx0Ly9cblx0XHRcdHByb21ldGhldXMuc2F2ZSh7XG5cdFx0XHRcdHR5cGU6ICdVUERBVEVfUk9MRScsXG5cdFx0XHRcdHRpZDogdGlkLFxuXHRcdFx0XHR1aWQ6IGRhdGEudWlkLFxuXHRcdFx0XHRyb2xlOiBkYXRhLnJvbGUsXG5cdFx0XHRcdHJlc3BvbnNpYmlsaXR5OiBkYXRhLnJlc3BvbnNpYmlsaXR5XG5cdFx0XHR9KTtcblx0XHRcdC8vXG5cdFx0XHRkYi5yZWYoYGVkaXRzLyR7dGlkfWApLnB1c2goe1xuXHRcdFx0XHRmaWVsZDogJ3JvbGUnLFxuXHRcdFx0XHR1aWQ6IGF1dGhvcixcblx0XHRcdFx0dmFsdWU6IGRhdGEsXG5cdFx0XHRcdHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuXHRcdFx0fSk7XG5cdFx0XHRsZXQgcDEgPSBkYi5yZWYoYHRlYW1zLyR7dGlkfS9tZW1iZXJzLyR7ZGF0YS51aWR9L3JvbGVgKS5zZXQoZGF0YS5yb2xlKTtcblx0XHRcdGxldCBwMiA9IGRiLnJlZihgdGVhbXMvJHt0aWR9L21lbWJlcnMvJHtkYXRhLnVpZH0vcmVzcG9uc2liaWxpdHlgKS5zZXQoZGF0YS5yZXNwb25zaWJpbGl0eSk7XG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5hbGwoW3AxLCBwMl0pO1xuXHRcdH0sXG5cblx0XHRhZGRUZW1wbGF0ZVJvbGU6ICh0aWQsIGF1dGhvcikgPT4ge1xuXHRcdFx0Ly9cblx0XHRcdHByb21ldGhldXMuc2F2ZSh7XG5cdFx0XHRcdHR5cGU6ICdBRERfVEVNUExBVEVfUk9MRScsXG5cdFx0XHRcdHRpZDogdGlkXG5cdFx0XHR9KTtcblx0XHRcdC8vXG5cdFx0XHRyZXR1cm4gZGIucmVmKGB0ZWFtcy8ke3RpZH0vbWVtYmVyc2ApLnB1c2goe1xuXHRcdFx0XHRzdGF0dXM6ICd0ZW1wbGF0ZScsXG5cdFx0XHRcdHJvbGU6ICdUZWFtIE1lbWJlcicsXG5cdFx0XHRcdGpvaW5lZDogRGF0ZS5ub3coKSxcblx0XHRcdFx0bWVtYmVyOiB0cnVlLFxuXHRcdFx0XHRpY29uOiAndXNlcidcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHR1cGRhdGVSb2xlSWNvbjogKHRpZCwgYXV0aG9yLCBkYXRhKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghYXV0aG9yKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyBhdXRob3JpbmcgdXNlciBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdC8vXG5cdFx0XHRwcm9tZXRoZXVzLnNhdmUoe1xuXHRcdFx0XHR0eXBlOiAnVVBEQVRFX1JPTEVfSUNPTicsXG5cdFx0XHRcdHRpZDogdGlkLFxuXHRcdFx0XHR1aWQ6IGRhdGEudWlkLFxuXHRcdFx0XHRpY29uOiBkYXRhLmljb25cblx0XHRcdH0pO1xuXHRcdFx0Ly9cblx0XHRcdGlmICghZGF0YS51aWQpIHtcblx0XHRcdFx0ZGF0YS51aWQgPSBhdXRob3I7IC8vIElmIHNvbWVvbmUgaXMgZWRpdGluZyB0aGVpciBvd24gcm9sZVxuXHRcdFx0fVxuXHRcdFx0ZGIucmVmKGBlZGl0cy8ke3RpZH1gKS5wdXNoKHtcblx0XHRcdFx0ZmllbGQ6ICdyb2xlJyxcblx0XHRcdFx0dWlkOiBhdXRob3IsXG5cdFx0XHRcdHZhbHVlOiBkYXRhLFxuXHRcdFx0XHR0aW1lc3RhbXA6IERhdGUubm93KClcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGRiLnJlZihgdGVhbXMvJHt0aWR9L21lbWJlcnMvJHtkYXRhLnVpZH0vaWNvbmApLnNldChkYXRhLmljb24pO1xuXHRcdH0sXG5cblx0XHRqb2luVGVhbTogKHRpZCwgdWlkLCBqb2luQ29kZSkgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXVpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdXNlciBpZCBnaXZlbicpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0ZGF0YWJhc2UuZ2V0VGVhbSh0aWQpLnRoZW4oKHRlYW0pID0+IHtcblx0XHRcdFx0XHRpZiAoam9pbkNvZGUgPT09IHRlYW0uam9pbkNvZGUgfHwgIXRlYW0uam9pbkNvZGUpIHtcblx0XHRcdFx0XHRcdGRhdGFiYXNlLmFkZE1lbWJlcih0aWQsIHVpZCkudGhlbigoZG9uZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRyZXNvbHZlKHtcblx0XHRcdFx0XHRcdFx0XHRzdWNjZXNzOiB0cnVlXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmVzb2x2ZSh7XG5cdFx0XHRcdFx0XHRcdHN1Y2Nlc3M6IGZhbHNlXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0YWRkTWVtYmVyOiAodGlkLCB1aWQpID0+IHtcblx0XHRcdC8vXG5cdFx0XHRwcm9tZXRoZXVzLnNhdmUoe1xuXHRcdFx0XHR0eXBlOiAnQUREX01FTUJFUicsXG5cdFx0XHRcdHRpZDogdGlkLFxuXHRcdFx0XHR1aWQ6IHVpZFxuXHRcdFx0fSk7XG5cdFx0XHQvL1xuXHRcdFx0cmV0dXJuIGRiLnJlZihgdGVhbXMvJHt0aWR9L21lbWJlcnMvJHt1aWR9YCkuc2V0KHtcblx0XHRcdFx0c3RhdHVzOiAnbWVtYmVyJyxcblx0XHRcdFx0cm9sZTogJ1RlYW0gTWVtYmVyJyxcblx0XHRcdFx0am9pbmVkOiBEYXRlLm5vdygpLFxuXHRcdFx0XHRtZW1iZXI6IHRydWVcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRyZW1vdmVNZW1iZXI6ICh0aWQsIGF1dGhvciwgdWlkKSA9PiB7XG5cdFx0XHQvL1xuXHRcdFx0cHJvbWV0aGV1cy5zYXZlKHtcblx0XHRcdFx0dHlwZTogJ1JFTU9WRV9NRU1CRVInLFxuXHRcdFx0XHR0aWQ6IHRpZCxcblx0XHRcdFx0dWlkOiB1aWRcblx0XHRcdH0pO1xuXHRcdFx0Ly9cblx0XHRcdHJldHVybiBkYi5yZWYoYHRlYW1zLyR7dGlkfS9tZW1iZXJzLyR7dWlkfWApLnJlbW92ZSgpO1xuXHRcdH0sXG5cblx0XHRnZXRBbGxUZWFtczogKHVpZCkgPT4ge1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0bGV0IHJlZiA9IGRiLnJlZihgdGVhbXNgKTtcblx0XHRcdFx0bGV0IHF1ZXJ5ID0gcmVmLm9yZGVyQnlDaGlsZChgbWVtYmVycy8ke3VpZH0vbWVtYmVyYCkuc3RhcnRBdCh0cnVlKS5lbmRBdCh0cnVlKTtcblx0XHRcdFx0cXVlcnkub25jZSgndmFsdWUnLCAoc25hcCkgPT4ge1xuXHRcdFx0XHRcdGxldCBub2RlcyA9IHNuYXAudmFsKCkgfHwge307XG5cdFx0XHRcdFx0cmVzb2x2ZShub2Rlcyk7XG5cdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0Y3JlYXRlTmV3VGVhbTogKHVpZCwgam9pbkNvZGUsIGRhdGEpID0+IHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGxldCB0ZWFtTmFtZSA9IGRhdGEubmFtZTtcblx0XHRcdFx0ZGIucmVmKCd0ZWFtcycpLnB1c2goe1xuXHRcdFx0XHRcdG5hbWU6IHRlYW1OYW1lIHx8ICdOZXcgVGVhbSBDaGFydGVyJyxcblx0XHRcdFx0XHRqb2luQ29kZTogam9pbkNvZGUsXG5cdFx0XHRcdFx0c3RhdHVzOiBkYXRhLnN0YXR1cyB8fCAncmVndWxhcidcblx0XHRcdFx0fSkudGhlbigocmVzKSA9PiB7XG5cdFx0XHRcdFx0bGV0IHBhdGhMaXN0ID0gcmVzLnBhdGguY3Q7XG5cdFx0XHRcdFx0bGV0IHRpZCA9IHBhdGhMaXN0W3BhdGhMaXN0Lmxlbmd0aCAtIDFdO1xuXHRcdFx0XHRcdC8vXG5cdFx0XHRcdFx0cHJvbWV0aGV1cy5zYXZlKHtcblx0XHRcdFx0XHRcdHR5cGU6ICdDUkVBVEVfVEVBTScsXG5cdFx0XHRcdFx0XHR0aWQ6IHRpZCxcblx0XHRcdFx0XHRcdG5hbWU6IHRlYW1OYW1lLFxuXHRcdFx0XHRcdFx0ZGF0YTogZGF0YVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdC8vXG5cdFx0XHRcdFx0ZGF0YWJhc2UuYWRkTWVtYmVyKHRpZCwgdWlkKS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRcdFx0XHRyZXNvbHZlKHtcblx0XHRcdFx0XHRcdFx0dGlkOiB0aWRcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0Z2V0SW5zdHJ1Y3RvckNsYXNzZXM6ICh1aWQpID0+IHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGxldCByZWYgPSBkYi5yZWYoYGNsYXNzZXNgKTtcblx0XHRcdFx0bGV0IHF1ZXJ5ID0gcmVmLm9yZGVyQnlDaGlsZChgbWVtYmVycy8ke3VpZH0vYWNjZXNzYCkuc3RhcnRBdCh0cnVlKS5lbmRBdCh0cnVlKTtcblx0XHRcdFx0cXVlcnkub25jZSgndmFsdWUnLCAoc25hcCkgPT4ge1xuXHRcdFx0XHRcdGxldCBub2RlcyA9IHNuYXAudmFsKCkgfHwge307XG5cdFx0XHRcdFx0bGV0IGxpc3QgPSBPYmplY3Qua2V5cyhub2RlcykubWFwKChjaWQpID0+IHtcblx0XHRcdFx0XHRcdGxldCBjbGFzc0RhdGEgPSBub2Rlc1tjaWRdO1xuXHRcdFx0XHRcdFx0Y2xhc3NEYXRhLmNpZCA9IGNpZDtcblx0XHRcdFx0XHRcdHJldHVybiBjbGFzc0RhdGE7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0aWYgKGxpc3QubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0bGV0IHByb21pc2VzID0gW107XG5cdFx0XHRcdFx0XHRsaXN0LmZvckVhY2goKGNsYXNzRGF0YSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRsZXQgY2lkID0gY2xhc3NEYXRhLmNpZDtcblx0XHRcdFx0XHRcdFx0Zm9yIChsZXQgdGlkIGluIGNsYXNzRGF0YS50ZWFtcykge1xuXHRcdFx0XHRcdFx0XHRcdGxldCBwID0gbmV3IFByb21pc2UoKHJlc29sdmVUZWFtLCByZWplY3RUZWFtKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRkYXRhYmFzZS5nZXRUZWFtKHRpZCkudGhlbihyZXNvbHZlVGVhbSkuY2F0Y2gocmVqZWN0VGVhbSk7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0cC5jaWQgPSBjaWQ7XG5cdFx0XHRcdFx0XHRcdFx0cHJvbWlzZXMucHVzaChwKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigodGVhbUxpc3QpID0+IHtcblx0XHRcdFx0XHRcdFx0dGVhbUxpc3QuZm9yRWFjaCgodGVhbSwgdGlkeCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGxldCBtZXRhID0gcHJvbWlzZXNbdGlkeF07XG5cdFx0XHRcdFx0XHRcdFx0aWYgKG5vZGVzW21ldGEuY2lkXSl7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAobm9kZXNbbWV0YS5jaWRdLnRlYW1zW3RlYW0udGlkXSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRub2Rlc1ttZXRhLmNpZF0udGVhbXNbdGVhbS50aWRdID0gdGVhbTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRyZXNvbHZlKG5vZGVzKVxuXHRcdFx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmVzb2x2ZSh7fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGdldENsYXNzVGVhbXM6IChjbGFzc0NvZGUpID0+IHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGxldCByZWYgPSBkYi5yZWYoYGNsYXNzZXMvJHtjbGFzc0NvZGV9YCk7XG5cdFx0XHRcdHJlZi5vbmNlKCd2YWx1ZScsIChzbmFwKSA9PiB7XG5cdFx0XHRcdFx0bGV0IHZhbCA9IHNuYXAudmFsKCkgfHwge307XG5cdFx0XHRcdFx0bGV0IG5vZGVzID0ge307XG5cdFx0XHRcdFx0bm9kZXNbY2xhc3NDb2RlXSA9IHZhbDtcblx0XHRcdFx0XHRsZXQgbGlzdCA9IE9iamVjdC5rZXlzKG5vZGVzKS5tYXAoKGNpZCkgPT4ge1xuXHRcdFx0XHRcdFx0bGV0IGNsYXNzRGF0YSA9IG5vZGVzW2NpZF07XG5cdFx0XHRcdFx0XHRjbGFzc0RhdGEuY2lkID0gY2lkO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGNsYXNzRGF0YTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRpZiAobGlzdC5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRsZXQgcHJvbWlzZXMgPSBbXTtcblx0XHRcdFx0XHRcdGxpc3QuZm9yRWFjaCgoY2xhc3NEYXRhKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGxldCBjaWQgPSBjbGFzc0RhdGEuY2lkO1xuXHRcdFx0XHRcdFx0XHRmb3IgKGxldCB0aWQgaW4gY2xhc3NEYXRhLnRlYW1zKSB7XG5cdFx0XHRcdFx0XHRcdFx0bGV0IHAgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZVRlYW0sIHJlamVjdFRlYW0pID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdGRhdGFiYXNlLmdldFRlYW0odGlkKS50aGVuKHJlc29sdmVUZWFtKS5jYXRjaChyZWplY3RUZWFtKTtcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHRwLmNpZCA9IGNpZDtcblx0XHRcdFx0XHRcdFx0XHRwcm9taXNlcy5wdXNoKHApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCh0ZWFtTGlzdCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0ZWFtTGlzdC5mb3JFYWNoKCh0ZWFtLCB0aWR4KSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0bGV0IG1ldGEgPSBwcm9taXNlc1t0aWR4XTtcblx0XHRcdFx0XHRcdFx0XHRpZiAobm9kZXNbbWV0YS5jaWRdKXtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChub2Rlc1ttZXRhLmNpZF0udGVhbXNbdGVhbS50aWRdKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGVzW21ldGEuY2lkXS50ZWFtc1t0ZWFtLnRpZF0gPSB0ZWFtO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdHJlc29sdmUobm9kZXMpXG5cdFx0XHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXNvbHZlKHt9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0YWRkVGVhbVRvQ2xhc3M6ICh0aWQsIHVpZCwgY29kZSkgPT4ge1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0ZGIucmVmKGBjbGFzc2VzLyR7Y29kZX1gKS5vbmNlKCd2YWx1ZScsIChzbmFwKSA9PiB7XG5cdFx0XHRcdFx0bGV0IGNsYXNzRGF0YSA9IHNuYXAudmFsKCk7XG5cdFx0XHRcdFx0aWYgKGNsYXNzRGF0YSkge1xuXHRcdFx0XHRcdFx0Ly9cblx0XHRcdFx0XHRcdHByb21ldGhldXMuc2F2ZSh7XG5cdFx0XHRcdFx0XHRcdHR5cGU6ICdBRERfVEVBTV9UT19DTEFTUycsXG5cdFx0XHRcdFx0XHRcdHRpZDogdGlkLFxuXHRcdFx0XHRcdFx0XHRjbGFzc0NvZGU6IGNvZGVcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0Ly9cblx0XHRcdFx0XHRcdGRiLnJlZihgY2xhc3Nlcy8ke2NvZGV9L3RlYW1zLyR7dGlkfWApLnNldCh7XG5cdFx0XHRcdFx0XHRcdGFjY2VzczogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0am9pbmVkOiBEYXRlLm5vdygpXG5cdFx0XHRcdFx0XHR9KS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHJlc29sdmUoY2xhc3NEYXRhKTtcblx0XHRcdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlamVjdChgQ291bGQgbm90IGZpbmQgYSBjbGFzcyB3aXRoIGNvZGU6ICR7Y29kZX0uYCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRhZGRJbnN0cnVjdG9yVG9DbGFzczogKHVpZCwgY29kZSkgPT4ge1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0ZGIucmVmKGBjbGFzc2VzLyR7Y29kZX1gKS5vbmNlKCd2YWx1ZScsIChzbmFwKSA9PiB7XG5cdFx0XHRcdFx0bGV0IGNsYXNzRGF0YSA9IHNuYXAudmFsKCk7XG5cdFx0XHRcdFx0aWYgKGNsYXNzRGF0YSkge1xuXHRcdFx0XHRcdFx0bGV0IG1lbWJlck1hcCA9IGNsYXNzRGF0YS5tZW1iZXJzIHx8IHt9O1xuXHRcdFx0XHRcdFx0aWYgKHVpZCBpbiBtZW1iZXJNYXApIHtcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZSh7XG5cdFx0XHRcdFx0XHRcdFx0aXNBbHJlYWR5SW5zdHJ1Y3RvcjogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRjbGFzc0RhdGE6IGNsYXNzRGF0YVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vXG5cdFx0XHRcdFx0XHRcdHByb21ldGhldXMuc2F2ZSh7XG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogJ0FERF9JTlNUUlVDVE9SX1RPX0NMQVNTJyxcblx0XHRcdFx0XHRcdFx0XHRjbGFzc0NvZGU6IGNvZGVcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdC8vXG5cdFx0XHRcdFx0XHRcdGRiLnJlZihgY2xhc3Nlcy8ke2NvZGV9L21lbWJlcnMvJHt1aWR9YCkuc2V0KHtcblx0XHRcdFx0XHRcdFx0XHRhY2Nlc3M6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0dHlwZTogJ2luc3RydWN0b3InLFxuXHRcdFx0XHRcdFx0XHRcdGpvaW5lZDogRGF0ZS5ub3coKVxuXHRcdFx0XHRcdFx0XHR9KS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZSh7XG5cdFx0XHRcdFx0XHRcdFx0XHRpc0FscmVhZHlJbnN0cnVjdG9yOiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0XHRcdGNsYXNzRGF0YTogY2xhc3NEYXRhXG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlamVjdChgQ291bGQgbm90IGZpbmQgYSBjbGFzcyB3aXRoIGNvZGU6ICR7Y29kZX0uYCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRnZXRJbnN0cnVjdG9yc0J5Q2xhc3M6IChjbGFzc0NvZGUpID0+IHtcblxuXHRcdH0sXG5cblx0XHRnZXRUZWFtUHJvbWlzZXM6ICh0aWQpID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0ZGIucmVmKGBwcm9taXNlcy8ke3RpZH1gKS5vbmNlKCd2YWx1ZScsIChzbmFwKSA9PiB7XG5cdFx0XHRcdFx0bGV0IHZhbCA9IHNuYXAudmFsKCk7XG5cdFx0XHRcdFx0cmVzb2x2ZSh2YWwpO1xuXHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdG9uVGVhbVByb21pc2VzQ2hhbmdlOiAodGlkLCBjYWxsYmFjaywgZmFsbGJhY2spID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0ZGIucmVmKGBwcm9taXNlcy8ke3RpZH1gKS5vbigndmFsdWUnLCAoc25hcCkgPT4ge1xuXHRcdFx0XHRcdGxldCB2YWwgPSBzbmFwLnZhbCgpO1xuXHRcdFx0XHRcdGNhbGxiYWNrKHZhbCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyKTtcblx0XHRcdFx0aWYgKGZhbGxiYWNrKSB7XG5cdFx0XHRcdFx0ZmFsbGJhY2soZXJyKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHRvblByb21pc2VDaGFuZ2U6ICh0aWQsIHByb21pc2VpZCwgY2FsbGJhY2ssIGZhbGxiYWNrKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghcHJvbWlzZWlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyBwcm9taXNlIGlkIGdpdmVuJyk7XG5cdFx0XHR9XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRkYi5yZWYoYHByb21pc2VzLyR7dGlkfWApLm9uKCd2YWx1ZScsIChzbmFwKSA9PiB7XG5cdFx0XHRcdFx0bGV0IHZhbCA9IHNuYXAudmFsKCk7XG5cdFx0XHRcdFx0Y2FsbGJhY2sodmFsKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0aWYgKGZhbGxiYWNrKSB7XG5cdFx0XHRcdFx0ZmFsbGJhY2soZXJyKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVycik7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fSxcblxuXHRcdGNvbW1lbnRPblByb21pc2U6IChwYXJhbXMpID0+IHtcblx0XHRcdGlmICghcGFyYW1zLnRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghcGFyYW1zLnByb21pc2VpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gcHJvbWlzZSBpZCBnaXZlbicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFwYXJhbXMuYXV0aG9yKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyBhdXRob3IgaWQgZ2l2ZW4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghcGFyYW1zLnRleHQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRleHQgZ2l2ZW4nKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGRiLnJlZihgcHJvbWlzZXMvJHtwYXJhbXMudGlkfWApLnB1c2goe1xuXHRcdFx0XHRcdHR5cGU6ICdjb21tZW50Jyxcblx0XHRcdFx0XHRwcm9taXNlaWQ6IHBhcmFtcy5wcm9taXNlaWQsXG5cdFx0XHRcdFx0YXV0aG9yOiBwYXJhbXMuYXV0aG9yLFxuXHRcdFx0XHRcdHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcblx0XHRcdFx0XHR0ZXh0OiBwYXJhbXMudGV4dFxuXHRcdFx0XHR9KS50aGVuKHJlc29sdmUpLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0YWRkUHJvbWlzZTogKHBhcmFtcykgPT4ge1xuXHRcdFx0aWYgKCFwYXJhbXMudGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFwYXJhbXMuYXV0aG9yKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyBhdXRob3IgaWQgZ2l2ZW4nKTtcblx0XHRcdH1cblx0XHRcdGxldCBwYXlsb2FkID0ge1xuXHRcdFx0XHR0eXBlOiAnZWRpdCcsXG5cdFx0XHRcdGF1dGhvcjogcGFyYW1zLmF1dGhvcixcblx0XHRcdFx0dGltZXN0YW1wOiBEYXRlLm5vdygpXG5cdFx0XHR9O1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0ZGIucmVmKGBwcm9taXNlcy8ke3BhcmFtcy50aWR9YCkucHVzaChwYXlsb2FkKS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRcdFx0bGV0IHByb21pc2VpZCA9IGRvbmUucGF0aC5jdFsyXTtcblx0XHRcdFx0XHRkYi5yZWYoYHByb21pc2VzLyR7cGFyYW1zLnRpZH0vJHtwcm9taXNlaWR9L3Byb21pc2VpZGApLnNldChwcm9taXNlaWQpLnRoZW4oKGZpbmlzaGVkKSA9PiB7XG5cdFx0XHRcdFx0XHRwYXlsb2FkLnByb21pc2VpZCA9IHByb21pc2VpZDtcblx0XHRcdFx0XHRcdHJlc29sdmUoe1xuXHRcdFx0XHRcdFx0XHRwcm9taXNlaWQ6IHByb21pc2VpZCxcblx0XHRcdFx0XHRcdFx0ZGF0YTogcGF5bG9hZFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHR1bnNldFByb21pc2U6IChwYXJhbXMpID0+IHtcblx0XHRcdGlmICghcGFyYW1zLnRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghcGFyYW1zLnByb21pc2VpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gcHJvbWlzZSBpZCBnaXZlbicpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0ZGIucmVmKGBwcm9taXNlcy8ke3BhcmFtcy50aWR9LyR7cGFyYW1zLnByb21pc2VpZH1gKS5yZW1vdmUoKS50aGVuKHJlc29sdmUpLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0dXBkYXRlUHJvbWlzZTogKHBhcmFtcykgPT4ge1xuXHRcdFx0aWYgKCFwYXJhbXMudGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFwYXJhbXMucHJvbWlzZWlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyBwcm9taXNlIGlkIGdpdmVuJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXBhcmFtcy5hdXRob3IpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIGF1dGhvciBpZCBnaXZlbicpO1xuXHRcdFx0fVxuXHRcdFx0bGV0IHRpZCA9IHBhcmFtcy50aWQgKyAnJztcblx0XHRcdGxldCBlZGl0RGF0YSA9IHBhcmFtcztcblx0XHRcdGRlbGV0ZSBlZGl0RGF0YS50aWQ7XG5cdFx0XHRlZGl0RGF0YS50aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0ZGIucmVmKGBwcm9taXNlcy8ke3RpZH1gKS5wdXNoKGVkaXREYXRhKS50aGVuKHJlc29sdmUpLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0YWRkTGlua1RvUHJvbWlzZTogKHBhcmFtcykgPT4ge1xuXHRcdFx0aWYgKCFwYXJhbXMudGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFwYXJhbXMucHJvbWlzZWlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyBwcm9taXNlIGlkIGdpdmVuJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXBhcmFtcy5hdXRob3IpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIGF1dGhvciBpZCBnaXZlbicpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdFx0bGV0IGhhc0xpbmtJZCA9IHBhcmFtcy5saW5raWQgPyB0cnVlIDogZmFsc2U7XG5cdFx0XHRcdGRiLnJlZihgcHJvbWlzZXMvJHtwYXJhbXMudGlkfWApLnB1c2goe1xuXHRcdFx0XHRcdHR5cGU6ICdsaW5rJyxcblx0XHRcdFx0XHRwcm9taXNlaWQ6IHBhcmFtcy5wcm9taXNlaWQsXG5cdFx0XHRcdFx0bGlua2lkOiBwYXJhbXMubGlua2lkIHx8IGZhbHNlLFxuXHRcdFx0XHRcdGF1dGhvcjogcGFyYW1zLmF1dGhvcixcblx0XHRcdFx0XHR0aW1lc3RhbXA6IERhdGUubm93KCksXG5cdFx0XHRcdFx0bmFtZTogcGFyYW1zLm5hbWUgfHwgZmFsc2UsXG5cdFx0XHRcdFx0dXJsOiBwYXJhbXMudXJsIHx8IGZhbHNlLFxuXHRcdFx0XHR9KS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRcdFx0aWYgKGhhc0xpbmtJZCkge1xuXHRcdFx0XHRcdFx0cmVzb2x2ZShkb25lKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0bGV0IGxpbmtpZCA9IGRvbmUucGF0aC5jdFsyXTtcblx0XHRcdFx0XHRcdGRiLnJlZihgcHJvbWlzZXMvJHtwYXJhbXMudGlkfS8ke2xpbmtpZH0vbGlua2lkYCkuc2V0KGxpbmtpZCkudGhlbihyZXNvbHZlKS5jYXRjaChyZWplY3QpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHR9XG5cblx0cmV0dXJuIGRhdGFiYXNlO1xufVxuXG5leHBvcnQge0RhdGFiYXNlfTsiLCJpbXBvcnQge2NvbmZpZ30gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHtEYXRhYmFzZX0gZnJvbSAnLi9kYXRhYmFzZSc7XG5pbXBvcnQge1ZpZXdzfSBmcm9tICcuL3ZpZXdzJztcblxubGV0IGRhdGFiYXNlID0gRGF0YWJhc2UoZmlyZWJhc2UsIGNvbmZpZyk7XG5cbmxldCBwYXJhbXMgPSBnZXRRdWVyeVBhcmFtcyhkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2gpO1xubGV0IFRFQU1fSUQgPSBwYXJhbXMudGVhbTtcbmxldCBNRU5UT1JfTU9ERSA9IHBhcmFtcy5tZW50b3IgPyB0cnVlIDogZmFsc2U7XG5cbmxldCB2aWV3cyA9IFZpZXdzKCk7XG5cbmxldCBsb2dpbkJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpbicpO1xubGV0IGZlZWRiYWNrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZlZWRiYWNrJyk7XG5cbmxldCBhbGxQcm9taXNlc0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGwtcHJvbWlzZXMnKTtcbmxldCBmb2N1c2VkUHJvbWlzZURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb2N1c2VkLXByb21pc2UtYm94Jyk7XG5sZXQgZWRpdFByb21pc2VEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1wcm9taXNlJyk7XG5cbmRhdGFiYXNlLmluaXQobWFpbiwgKCkgPT4ge1xuXHQvLyBObyB1c2VyIHNpZ25lZCBpblxuXHR3aW5kb3cubG9jYXRpb24gPSBgJHt3aW5kb3cubG9jYXRpb24ub3JpZ2lufS9sb2dpbi5odG1sJHtkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2h9YDtcbn0pO1xuXG5mdW5jdGlvbiBtYWluKHVzZXIpIHtcblxuXHRpbml0V2l0aFRlYW1Db2RlKCh0aWQpID0+IHtcblxuXHRcdGNvbnNvbGUubG9nKCdXaGF0IG1ha2VzIHdvcmtpbmcgYXQgT21uaXBvaW50bWVudCBiZXR0ZXIgdGhhbiwgc2F5LCBHb29nbGU/Jyk7XG5cblx0XHRmaWxsVGV4dCgnZmlsbC11c2VyLW5hbWUnLCB1c2VyLmRpc3BsYXlOYW1lKTtcblx0XHRmaWxsU3JjKCdmaWxsLXVzZXItaW1hZ2UnLCB1c2VyLnBob3RvVVJMKTtcblxuXHRcdGxldCBwcm9tZXRoZXVzID0gZGF0YWJhc2UuZ2V0UHJvbWV0aGV1cygpO1xuXG5cdFx0ZmVlZGJhY2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0dmV4LmRpYWxvZy5wcm9tcHQoe1xuXHRcdFx0XHRtZXNzYWdlOiAnV2hhdCBmZWVkYmFjayBkbyB5b3UgaGF2ZSB0byBzaGFyZSB3aXRoIHVzPycsXG5cdFx0XHRcdGNhbGxiYWNrOiAoZmVlZGJhY2spID0+IHtcblx0XHRcdFx0XHRpZiAoZmVlZGJhY2spIHtcblx0XHRcdFx0XHRcdGxldCB1aWQgPSBkYXRhYmFzZS5nZXRDdXJyZW50VXNlcigpLnVpZDtcblx0XHRcdFx0XHRcdGRhdGFiYXNlLnNhdmVGZWVkYmFjayh0aWQsIHVpZCwgZmVlZGJhY2spLnRoZW4oKGRvbmUpID0+IHtcblx0XHRcdFx0XHRcdFx0dmV4LmRpYWxvZy5hbGVydCgnVGhhbmsgeW91IGZvciB5b3VyIGZlZWRiYWNrLCBpdCByZWFsbHkgaGVscHMgdXMgYSBsb3QhJyk7XG5cdFx0XHRcdFx0XHR9KS5jYXRjaChyZXBvcnRFcnJvclRvVXNlcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdGxldCBjaGVja2VkUGVybWlzc2lvbnMgPSBmYWxzZTtcblx0XHRkYXRhYmFzZS5vblRlYW1DaGFuZ2UodGlkLCAodGVhbSwgbWVtYmVycykgPT4ge1xuXHRcdFx0aWYgKCFjaGVja2VkUGVybWlzc2lvbnMpIHtcblx0XHRcdFx0Y2hlY2tVc2VyUGVybWlzc2lvbih0aWQsIHRlYW0sIG1lbWJlcnMsIHVzZXIpO1xuXHRcdFx0XHRjaGVja2VkUGVybWlzc2lvbnMgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH0sIHJlcG9ydEVycm9yVG9Vc2VyKTtcblxuXHRcdGRhdGFiYXNlLmdldFByb21ldGhldXMoKS5zYXZlKHtcblx0XHRcdHR5cGU6ICdQUk9NSVNFU19QQUdFJyxcblx0XHRcdHRpZDogdGlkLFxuXHRcdFx0bWVudG9yOiBpc01lbnRvcigpXG5cdFx0fSk7XG5cblx0fSk7XG5cbn1cblxuLypsZXQgdXNlcl91aWRzID0ge1xuXHR2aW5lc2g6ICc3NEVtd2pCN1k2UzAyc0ZZZmdJR243YTV6dVAyJyxcblx0ZmFyYXo6ICc4MmRaQzVrdEZiZVNOSURjVDIwQ0xWQjhxTVcyJyxcblx0a2VsbHk6ICdHOWh6b1ZCY2x6UnpxTG80VlVsWnE0eVZ4RkcyJyxcblx0cm9zYTogJ2pDS1VKckZNNEVmeEFIMlZaand0TWp2S0VuVzInXG59XG5cbmxldCBwcm9taXNlRGF0YSA9IHtcblx0YTA6IHtcblx0XHRwcm9taXNlaWQ6IFwicHJvbWlzZS1hXCIsXG5cdFx0dHlwZTogXCJlZGl0XCIsXG5cdFx0YXV0aG9yOiB1c2VyX3VpZHMucm9zYSxcblx0XHR0aW1lc3RhbXA6IG5ldyBEYXRlKFwiOC8xLzIwMTcgNDowNyBQTVwiKS5nZXRUaW1lKCksXG5cdFx0Ly9cblx0XHR0aXRsZTogXCJCcmFpbnN0b3JtXCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiYnJhaW5zdG9ybSA1MCBzdGFydHVwc1wiLFxuXHRcdGR1ZTogbmV3IERhdGUoXCI4LzMvMjAxNyAxOjUwIFBNXCIpLmdldFRpbWUoKSxcblx0XHRsZXZlbDogMSAvLyBzbWFsbFxuXHR9LFxuXHRhMToge1xuXHRcdHByb21pc2VpZDogXCJwcm9taXNlLWFcIixcblx0XHR0eXBlOiBcImNvbW1lbnRcIixcblx0XHRhdXRob3I6IHVzZXJfdWlkcy5yb3NhLFxuXHRcdHRpbWVzdGFtcDogbmV3IERhdGUoXCI4LzEvMjAxNyA0OjA4IFBNXCIpLmdldFRpbWUoKSxcblx0XHQvL1xuXHRcdHRleHQ6IFwiSSB3aWxsIGZvbGxvdyB0aGUgSURFTyBydWxlcyBvZiBicmFpbnN0b3JtaW5nLlwiXG5cdH0sXG5cdGEyOiB7XG5cdFx0cHJvbWlzZWlkOiBcInByb21pc2UtYVwiLFxuXHRcdHR5cGU6IFwiZWRpdFwiLFxuXHRcdGF1dGhvcjogdXNlcl91aWRzLnJvc2EsXG5cdFx0dGltZXN0YW1wOiBuZXcgRGF0ZShcIjgvMS8yMDE3IDQ6MDkgUE1cIikuZ2V0VGltZSgpLFxuXHRcdC8vXG5cdFx0ZGVzY3JpcHRpb246IFwiYnJhaW5zdG9ybSA1MCBzdGFydHVwcyBmb3IgdXMgdG8gbGVhcm4gYWJvdXRcIlxuXHR9LFxuXHRhMzoge1xuXHRcdHByb21pc2VpZDogXCJwcm9taXNlLWFcIixcblx0XHR0eXBlOiBcImVkaXRcIixcblx0XHRhdXRob3I6IHVzZXJfdWlkcy5yb3NhLFxuXHRcdHRpbWVzdGFtcDogbmV3IERhdGUoXCI4LzEvMjAxNyA0OjEwIFBNXCIpLmdldFRpbWUoKSxcblx0XHQvL1xuXHRcdHRpdGxlOiBcIkJyYWluc3Rvcm0gU3RhcnR1cHNcIlxuXHR9LFxuXHRhNDoge1xuXHRcdHByb21pc2VpZDogXCJwcm9taXNlLWFcIixcblx0XHR0eXBlOiBcImxpbmtcIixcblx0XHRhdXRob3I6IHVzZXJfdWlkcy5yb3NhLFxuXHRcdHRpbWVzdGFtcDogbmV3IERhdGUoXCI4LzEvMjAxNyA0OjEyIFBNXCIpLmdldFRpbWUoKSxcblx0XHQvL1xuXHRcdGxpbmtpZDogXCJsaW5rLWFcIixcblx0XHR1cmw6IFwiaHR0cHM6Ly9kcml2ZS5nb29nbGUuY29tL2RyaXZlL3UvMC9mb2xkZXJzLzBCN0R2Qld1U0NmWGNiR1pUY2xnMlRUbFlSVTBcIixcblx0XHRuYW1lOiBcIkJyYWluc3Rvcm0gRG9jXCJcblx0fSxcblx0YTU6IHtcblx0XHRwcm9taXNlaWQ6IFwicHJvbWlzZS1hXCIsXG5cdFx0dHlwZTogXCJjb21tZW50XCIsXG5cdFx0YXV0aG9yOiB1c2VyX3VpZHMudmluZXNoLFxuXHRcdHRpbWVzdGFtcDogbmV3IERhdGUoXCI4LzEvMjAxNyA0OjE3IFBNXCIpLmdldFRpbWUoKSxcblx0XHQvL1xuXHRcdHRleHQ6IFwiRGlkIHlvdSBjb25zaWRlciBBaXJCbmI/XCJcblx0fSxcblx0YTY6IHtcblx0XHRwcm9taXNlaWQ6IFwicHJvbWlzZS1hXCIsXG5cdFx0dHlwZTogXCJjb21tZW50XCIsXG5cdFx0YXV0aG9yOiB1c2VyX3VpZHMucm9zYSxcblx0XHR0aW1lc3RhbXA6IG5ldyBEYXRlKFwiOC8xLzIwMTcgNDoxOCBQTVwiKS5nZXRUaW1lKCksXG5cdFx0Ly9cblx0XHR0ZXh0OiBcIlllcywgSSBkaWQhXCJcblx0fSxcblx0YTc6IHtcblx0XHRwcm9taXNlaWQ6IFwicHJvbWlzZS1hXCIsXG5cdFx0dHlwZTogXCJjb21wbGV0ZVwiLFxuXHRcdGF1dGhvcjogdXNlcl91aWRzLnJvc2EsXG5cdFx0dGltZXN0YW1wOiBuZXcgRGF0ZShcIjgvMi8yMDE3IDk6NDMgQU1cIikuZ2V0VGltZSgpLFxuXHRcdC8vXG5cdFx0Y29tcGxldGVkOiB0cnVlXG5cdH0sXG5cdGE4OiB7XG5cdFx0cHJvbWlzZWlkOiBcInByb21pc2UtYVwiLFxuXHRcdHR5cGU6IFwiY29tcGxldGVcIixcblx0XHRhdXRob3I6IHVzZXJfdWlkcy5yb3NhLFxuXHRcdHRpbWVzdGFtcDogbmV3IERhdGUoXCI4LzIvMjAxNyAyOjMxIFBNXCIpLmdldFRpbWUoKSxcblx0XHQvL1xuXHRcdGNvbXBsZXRlZDogZmFsc2Vcblx0fSxcblx0YTk6IHtcblx0XHRwcm9taXNlaWQ6IFwicHJvbWlzZS1hXCIsXG5cdFx0dHlwZTogXCJjb21tZW50XCIsXG5cdFx0YXV0aG9yOiB1c2VyX3VpZHMucm9zYSxcblx0XHR0aW1lc3RhbXA6IG5ldyBEYXRlKFwiOC8yLzIwMTcgMjozMSBQTVwiKS5nZXRUaW1lKCksXG5cdFx0Ly9cblx0XHR0ZXh0OiBcIkFkZGVkIHNvbWUgZXh0cmEgY29tcGFuaWVzIEkgY2FtZSB1cCB3aXRoLlwiXG5cdH0sXG5cdGExMDoge1xuXHRcdHByb21pc2VpZDogXCJwcm9taXNlLWFcIixcblx0XHR0eXBlOiBcImNvbXBsZXRlXCIsXG5cdFx0YXV0aG9yOiB1c2VyX3VpZHMucm9zYSxcblx0XHR0aW1lc3RhbXA6IG5ldyBEYXRlKFwiOC8yLzIwMTcgMjozMiBQTVwiKS5nZXRUaW1lKCksXG5cdFx0Ly9cblx0XHRjb21wbGV0ZWQ6IHRydWVcblx0fSxcblx0YjA6IHtcblx0XHRwcm9taXNlaWQ6IFwicHJvbWlzZS1iXCIsXG5cdFx0dHlwZTogXCJlZGl0XCIsXG5cdFx0YXV0aG9yOiB1c2VyX3VpZHMudmluZXNoLFxuXHRcdHRpbWVzdGFtcDogbmV3IERhdGUoXCI4LzMvMjAxNyAxOjMyIFBNXCIpLmdldFRpbWUoKSxcblx0XHQvL1xuXHRcdHRpdGxlOiBcIkFydGljbGVzXCIsXG5cdFx0ZGVzY3JpcHRpb246IFwiZmluZCBhcnRpY2xlcyBhYm91dCBzdGFydHVwIGxlYWRlcnNoaXBcIixcblx0XHRkdWU6IG5ldyBEYXRlKFwiOC8zLzIwMTcgMTo1MCBQTVwiKS5nZXRUaW1lKCksXG5cdFx0bGV2ZWw6IDIgLy8gbWVkaXVtXG5cdH0sXG59OyovXG5cbmZ1bmN0aW9uIG1haW5Qcm9taXNlVGFiKHRpZCwgdGVhbSwgbWVtYmVycywgdXNlcikge1xuXG5cdGNvbnNvbGUubG9nKCdtYWluIHByb21pc2UgdGFiJylcblxuXHQvL2RhdGFiYXNlLmdldFRlYW0odGlkKS50aGVuKCh0ZWFtKSA9PiB7XG5cdFx0Ly9jb25zb2xlLmxvZyhtZW1iZXJzKVxuXHQvL30pO1xuXG5cdGxldCByZW5kZXJlZFRhYmxlID0gZmFsc2U7XG5cblx0ZGF0YWJhc2Uub25UZWFtUHJvbWlzZXNDaGFuZ2UodGlkLCAoYWxsUHJvbWlzZURhdGEpID0+IHtcblx0XHRsZXQgdGVhbVByb21pc2VzID0gcGFyc2VQcm9taXNlRGF0YShhbGxQcm9taXNlRGF0YSk7XG5cdFx0Ly9jb25zb2xlLmxvZyh0ZWFtUHJvbWlzZXMpO1xuXHRcdHJlbmRlclByb21pc2VUYWJsZSh0ZWFtUHJvbWlzZXMsIG1lbWJlcnMsIHRpZCk7XG5cdFx0aWYgKCFyZW5kZXJlZFRhYmxlKSB7XG5cdFx0XHRyZW5kZXJlZFRhYmxlID0gdHJ1ZTtcblx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXctcHJvbWlzZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdFx0ZGF0YWJhc2UuYWRkUHJvbWlzZSh7XG5cdFx0XHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRcdFx0YXV0aG9yOiBkYXRhYmFzZS5nZXRDdXJyZW50VXNlcigpLnVpZCxcblx0XHRcdFx0fSkudGhlbigocmVzKSA9PiB7XG5cdFx0XHRcdFx0bGV0IHByb21pc2VpZCA9IHJlcy5wcm9taXNlaWQ7XG5cdFx0XHRcdFx0bGV0IHByb21pc2VEYXRhID0gcmVzLmRhdGE7XG5cdFx0XHRcdFx0bGV0IHdyYXBwZXIgPSBwYXJzZVByb21pc2VEYXRhKHtpbml0OiBwcm9taXNlRGF0YX0pO1xuXHRcdFx0XHRcdGxldCBmb2N1c2VkUHJvbWlzZSA9IHdyYXBwZXJbcHJvbWlzZWlkXTtcblx0XHRcdFx0XHQvL2NvbnNvbGUubG9nKGZvY3VzZWRQcm9taXNlKVxuXHRcdFx0XHRcdHJlbmRlclByb21pc2VFZGl0b3IocHJvbWlzZWlkLCBmb2N1c2VkUHJvbWlzZSwgbWVtYmVycywgdGlkLCB0cnVlKTtcblx0XHRcdFx0fSkuY2F0Y2gocmVwb3J0RXJyb3JUb1VzZXIpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9KTtcblxuXHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2hhcnRlci10YWInKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0d2luZG93LmxvY2F0aW9uID0gYCR7d2luZG93LmxvY2F0aW9uLm9yaWdpbn0vY2hhcnRlci5odG1sJHtkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2h9YDtcblx0fSk7XG5cblx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb21pc2VzLXRhYicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHR3aW5kb3cubG9jYXRpb24gPSBgJHt3aW5kb3cubG9jYXRpb24ub3JpZ2lufS9wcm9taXNlcy5odG1sJHtkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2h9YDtcblx0fSk7XG5cblx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hlYWx0aC10YWInKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0d2luZG93LmxvY2F0aW9uID0gYCR7d2luZG93LmxvY2F0aW9uLm9yaWdpbn0vaGVhbHRoLmh0bWwke2RvY3VtZW50LmxvY2F0aW9uLnNlYXJjaH1gO1xuXHR9KTtcblxuXHQvKmxldCBwcm9tcyA9IFtdO1xuXHRmb3IgKGxldCBwZXJzb25fa2V5IGluIHVzZXJfdWlkcykge1xuXHRcdGxldCB1aWQgPSB1c2VyX3VpZHNbcGVyc29uX2tleV07XG5cdFx0bGV0IHByID0gZGF0YWJhc2UuZ2V0VXNlcih1aWQpO1xuXHRcdHByLnVpZCA9IHVpZDtcblx0XHRwcm9tcy5wdXNoKHByKTtcblx0fVxuXHRQcm9taXNlLmFsbChwcm9tcykudGhlbigodXNlcnMpID0+IHtcblxuXHRcdGxldCB1c2VyX3Byb2ZpbGVzID0ge307XG5cdFx0dXNlcnMuZm9yRWFjaCgodXNlckRhdGEsIHVpZHgpID0+IHtcblx0XHRcdGxldCB1aWQgPSBwcm9tc1t1aWR4XS51aWQ7XG5cdFx0XHR1c2VyX3Byb2ZpbGVzW3VpZF0gPSB1c2VyRGF0YTtcblx0XHR9KTtcblxuXHRcdGxldCB0ZWFtUHJvbWlzZXMgPSBwYXJzZVByb21pc2VEYXRhKHByb21pc2VEYXRhKTtcblx0XHRjb25zb2xlLmxvZyh0ZWFtUHJvbWlzZXMpO1xuXG5cdFx0cmVuZGVyUHJvbWlzZVRhYmxlKHRlYW1Qcm9taXNlcywgdXNlcl9wcm9maWxlcywgdGlkKTtcblxuXHR9KTsqL1xuXG59XG5cbmZ1bmN0aW9uIHJlbmRlclByb21pc2VUYWJsZShwcm9taXNlRGF0YSwgcHJvZmlsZXMsIHRpZCkge1xuXG5cdGxldCB0YWJsZSA9IHZpZXdzLmdldFByb21pc2VUYWJsZSh7XG5cdFx0cHJvbWlzZXM6IHByb21pc2VEYXRhLFxuXHRcdHByb2ZpbGVzOiBwcm9maWxlc1xuXHR9KTtcblxuXHRsZXQgdGFibGVIb2xkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvbWlzZS10YWJsZScpO1xuXHR0YWJsZUhvbGRlci5pbm5lckhUTUwgPSAnJztcblx0dGFibGVIb2xkZXIuYXBwZW5kQ2hpbGQodGFibGUpO1xuXG5cdGxldCBwcm9taXNlQnV0dG9ucyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtcHJvbWlzZWlkXScpKTtcblx0cHJvbWlzZUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG5cdFx0YnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdGxldCBwcm9taXNlaWQgPSBidXR0b24uZGF0YXNldFsncHJvbWlzZWlkJ107XG5cdFx0XHRjb25zb2xlLmxvZyhgcHJvbWlzZWlkOiAke3Byb21pc2VpZH1gKTtcblx0XHRcdGxldCBmb2N1c2VkUHJvbWlzZSA9IHByb21pc2VEYXRhW3Byb21pc2VpZF07XG5cdFx0XHRyZW5kZXJQcm9taXNlQm94KHByb21pc2VpZCwgZm9jdXNlZFByb21pc2UsIHByb2ZpbGVzLCB0aWQpO1xuXHRcdH0pO1xuXHR9KTtcblxuXHQvKmxldCBpID0gMDtcblx0Zm9yIChsZXQgcGRpZCBpbiBwcm9taXNlRGF0YSkge1xuXHRcdGlmIChpID4gMCkge1xuXHRcdFx0cmVuZGVyUHJvbWlzZUJveChwZGlkLCBwcm9taXNlRGF0YVtwZGlkXSwgcHJvZmlsZXMsIHRpZCk7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdFx0aSsrO1xuXHR9Ki9cblxufVxuXG5mdW5jdGlvbiByZW5kZXJQcm9taXNlQm94KHByb21pc2VpZCwgZm9jdXNlZFByb21pc2UsIHByb2ZpbGVzLCB0aWQpIHtcblxuXHRyZW5kZXJQcm9taXNlQm94Q2FsbGJhY2socHJvbWlzZWlkLCBmb2N1c2VkUHJvbWlzZSwgcHJvZmlsZXMsIHRpZCk7XG5cblx0ZGF0YWJhc2Uub25Qcm9taXNlQ2hhbmdlKHRpZCwgcHJvbWlzZWlkLCAoZGF0YSkgPT4ge1xuXG5cdFx0bGV0IHdyYXBwZXIgPSBwYXJzZVByb21pc2VEYXRhKGRhdGEpO1xuXHRcdGxldCBpblByb21pc2UgPSB3cmFwcGVyW3Byb21pc2VpZF07XG5cdFx0Ly8gQWNjb3VudCBmb3IgY2hhbmdlIGluIHByb2ZpbGVzP1xuXHRcdHJlbmRlclByb21pc2VCb3hDYWxsYmFjayhwcm9taXNlaWQsIGluUHJvbWlzZSwgcHJvZmlsZXMsIHRpZCk7XG5cblx0fSk7XG5cbn1cblxubGV0IGp1c3RTdWJtaXR0ZWRDb21tZW50ID0gZmFsc2U7XG5cbmZ1bmN0aW9uIHJlbmRlclByb21pc2VCb3hDYWxsYmFjayhwcm9taXNlaWQsIGZvY3VzZWRQcm9taXNlLCBwcm9maWxlcywgdGlkKSB7XG5cblx0bGV0IGJveCA9IHZpZXdzLmdldFByb21pc2VCb3goe1xuXHRcdHByb21pc2U6IGZvY3VzZWRQcm9taXNlLFxuXHRcdHByb2ZpbGVzOiBwcm9maWxlc1xuXHR9KTtcblxuXHRsZXQgc2F2ZVR5cGluZyA9IGZhbHNlO1xuXHRsZXQgdGV4dGFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1mcGI9XCJ0ZXh0YXJlYVwiXScpO1xuXHRpZiAodGV4dGFyZWEpIHtcblx0XHRzYXZlVHlwaW5nID0gdGV4dGFyZWEudmFsdWU7XG5cdH1cblxuXHRsZXQgb3V0ID0gZm9jdXNlZFByb21pc2VEaXY7XG5cdFx0b3V0LmlubmVySFRNTCA9ICcnO1xuXHRcdG91dC5hcHBlbmRDaGlsZChib3gpO1xuXG5cdGlmIChqdXN0U3VibWl0dGVkQ29tbWVudCkge1xuXHRcdHNhdmVUeXBpbmcgPSBmYWxzZTtcblx0XHRqdXN0U3VibWl0dGVkQ29tbWVudCA9IGZhbHNlO1xuXHR9XG5cblx0aWYgKHNhdmVUeXBpbmcpIHtcblx0XHR0ZXh0YXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWZwYj1cInRleHRhcmVhXCJdJyk7XG5cdFx0dGV4dGFyZWEudmFsdWUgPSBzYXZlVHlwaW5nO1xuXHR9XG5cblx0ZWRpdFByb21pc2VEaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0YWxsUHJvbWlzZXNEaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0b3V0LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG5cdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWZwYj1cImJhY2tcIl0nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0YWxsUHJvbWlzZXNEaXYuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cdFx0b3V0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdH0pO1xuXG5cdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWZwYj1cImVkaXRcIl0nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0cmVuZGVyUHJvbWlzZUVkaXRvcihwcm9taXNlaWQsIGZvY3VzZWRQcm9taXNlLCBwcm9maWxlcywgdGlkLCBmYWxzZSk7XG5cdH0pO1xuXG5cdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWZwYj1cImNvbW1lbnRcIl0nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0bGV0IG15VGV4dGFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1mcGI9XCJ0ZXh0YXJlYVwiXScpO1xuXHRcdGxldCB0ZXh0ID0gbXlUZXh0YXJlYS52YWx1ZTtcblx0XHRpZiAodGV4dCkge1xuXHRcdFx0anVzdFN1Ym1pdHRlZENvbW1lbnQgPSB0cnVlO1xuXHRcdFx0ZGF0YWJhc2UuY29tbWVudE9uUHJvbWlzZSh7XG5cdFx0XHRcdHRpZDogdGlkLFxuXHRcdFx0XHRwcm9taXNlaWQ6IHByb21pc2VpZCxcblx0XHRcdFx0YXV0aG9yOiBkYXRhYmFzZS5nZXRDdXJyZW50VXNlcigpLnVpZCxcblx0XHRcdFx0dGV4dDogdGV4dFxuXHRcdFx0fSkudGhlbigoZG9uZSkgPT4ge1xuXHRcdFx0XHRteVRleHRhcmVhLnZhbHVlID0gJyc7XG5cdFx0XHR9KS5jYXRjaChyZXBvcnRFcnJvclRvVXNlcik7XG5cdFx0fVxuXHR9KTtcblxuXHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1mcGI9XCJsaW5rXCJdJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdGxldCBtc2cgPSBgRW50ZXIgTGluayBVUkw6YDtcblx0XHRwcm9tcHRMaW5rRGF0YVRoZW4obXNnLCAodXJsLCBuYW1lKSA9PiB7XG5cdFx0XHRkYXRhYmFzZS5hZGRMaW5rVG9Qcm9taXNlKHtcblx0XHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRcdHByb21pc2VpZDogcHJvbWlzZWlkLFxuXHRcdFx0XHRhdXRob3I6IGRhdGFiYXNlLmdldEN1cnJlbnRVc2VyKCkudWlkLFxuXHRcdFx0XHR1cmw6IHVybCxcblx0XHRcdFx0bmFtZTogbmFtZVxuXHRcdFx0fSkudGhlbigoZG9uZSkgPT4ge30pLmNhdGNoKHJlcG9ydEVycm9yVG9Vc2VyKTtcblx0XHR9KTtcblx0fSk7XG5cblx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtZnBiPVwiY29tcGxldGVcIl0nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0ZGF0YWJhc2UudXBkYXRlUHJvbWlzZSh7XG5cdFx0XHR0eXBlOiAnY29tcGxldGUnLFxuXHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRwcm9taXNlaWQ6IHByb21pc2VpZCxcblx0XHRcdGF1dGhvcjogZGF0YWJhc2UuZ2V0Q3VycmVudFVzZXIoKS51aWQsXG5cdFx0XHRjb21wbGV0ZWQ6ICFmb2N1c2VkUHJvbWlzZS5jb21wbGV0ZWRcblx0XHR9KS50aGVuKChkb25lKSA9PiB7fSkuY2F0Y2gocmVwb3J0RXJyb3JUb1VzZXIpO1xuXHR9KTtcblxuXHRBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lZGl0LWxpbmtbZGF0YS1mb3JdJykpLmZvckVhY2goKGVkaXRvcikgPT4ge1xuXHRcdGVkaXRvci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRsZXQga2V5ID0gZWRpdG9yLmRhdGFzZXRbJ2ZvciddO1xuXHRcdFx0Y29uc29sZS5sb2coJ2xpbmsga2V5OiAnICsga2V5KTtcblx0XHRcdGxldCBsaW5rRGF0YSA9IGZvY3VzZWRQcm9taXNlLmxpbmtzW2tleV07XG5cdFx0XHRsZXQgbXNnID0gYEVkaXQgTGluayBVUkw6YDtcblx0XHRcdHByb21wdExpbmtEYXRhVGhlbihtc2csICh1cmwsIG5hbWUpID0+IHtcblx0XHRcdFx0ZGF0YWJhc2UuYWRkTGlua1RvUHJvbWlzZSh7XG5cdFx0XHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRcdFx0cHJvbWlzZWlkOiBwcm9taXNlaWQsXG5cdFx0XHRcdFx0bGlua2lkOiBrZXksXG5cdFx0XHRcdFx0YXV0aG9yOiBkYXRhYmFzZS5nZXRDdXJyZW50VXNlcigpLnVpZCxcblx0XHRcdFx0XHR1cmw6IHVybCxcblx0XHRcdFx0XHRuYW1lOiBuYW1lXG5cdFx0XHRcdH0pLnRoZW4oKGRvbmUpID0+IHt9KS5jYXRjaChyZXBvcnRFcnJvclRvVXNlcik7XG5cdFx0XHR9LCBsaW5rRGF0YSk7XG5cdFx0fSk7XG5cdH0pO1xuXG59XG5cbmZ1bmN0aW9uIHJlbmRlclByb21pc2VFZGl0b3IocHJvbWlzZWlkLCBmb2N1c2VkUHJvbWlzZSwgcHJvZmlsZXMsIHRpZCwgaW5EZWxldGFibGUpIHtcblx0bGV0IGRlbGV0YWJsZSA9IGluRGVsZXRhYmxlIHx8IGZhbHNlO1xuXHRsZXQgb3V0ID0gZm9jdXNlZFByb21pc2VEaXY7XG5cdGFsbFByb21pc2VzRGl2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdG91dC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRlZGl0UHJvbWlzZURpdi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblx0bGV0IG1vZGVsID0gZm9jdXNlZFByb21pc2U7XG5cdG1vZGVsLmRlbGV0YWJsZSA9IGRlbGV0YWJsZTtcblx0bGV0IGRpdiA9IHZpZXdzLmdldFByb21pc2VFZGl0b3IobW9kZWwpO1xuXHRlZGl0UHJvbWlzZURpdi5pbm5lckhUTUwgPSAnJztcblx0ZWRpdFByb21pc2VEaXYuYXBwZW5kQ2hpbGQoZGl2KTtcblx0bGV0IHdhcm5pbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1wZWY9XCJ3YXJuaW5nXCJdJyk7XG5cdGxldCBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1wZWY9XCJzdWJtaXRcIl0nKTtcblx0YnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRsZXQgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1wZWY9XCJ0aXRsZVwiXScpO1xuXHRcdGxldCBkZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXBlZj1cImRlc2NyaXB0aW9uXCJdJyk7XG5cdFx0bGV0IGR1ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXBlZj1cImR1ZVwiXScpO1xuXHRcdGxldCB0aW1lc3RhbXAgPSBEYXRlLnBhcnNlKGR1ZS5pbm5lclRleHQpO1xuXHRcdGlmIChpc05hTih0aW1lc3RhbXApID09IGZhbHNlKSB7XG5cdFx0XHRkYXRhYmFzZS51cGRhdGVQcm9taXNlKHtcblx0XHRcdFx0dHlwZTogJ2VkaXQnLFxuXHRcdFx0XHR0aWQ6IHRpZCxcblx0XHRcdFx0cHJvbWlzZWlkOiBwcm9taXNlaWQsXG5cdFx0XHRcdGF1dGhvcjogZGF0YWJhc2UuZ2V0Q3VycmVudFVzZXIoKS51aWQsXG5cdFx0XHRcdHRpdGxlOiB0aXRsZS5pbm5lclRleHQsXG5cdFx0XHRcdGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi5pbm5lclRleHQsXG5cdFx0XHRcdGR1ZTogdGltZXN0YW1wXG5cdFx0XHR9KS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRcdGVkaXRQcm9taXNlRGl2LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cdFx0XHRcdHJlbmRlclByb21pc2VCb3gocHJvbWlzZWlkLCBmb2N1c2VkUHJvbWlzZSwgcHJvZmlsZXMsIHRpZCk7XG5cdFx0XHR9KS5jYXRjaChyZXBvcnRFcnJvclRvVXNlcik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHdhcm5pbmcuaW5uZXJUZXh0ID0gJ0Nob29zZSBhIHZhbGlkIGRhdGUuJztcblx0XHR9XG5cdH0pO1xuXHRsZXQgcmVtb3ZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtcGVmPVwicmVtb3ZlXCJdJyk7XG5cdGlmIChyZW1vdmUpIHtcblx0XHRyZW1vdmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0ZGF0YWJhc2UudW5zZXRQcm9taXNlKHtcblx0XHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRcdHByb21pc2VpZDogcHJvbWlzZWlkXG5cdFx0XHR9KS50aGVuKChkb25lKSA9PiB7XG5cdFx0XHRcdGFsbFByb21pc2VzRGl2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXHRcdFx0XHRvdXQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHRcdFx0ZWRpdFByb21pc2VEaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHRcdH0pLmNhdGNoKHJlcG9ydEVycm9yVG9Vc2VyKTtcblx0XHR9KTtcblx0fVxuXHRsZXQgY2FuY2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtcGVmPVwiY2FuY2VsXCJdJyk7XG5cdGlmIChjYW5jZWwpIHtcblx0XHRjYW5jZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0ZWRpdFByb21pc2VEaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblx0XHRcdHJlbmRlclByb21pc2VCb3gocHJvbWlzZWlkLCBmb2N1c2VkUHJvbWlzZSwgcHJvZmlsZXMsIHRpZCk7XG5cdFx0fSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gcGFyc2VQcm9taXNlRGF0YShkYXRhKSB7XG5cdC8vY29uc29sZS5sb2coZGF0YSk7XG5cdGxldCBvdXRwdXQgPSB7fTtcblx0aWYgKGRhdGEpIHtcblx0XHRPYmplY3Qua2V5cyhkYXRhKS5tYXAoKGtleSkgPT4ge1xuXHRcdFx0bGV0IHZhbCA9IGRhdGFba2V5XTtcblx0XHRcdFx0dmFsLmtleSA9IGtleTtcblx0XHRcdHJldHVybiB2YWw7XG5cdFx0fSkuc29ydCgoYSwgYikgPT4ge1xuXHRcdFx0cmV0dXJuIGEudGltZXN0YW1wIC0gYi50aW1lc3RhbXA7XG5cdFx0fSkuZm9yRWFjaCgobm9kZSkgPT4ge1xuXHRcdFx0bGV0IHByb21pc2VpZCA9IG5vZGUucHJvbWlzZWlkO1xuXHRcdFx0aWYgKCEocHJvbWlzZWlkIGluIG91dHB1dCkpIHtcblx0XHRcdFx0b3V0cHV0W3Byb21pc2VpZF0gPSB7XG5cdFx0XHRcdFx0Ly9cblx0XHRcdFx0XHRwcm9taXNlX2lkOiBmYWxzZSxcblx0XHRcdFx0XHRhdXRob3I6IGZhbHNlLFxuXHRcdFx0XHRcdHRpdGxlOiAnVW50aXRsZWQgUHJvbWlzZScsXG5cdFx0XHRcdFx0ZGVzY3JpcHRpb246ICcuLi4nLFxuXHRcdFx0XHRcdGxldmVsOiAxLFxuXHRcdFx0XHRcdGNvbXBsZXRlZDogZmFsc2UsXG5cdFx0XHRcdFx0Ly9cblx0XHRcdFx0XHRzdGFydGVkOiBmYWxzZSxcblx0XHRcdFx0XHRmaW5pc2hlZDogZmFsc2UsXG5cdFx0XHRcdFx0ZHVlOiBmYWxzZSxcblx0XHRcdFx0XHRsYXN0QWN0aXZlOiAwLFxuXHRcdFx0XHRcdC8vXG5cdFx0XHRcdFx0bGlua3M6IHt9LFxuXHRcdFx0XHRcdGNvbW1lbnRzOiB7fVxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0aWYgKG91dHB1dFtwcm9taXNlaWRdLmxhc3RBY3RpdmUgPCBub2RlLnRpbWVzdGFtcCkge1xuXHRcdFx0XHRvdXRwdXRbcHJvbWlzZWlkXS5sYXN0QWN0aXZlID0gbm9kZS50aW1lc3RhbXA7XG5cdFx0XHR9XG5cdFx0XHRzd2l0Y2ggKG5vZGUudHlwZSkge1xuXHRcdFx0XHRjYXNlICdlZGl0JzogXG5cdFx0XHRcdFx0aWYgKCFvdXRwdXRbcHJvbWlzZWlkXS5zdGFydGVkKSB7XG5cdFx0XHRcdFx0XHRvdXRwdXRbcHJvbWlzZWlkXS5zdGFydGVkID0gbm9kZS50aW1lc3RhbXA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChub2RlLmF1dGhvciAmJiAhb3V0cHV0W3Byb21pc2VpZF0uYXV0aG9yKSB7XG5cdFx0XHRcdFx0XHRvdXRwdXRbcHJvbWlzZWlkXS5hdXRob3IgPSBub2RlLmF1dGhvcjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKG5vZGUudGl0bGUpIHtcblx0XHRcdFx0XHRcdG91dHB1dFtwcm9taXNlaWRdLnRpdGxlID0gbm9kZS50aXRsZTtcblx0XHRcdFx0XHRcdC8vIEFkZCBDb21tZW50XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChub2RlLmRlc2NyaXB0aW9uKSB7XG5cdFx0XHRcdFx0XHRvdXRwdXRbcHJvbWlzZWlkXS5kZXNjcmlwdGlvbiA9IG5vZGUuZGVzY3JpcHRpb247XG5cdFx0XHRcdFx0XHQvLyBBZGQgQ29tbWVudFxuXHRcdFx0XHRcdFx0b3V0cHV0W3Byb21pc2VpZF0uY29tbWVudHNbbm9kZS5rZXldID0ge1xuXHRcdFx0XHRcdFx0XHRhdXRob3I6IG5vZGUuYXV0aG9yLFxuXHRcdFx0XHRcdFx0XHR0aW1lc3RhbXA6IG5vZGUudGltZXN0YW1wLFxuXHRcdFx0XHRcdFx0XHR0ZXh0OiBgU2V0IGRlc2NyaXB0aW9uOiAke25vZGUuZGVzY3JpcHRpb259YCxcblx0XHRcdFx0XHRcdFx0Z2VuZXJhdGVkOiB0cnVlXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAobm9kZS5sZXZlbCkge1xuXHRcdFx0XHRcdFx0b3V0cHV0W3Byb21pc2VpZF0ubGV2ZWwgPSBub2RlLmxldmVsO1xuXHRcdFx0XHRcdFx0Ly8gQWRkIENvbW1lbnRcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKG5vZGUuZHVlKSB7XG5cdFx0XHRcdFx0XHRvdXRwdXRbcHJvbWlzZWlkXS5kdWUgPSBub2RlLmR1ZTtcblx0XHRcdFx0XHRcdC8vIEFkZCBDb21tZW50XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdjb21tZW50Jzpcblx0XHRcdFx0XHRvdXRwdXRbcHJvbWlzZWlkXS5jb21tZW50c1tub2RlLmtleV0gPSB7XG5cdFx0XHRcdFx0XHRhdXRob3I6IG5vZGUuYXV0aG9yLFxuXHRcdFx0XHRcdFx0dGltZXN0YW1wOiBub2RlLnRpbWVzdGFtcCxcblx0XHRcdFx0XHRcdHRleHQ6IG5vZGUudGV4dFxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ2xpbmsnOlxuXHRcdFx0XHRcdGxldCBsaW5raWQgPSBub2RlLmxpbmtpZDtcblx0XHRcdFx0XHRpZiAoIShsaW5raWQgaW4gb3V0cHV0W3Byb21pc2VpZF0ubGlua3MpKSB7XG5cdFx0XHRcdFx0XHRvdXRwdXRbcHJvbWlzZWlkXS5saW5rc1tsaW5raWRdID0ge1xuXHRcdFx0XHRcdFx0XHRsaW5raWQ6IGxpbmtpZFxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdG91dHB1dFtwcm9taXNlaWRdLmNvbW1lbnRzW25vZGUua2V5XSA9IHtcblx0XHRcdFx0XHRcdFx0YXV0aG9yOiBub2RlLmF1dGhvcixcblx0XHRcdFx0XHRcdFx0dGltZXN0YW1wOiBub2RlLnRpbWVzdGFtcCxcblx0XHRcdFx0XHRcdFx0dGV4dDogYEFkZGVkIGxpbms6ICR7bm9kZS5uYW1lIHx8ICd1bnRpdGxlZCBsaW5rJ30uYCxcblx0XHRcdFx0XHRcdFx0Z2VuZXJhdGVkOiB0cnVlXG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAobm9kZS51cmwpIHtcblx0XHRcdFx0XHRcdG91dHB1dFtwcm9taXNlaWRdLmxpbmtzW2xpbmtpZF0udXJsID0gbm9kZS51cmw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChub2RlLm5hbWUpIHtcblx0XHRcdFx0XHRcdG91dHB1dFtwcm9taXNlaWRdLmxpbmtzW2xpbmtpZF0ubmFtZSA9IG5vZGUubmFtZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKG5vZGUucmVtb3ZlKSB7XG5cdFx0XHRcdFx0XHRkZWxldGUgb3V0cHV0W3Byb21pc2VpZF0ubGlua3NbbGlua2lkXTtcblx0XHRcdFx0XHRcdC8vIEFkZCBDb21tZW50XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdjb21wbGV0ZSc6XG5cdFx0XHRcdFx0b3V0cHV0W3Byb21pc2VpZF0uY29tcGxldGVkID0gbm9kZS5jb21wbGV0ZWQ7XG5cdFx0XHRcdFx0b3V0cHV0W3Byb21pc2VpZF0uZmluaXNoZWQgPSBub2RlLnRpbWVzdGFtcDtcblx0XHRcdFx0XHQvLyBBZGQgQ29tbWVudFxuXHRcdFx0XHRcdG91dHB1dFtwcm9taXNlaWRdLmNvbW1lbnRzW25vZGUua2V5XSA9IHtcblx0XHRcdFx0XHRcdGF1dGhvcjogbm9kZS5hdXRob3IsXG5cdFx0XHRcdFx0XHR0aW1lc3RhbXA6IG5vZGUudGltZXN0YW1wLFxuXHRcdFx0XHRcdFx0dGV4dDogYE1hcmtlZCBhcyAke25vZGUuY29tcGxldGVkID8gJ2NvbXBsZXRlJyA6ICdpbmNvbXBsZXRlJ30uYCxcblx0XHRcdFx0XHRcdGdlbmVyYXRlZDogdHJ1ZVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cblx0XHR9KTtcblx0fVxuXHRyZXR1cm4gb3V0cHV0O1xufVxuXG5mdW5jdGlvbiBwcm9tcHRMaW5rRGF0YVRoZW4obWVzc2FnZSwgY2FsbGJhY2ssIGluUHJlZmlsbCkge1xuXHRsZXQgcHJlZmlsbCA9IGluUHJlZmlsbCB8fCB7fTtcblx0dmV4LmRpYWxvZy5wcm9tcHQoe1xuXHRcdG1lc3NhZ2U6IG1lc3NhZ2UsXG5cdFx0dmFsdWU6IHByZWZpbGwudXJsLFxuXHRcdGNhbGxiYWNrOiAodXJsKSA9PiB7XG5cdFx0XHRpZiAodXJsKSB7XG5cdFx0XHRcdHZleC5kaWFsb2cucHJvbXB0KHtcblx0XHRcdFx0XHRtZXNzYWdlOiAnV2hhdCBpcyB0aGUgbmFtZSBvZiB0aGlzIGxpbms/Jyxcblx0XHRcdFx0XHR2YWx1ZTogcHJlZmlsbC5uYW1lLFxuXHRcdFx0XHRcdGNhbGxiYWNrOiAobmFtZSkgPT4ge1xuXHRcdFx0XHRcdFx0aWYgKHVybCAmJiBuYW1lKSB7XG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrKHVybCwgbmFtZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBjaGVja1VzZXJQZXJtaXNzaW9uKHRpZCwgdGVhbSwgbWVtYmVycywgdXNlcikge1xuXHQvKnJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cblx0fSk7Ki9cblxuXHRpZiAoaXNNZW50b3IoKSkge1xuXHRcdGNvbnNvbGUubG9nKCdpbiBtZW50b3IgbW9kZScpXG5cdFx0ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdtZW50b3JpbmcnKTtcblx0XHRsZXQgZWRpdGFibGVOb2RlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tjb250ZW50ZWRpdGFibGU9dHJ1ZV0nKVxuXHRcdGZvciAobGV0IG4gPSAwOyBuIDwgZWRpdGFibGVOb2Rlcy5sZW5ndGg7IG4rKykge1xuXHRcdFx0ZWRpdGFibGVOb2Rlc1tuXS5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnRlZGl0YWJsZScsIGZhbHNlKTtcblx0XHR9XG5cdH0gXG5cblx0bGV0IHVpZCA9IGRhdGFiYXNlLmdldEN1cnJlbnRVc2VyKCkudWlkO1xuXHRpZiAodWlkIGluIG1lbWJlcnMgfHwgaXNNZW50b3IoKSkge1xuXHRcdGlmIChPYmplY3Qua2V5cyh0ZWFtKS5sZW5ndGggPiAwKSB7XG5cdFx0XHRtYWluUHJvbWlzZVRhYih0aWQsIHRlYW0sIG1lbWJlcnMsIHVzZXIpO1xuXHRcdH1cblx0fSBlbHNlIGlmIChwYXJhbXMuY29kZSkge1xuXHRcdHZleC5kaWFsb2cuY29uZmlybSh7XG5cdFx0XHRtZXNzYWdlOiBgRG8geW91IHdhbnQgdG8gam9pbiAke3RlYW0ubmFtZSB8fCAndGhpcyB0ZWFtJ30/YCxcblx0XHRcdGJ1dHRvbnM6IFtcblx0XHRcdFx0JC5leHRlbmQoe30sIHZleC5kaWFsb2cuYnV0dG9ucy5ZRVMsIHt0ZXh0OiAnWWVzJ30pLFxuXHRcdFx0XHQkLmV4dGVuZCh7fSwgdmV4LmRpYWxvZy5idXR0b25zLk5PLCB7dGV4dDogJ05vJ30pXG5cdFx0XHRdLFxuXHRcdFx0Y2FsbGJhY2s6ICh5ZXMpID0+IHtcblx0XHRcdFx0aWYgKHllcykge1xuXHRcdFx0XHRcdGRhdGFiYXNlLmpvaW5UZWFtKHRpZCwgdWlkLCBwYXJhbXMuY29kZSkudGhlbigocmVzKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAocmVzLnN1Y2Nlc3MpIHtcblx0XHRcdFx0XHRcdFx0dmV4LmRpYWxvZy5hbGVydCh7XG5cdFx0XHRcdFx0XHRcdFx0bWVzc2FnZTogYENvbmdyYXR1bGF0aW9ucywgeW91IGp1c3Qgam9pbmVkICR7dGVhbS5uYW1lIHx8ICd5b3VyIG5ldyB0ZWFtJ30hYFxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0aWYgKE9iamVjdC5rZXlzKHRlYW0pLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdFx0XHRyZW5kZXJUZWFtQ2hhcnRlcih0aWQsIHRlYW0sIG1lbWJlcnMpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJy9tZS5odG1sJztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJy9tZS5odG1sJztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5sb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL21lLmh0bWwnO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGlzTWVudG9yKCkge1xuXHRyZXR1cm4gTUVOVE9SX01PREU7XG59XG5cbmZ1bmN0aW9uIHJlcG9ydEVycm9yVG9Vc2VyKGVycikge1xuXHRjb25zb2xlLmVycm9yKGVycik7XG5cdHZleC5kaWFsb2cuYWxlcnQoZXJyICsgJycpO1xufVxuXG5mdW5jdGlvbiBnZXRRdWVyeVBhcmFtcyhxcykge1xuXHRxcyA9IHFzLnNwbGl0KCcrJykuam9pbignICcpO1xuXHR2YXIgcGFyYW1zID0ge30sXG5cdFx0dG9rZW5zLFxuXHRcdHJlID0gL1s/Jl0/KFtePV0rKT0oW14mXSopL2c7XG5cdHdoaWxlICh0b2tlbnMgPSByZS5leGVjKHFzKSkge1xuXHRcdHBhcmFtc1tkZWNvZGVVUklDb21wb25lbnQodG9rZW5zWzFdKV0gPSBkZWNvZGVVUklDb21wb25lbnQodG9rZW5zWzJdKTtcblx0fVxuXHRyZXR1cm4gcGFyYW1zO1xufVxuXG5mdW5jdGlvbiBmaWxsVGV4dChjbGFzc05hbWUsIHRleHQpIHtcblx0bGV0IHNwYW5zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjbGFzc05hbWUpO1xuXHRmb3IgKGxldCBzID0gMDsgcyA8IHNwYW5zLmxlbmd0aDsgcysrKSB7XG5cdFx0c3BhbnNbc10uaW5uZXJUZXh0ID0gdGV4dDtcblx0fVxufVxuXG5mdW5jdGlvbiBmaWxsU3JjKGNsYXNzTmFtZSwgdGV4dCkge1xuXHRsZXQgc3BhbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNsYXNzTmFtZSk7XG5cdGZvciAobGV0IHMgPSAwOyBzIDwgc3BhbnMubGVuZ3RoOyBzKyspIHtcblx0XHRzcGFuc1tzXS5zcmMgPSB0ZXh0O1xuXHR9XG59XG5cbmxldCBjYW5jZWxzID0gMDtcbmZ1bmN0aW9uIGluaXRXaXRoVGVhbUNvZGUoY2FsbGJhY2spIHtcblx0aWYgKFRFQU1fSUQpIHtcblx0XHRjYWxsYmFjayhURUFNX0lEKTtcblx0fSBlbHNlIHtcblx0XHR2ZXguZGlhbG9nLnByb21wdCh7XG5cdFx0XHRtZXNzYWdlOiAnRW50ZXIgeW91ciB0ZWFtIGNvZGU6Jyxcblx0XHRcdGNhbGxiYWNrOiAoY29kZSkgPT4ge1xuXHRcdFx0XHRpZiAoY29kZSkge1xuXHRcdFx0XHRcdGNhbGxiYWNrKGNvZGUpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGNhbmNlbHMgPj0gMSkge1xuXHRcdFx0XHRcdHdpbmRvdy5sb2NhdGlvbiA9ICcuLyc7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y2FuY2VscysrO1xuXHRcdFx0XHRcdGluaXRXaXRoVGVhbUNvZGUoY2FsbGJhY2spO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cbn1cblxuIiwibGV0IFZpZXdzID0gKCkgPT4ge1xuXG5cdGxldCB2aWV3cyA9IHtcblxuXHRcdGdldFJvbGVBbmRVcGRhdGVUaWxlOiAobW9kZWwpID0+IHtcblx0XHRcdGxldCBwb3N0ZWQgPSBuZXcgRGF0ZShtb2RlbC50aW1lc3RhbXApO1xuXHRcdFx0bGV0IGRhdGVGb3JtYXQgPSBtb21lbnQocG9zdGVkKS5mb3JtYXQoJ00vRCBoOm1tIEEnKTtcblx0XHRcdGxldCBkaWZmID0gbW9tZW50KERhdGUubm93KCkpLmRpZmYobW9tZW50KG1vZGVsLnRpbWVzdGFtcCkpO1xuXHRcdFx0bGV0IGRheXNTaW5jZUxhc3RVcGRhdGUgPSBtb21lbnQuZHVyYXRpb24oZGlmZikuYXNEYXlzKCk7XG5cdFx0XHRsZXQgdGFnQ2xhc3MgPSAnaXMtc3VjY2Vzcyc7XG5cdFx0XHRpZiAoZGF5c1NpbmNlTGFzdFVwZGF0ZSA+PSA1KSB7XG5cdFx0XHRcdHRhZ0NsYXNzID0gJ2lzLWRhbmdlcic7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmIChkYXlzU2luY2VMYXN0VXBkYXRlID49IDMpIHtcblx0XHRcdFx0dGFnQ2xhc3MgPSAnaXMtd2FybmluZyc7XG5cdFx0XHR9XG5cdFx0XHRsZXQgaHRtbCA9IGBcblx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtcGFyZW50IGlzLXZlcnRpY2FsIGlzLTVcIj5cblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1jaGlsZFwiPlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cIm1lZGlhXCI+XG5cdFx0XHRcdFx0XHRcdDxmaWd1cmUgY2xhc3M9XCJtZWRpYS1sZWZ0XCI+XG5cdFx0XHRcdFx0XHRcdFx0PHAgY2xhc3M9XCJpbWFnZSBpcy00OHg0OFwiPlxuXHRcdFx0XHRcdFx0XHRcdFx0PGltZyBzcmM9XCIke21vZGVsLmltYWdlfVwiPlxuXHRcdFx0XHRcdFx0XHRcdDwvcD5cblx0XHRcdFx0XHRcdFx0PC9maWd1cmU+XG5cdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJtZWRpYS1jb250ZW50IGNvbnRlbnRcIj5cblx0XHRcdFx0XHRcdFx0XHQ8aDMgY2xhc3M9XCJ0aXRsZSBpcy01XCI+JHttb2RlbC5uYW1lfTwvaDM+XG5cdFx0XHRcdFx0XHRcdFx0PHAgY2xhc3M9XCJzdWJ0aXRsZSBpcy02XCI+JHttb2RlbC5yb2xlfTwvcD5cblx0XHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXBhcmVudCBpcy12ZXJ0aWNhbCBpcy03XCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtY2hpbGRcIj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG5cdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwidGFnICR7dGFnQ2xhc3N9XCI+JHtkYXRlRm9ybWF0fTwvc3Bhbj4gJHttb2RlbC51cGRhdGV9XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PC9kaXY+YDtcblx0XHRcdGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0ZGl2LmNsYXNzTGlzdC5hZGQoJ3RpbGUnKTtcblx0XHRcdFx0ZGl2LmlubmVySFRNTCA9IGh0bWw7XG5cdFx0XHRyZXR1cm4gZGl2O1xuXHRcdH0sXG5cblx0XHRnZXRSb2xlVGlsZTogKG1vZGVsKSA9PiB7XG5cdFx0XHRsZXQgZWRpdFNlY3Rpb24gPSBgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cblx0XHRcdFx0PGgzIGNsYXNzPVwidGl0bGUgaXMtNVwiPiR7bW9kZWwucm9sZX08L2gzPlxuXHRcdFx0XHQ8cCBjbGFzcz1cInN1YnRpdGxlIGlzLTZcIj4ke21vZGVsLnJlc3BvbnNpYmlsaXR5fTwvcD5cblx0XHRcdDwvZGl2PmA7XG5cdFx0XHRpZiAobW9kZWwuZWRpdGFibGUpIHtcblx0XHRcdFx0ZWRpdFNlY3Rpb24gPSBgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cblx0XHRcdFx0XHQ8aDMgaWQ9XCJteS10aXRsZVwiIGNsYXNzPVwidGl0bGUgaXMtNVwiIGNvbnRlbnRlZGl0YWJsZT1cInRydWVcIj4ke21vZGVsLnJvbGV9PC9oMz5cblx0XHRcdFx0XHQ8cCBpZD1cIm15LXJlc3BvbnNpYmlsaXR5XCIgY2xhc3M9XCJzdWJ0aXRsZSBpcy02XCIgY29udGVudGVkaXRhYmxlPVwidHJ1ZVwiPiR7bW9kZWwucmVzcG9uc2liaWxpdHl9PC9wPlxuXHRcdFx0XHRcdDxidXR0b24gaWQ9XCJteS1yb2xlLXNhdmVcIiBjbGFzcz1cImJ1dHRvbiBpcy1wcmltYXJ5IGlzLW91dGxpbmVkIGlzLWhpZGRlbi10by1tZW50b3JcIj5cblx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwiaWNvblwiPlxuXHRcdFx0XHRcdFx0XHQ8aSBjbGFzcz1cImZhIGZhLWVkaXRcIj48L2k+XG5cdFx0XHRcdFx0XHQ8L3NwYW4+XG5cdFx0XHRcdFx0XHQ8c3Bhbj5TYXZlIFJvbGU8L3NwYW4+XG5cdFx0XHRcdFx0PC9idXR0b24+XG5cdFx0XHRcdDwvZGl2PmA7XG5cdFx0XHR9XG5cdFx0XHRsZXQgaHRtbCA9IGBcblx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtcGFyZW50IGlzLXZlcnRpY2FsIGlzLTVcIj5cblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1jaGlsZFwiPlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cIm1lZGlhXCI+XG5cdFx0XHRcdFx0XHRcdDxmaWd1cmUgY2xhc3M9XCJtZWRpYS1sZWZ0XCI+XG5cdFx0XHRcdFx0XHRcdFx0PHAgY2xhc3M9XCJpbWFnZSBpcy00OHg0OFwiPlxuXHRcdFx0XHRcdFx0XHRcdFx0PGltZyBzcmM9XCIke21vZGVsLmltYWdlfVwiPlxuXHRcdFx0XHRcdFx0XHRcdDwvcD5cblx0XHRcdFx0XHRcdFx0PC9maWd1cmU+XG5cdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG5cdFx0XHRcdFx0XHRcdFx0PGgzIGNsYXNzPVwidGl0bGUgaXMtNVwiPiR7bW9kZWwubmFtZX08L2gzPlxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtcGFyZW50IGlzLXZlcnRpY2FsIGlzLTdcIj5cblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1jaGlsZFwiPlxuXHRcdFx0XHRcdFx0JHtlZGl0U2VjdGlvbn1cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PC9kaXY+YDtcblx0XHRcdGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0ZGl2LmNsYXNzTGlzdC5hZGQoJ3RpbGUnKTtcblx0XHRcdFx0ZGl2LmlubmVySFRNTCA9IGh0bWw7XG5cdFx0XHRyZXR1cm4gZGl2O1xuXHRcdH0sXG5cblx0XHRnZXRSb2xlVGVtcGxhdGVUaWxlOiAobW9kZWwpID0+IHtcblx0XHRcdGxldCBlZGl0U2VjdGlvbiA9IGA8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuXHRcdFx0XHQ8aDMgY2xhc3M9XCJ0aXRsZSBpcy01XCI+JHttb2RlbC5yb2xlfTwvaDM+XG5cdFx0XHRcdDxwIGNsYXNzPVwic3VidGl0bGUgaXMtNlwiPiR7bW9kZWwucmVzcG9uc2liaWxpdHl9PC9wPlxuXHRcdFx0PC9kaXY+YDtcblx0XHRcdGxldCBlZGl0QnV0dG9uID0gYGA7XG5cdFx0XHRpZiAobW9kZWwuZWRpdGFibGUpIHtcblx0XHRcdFx0ZWRpdFNlY3Rpb24gPSBgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cblx0XHRcdFx0XHQ8aDMgZGF0YS1iaW5kPVwiZmllbGQtcm9sZVwiIGNsYXNzPVwidGl0bGUgaXMtNVwiIGNvbnRlbnRlZGl0YWJsZT1cInRydWVcIj4ke21vZGVsLnJvbGV9PC9oMz5cblx0XHRcdFx0XHQ8cCBkYXRhLWJpbmQ9XCJmaWVsZC1yZXNwb25zaWJpbGl0eVwiIGNsYXNzPVwic3VidGl0bGUgaXMtNlwiIGNvbnRlbnRlZGl0YWJsZT1cInRydWVcIj4ke21vZGVsLnJlc3BvbnNpYmlsaXR5fTwvcD5cblx0XHRcdFx0PC9kaXY+YDtcblx0XHRcdFx0ZWRpdEJ1dHRvbiA9IGBcblx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtcGFyZW50IGlzLXZlcnRpY2FsIGlzLTRcIj5cblx0XHRcdFx0XHQ8YnV0dG9uIGRhdGEtYmluZD1cImJ1dHRvbi1zYXZlXCIgY2xhc3M9XCJidXR0b24gaXMtcHJpbWFyeSBpcy1vdXRsaW5lZCBpcy1oaWRkZW4tdG8tbWVudG9yXCI+XG5cdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cImljb25cIj5cblx0XHRcdFx0XHRcdFx0PGkgY2xhc3M9XCJmYSBmYS1lZGl0XCI+PC9pPlxuXHRcdFx0XHRcdFx0PC9zcGFuPlxuXHRcdFx0XHRcdFx0PHNwYW4+U2F2ZSBSb2xlPC9zcGFuPlxuXHRcdFx0XHRcdDwvYnV0dG9uPlxuXHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0YDtcblx0XHRcdH1cblx0XHRcdGxldCBodG1sID0gYFxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1wYXJlbnQgaXMtdmVydGljYWwge21vZGVsLmVkaXRhYmxlID8gJ2lzLTgnIDogJ2lzLTEyJ31cIj5cblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1jaGlsZFwiPlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cIm1lZGlhXCI+XG5cdFx0XHRcdFx0XHRcdDxmaWd1cmUgY2xhc3M9XCJtZWRpYS1sZWZ0XCI+XG5cdFx0XHRcdFx0XHRcdFx0PGRpdiBkYXRhLWJpbmQ9XCJmaWVsZC1pY29uXCIgY2xhc3M9XCJpbWFnZSBpcy00OHg0OCBpY29uLWltYWdlXCI+XG5cdFx0XHRcdFx0XHRcdFx0XHQ8aSBjbGFzcz1cImZhIGZhLSR7bW9kZWwuaWNvbiB8fCAndXNlcid9XCI+PC9pPlxuXHRcdFx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0XHQ8L2ZpZ3VyZT5cblx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtY2hpbGRcIj5cblx0XHRcdFx0XHRcdFx0XHQke2VkaXRTZWN0aW9ufVxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0JHtlZGl0QnV0dG9ufVxuXHRcdFx0YDtcblx0XHRcdGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0ZGl2LmNsYXNzTGlzdC5hZGQoJ3RpbGUnKTtcblx0XHRcdFx0ZGl2LmlubmVySFRNTCA9IGh0bWw7XG5cdFx0XHRpZiAobW9kZWwuZWRpdGFibGUgJiYgbW9kZWwub25TYXZlKSB7XG5cdFx0XHRcdGxldCBidXR0b24gPSBkaXYucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtYmluZD1idXR0b24tc2F2ZV0nKVswXTtcblx0XHRcdFx0bGV0IHJvbGUgPSBkaXYucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtYmluZD1maWVsZC1yb2xlXScpWzBdO1xuXHRcdFx0XHRsZXQgcmVzcCA9IGRpdi5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1iaW5kPWZpZWxkLXJlc3BvbnNpYmlsaXR5XScpWzBdO1xuXHRcdFx0XHRidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0XHRcdG1vZGVsLm9uU2F2ZSh7XG5cdFx0XHRcdFx0XHRlOiBlLFxuXHRcdFx0XHRcdFx0bW9kZWw6IG1vZGVsLFxuXHRcdFx0XHRcdFx0cm9sZTogcm9sZS5pbm5lclRleHQsXG5cdFx0XHRcdFx0XHRyZXNwb25zaWJpbGl0eTogcmVzcC5pbm5lclRleHRcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGxldCBpY29uRWRpdCA9IGRpdi5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1iaW5kPWZpZWxkLWljb25dJylbMF07XG5cdFx0XHRcdGljb25FZGl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdFx0XHRtb2RlbC5vbkljb25FZGl0KHtcblx0XHRcdFx0XHRcdGU6IGUsXG5cdFx0XHRcdFx0XHRtb2RlbDogbW9kZWxcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZGl2O1xuXHRcdH0sXG5cblx0XHRnZXRQcm9ncmVzc1VwZGF0ZTogKG1vZGVsKSA9PiB7XG5cdFx0XHRsZXQgcG9zdGVkID0gbmV3IERhdGUobW9kZWwudGltZXN0YW1wKTtcblx0XHRcdGxldCBkYXRlRm9ybWF0ID0gbW9tZW50KHBvc3RlZCkuZm9ybWF0KCdNL0QgaDptbSBBJyk7XG5cdFx0XHRsZXQgZGlmZiA9IG1vbWVudChEYXRlLm5vdygpKS5kaWZmKG1vbWVudChtb2RlbC50aW1lc3RhbXApKTtcblx0XHRcdGxldCBkYXlzU2luY2VMYXN0VXBkYXRlID0gbW9tZW50LmR1cmF0aW9uKGRpZmYpLmFzRGF5cygpO1xuXHRcdFx0bGV0IHRhZ0NsYXNzID0gJ2lzLXN1Y2Nlc3MnO1xuXHRcdFx0aWYgKGRheXNTaW5jZUxhc3RVcGRhdGUgPj0gNSkge1xuXHRcdFx0XHR0YWdDbGFzcyA9ICdpcy1kYW5nZXInO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoZGF5c1NpbmNlTGFzdFVwZGF0ZSA+PSAzKSB7XG5cdFx0XHRcdHRhZ0NsYXNzID0gJ2lzLXdhcm5pbmcnO1xuXHRcdFx0fVxuXHRcdFx0bGV0IGh0bWwgPSBgXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXBhcmVudCBpcy12ZXJ0aWNhbCBpcy01XCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtY2hpbGRcIj5cblx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwidGFncyBoYXMtYWRkb25zXCI+XG5cdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwidGFnICR7dGFnQ2xhc3N9IGlzLW1lZGl1bVwiPiR7ZGF0ZUZvcm1hdH08L3NwYW4+XG5cdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwidGFnIGlzLW1lZGl1bVwiPlxuXHRcdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwiaW1hZ2UgaW1hZ2UtdGFnLXJvdW5kZWQgaXMtMzJ4MzJcIj5cblx0XHRcdFx0XHRcdFx0XHRcdDxpbWcgc3JjPVwiJHttb2RlbC5pbWFnZX1cIj5cblx0XHRcdFx0XHRcdFx0XHQ8L3NwYW4+XG5cdFx0XHRcdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJpcy1tZWRpdW1cIj5cblx0XHRcdFx0XHRcdFx0XHRcdCR7bW9kZWwubmFtZX1cblx0XHRcdFx0XHRcdFx0XHQ8L3NwYW4+XG5cdFx0XHRcdFx0XHRcdDwvc3Bhbj5cblx0XHRcdFx0XHRcdDwvc3Bhbj5cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXBhcmVudCBpcy12ZXJ0aWNhbCBpcy03XCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtY2hpbGRcIj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG5cdFx0XHRcdFx0XHRcdCR7bW9kZWwudXBkYXRlfVxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PmA7XG5cdFx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCd0aWxlJyk7XG5cdFx0XHRcdGRpdi5pbm5lckhUTUwgPSBodG1sO1xuXHRcdFx0cmV0dXJuIGRpdjtcblx0XHR9LFxuXG5cdFx0Z2V0TGlua0l0ZW06IChtb2RlbCkgPT4ge1xuXHRcdFx0bGV0IGljb24gPSAnZmlsZSc7XG5cdFx0XHRpZiAobW9kZWwudXJsLmluZGV4T2YoJ2RvY3MuZ29vZ2xlJykgPiAtMSkge1xuXHRcdFx0XHRpY29uID0gJ2dvb2dsZSc7XG5cdFx0XHRcdGlmIChtb2RlbC51cmwuaW5kZXhPZignZG9jcy5nb29nbGUuY29tL2RvY3VtZW50JykgPiAtMSkge1xuXHRcdFx0XHRcdGljb24gPSAnZmlsZS10ZXh0Jztcblx0XHRcdFx0fSBlbHNlIGlmIChtb2RlbC51cmwuaW5kZXhPZignZG9jcy5nb29nbGUuY29tL3NwcmVhZHNoZWV0cycpID4gLTEpIHtcblx0XHRcdFx0XHRpY29uID0gJ3RhYmxlJztcblx0XHRcdFx0fSBlbHNlIGlmIChtb2RlbC51cmwuaW5kZXhPZignZG9jcy5nb29nbGUuY29tL3ByZXNlbnRhdGlvbicpID4gLTEpIHtcblx0XHRcdFx0XHRpY29uID0gJ3NsaWRlc2hhcmUnO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKG1vZGVsLnVybC5pbmRleE9mKCdvbW5pcG9pbnRtZW50LmNvbS9tZWV0aW5nJykgPiAtMSkge1xuXHRcdFx0XHRpY29uID0gJ2NhbGVuZGFyJztcblx0XHRcdH0gZWxzZSBpZiAobW9kZWwudXJsLmluZGV4T2YoJ2dpdGh1Yi5jb20nKSA+IC0xKSB7XG5cdFx0XHRcdGljb24gPSAnZ2l0aHViJztcblx0XHRcdH0gZWxzZSBpZiAobW9kZWwudXJsLmluZGV4T2YoJ3lvdXR1YmUuY29tJykgPiAtMSkge1xuXHRcdFx0XHRpY29uID0gJ3lvdXR1YmUtcGxheSc7XG5cdFx0XHR9IGVsc2UgaWYgKG1vZGVsLnVybC5pbmRleE9mKCd2aW1lby5jb20nKSA+IC0xKSB7XG5cdFx0XHRcdGljb24gPSAndmltZW8nO1xuXHRcdFx0fSBlbHNlIGlmIChtb2RlbC51cmwuaW5kZXhPZignY29kZXNoYXJlLmlvJykgPiAtMSB8fCBtb2RlbC51cmwuaW5kZXhPZignY29kZXBlbi5pbycpID4gLTEpIHtcblx0XHRcdFx0aWNvbiA9ICdjb2RlLWZvcmsnO1xuXHRcdFx0fVxuXHRcdFx0bGV0IGh0bWwgPSBgXG5cdFx0XHRcdDxhIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9XCIke21vZGVsLnVybH1cIj5cblx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cImljb25cIj5cblx0XHRcdFx0XHRcdDxpIGNsYXNzPVwiZmEgZmEtJHtpY29ufVwiPjwvaT5cblx0XHRcdFx0XHQ8L3NwYW4+XG5cdFx0XHRcdFx0PHNwYW4+JHttb2RlbC5uYW1lfTwvc3Bhbj5cblx0XHRcdFx0PC9hPlxuXHRcdFx0XHQ8YSBjbGFzcz1cImlzLWRhbmdlciBpcy1oaWRkZW4tdG8tbWVudG9yXCI+XG5cdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJpY29uIGVkaXQtbGlua1wiIGRhdGEtZm9yPVwiJHttb2RlbC5rZXl9XCI+XG5cdFx0XHRcdFx0XHQ8aSBjbGFzcz1cImZhIGZhLWVkaXRcIj48L2k+XG5cdFx0XHRcdFx0PC9zcGFuPlxuXHRcdFx0XHQ8L2E+XG5cdFx0XHRgO1xuXHRcdFx0bGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRkaXYuY2xhc3NMaXN0LmFkZCgndGVhbS1saW5rJyk7XG5cdFx0XHRcdGRpdi5pbm5lckhUTUwgPSBodG1sO1xuXHRcdFx0cmV0dXJuIGRpdjtcblx0XHR9LFxuXG5cdFx0Z2V0VGVhbVRpbGU6IChtb2RlbCkgPT4ge1xuXHRcdFx0bGV0IG9yaWdpbiA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XG5cdFx0XHRsZXQgbGluayA9IGAke29yaWdpbn0vY2hhcnRlci5odG1sP3RlYW09JHttb2RlbC50aWR9YDtcblx0XHRcdGxldCB0YWcgPSBgPHNwYW4gY2xhc3M9XCJ0YWcgaXMtd2FybmluZ1wiPlRlbXBsYXRlPC9zcGFuPmA7XG5cdFx0XHRsZXQgaHRtbCA9IGBcblx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtdmVydGljYWxcIj5cblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiYm94XCI+XG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZVwiPlxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuXHRcdFx0XHRcdFx0XHRcdDxoMyBjbGFzcz1cInRpdGxlXCI+JHttb2RlbC5uYW1lfSAke21vZGVsLmlzVGVtcGxhdGUgPyB0YWcgOiAnJ308L2gzPlxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGVcIj5cblx0XHRcdFx0XHRcdFx0PGEgaHJlZj1cIiR7bGlua31cIiBjbGFzcz1cImJ1dHRvbiBpcy1wcmltYXJ5IGlzLW91dGxpbmVkXCI+VmlldyBUZWFtIENoYXJ0ZXI8L2E+XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PC9kaXY+YDtcblx0XHRcdGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0ZGl2LmNsYXNzTGlzdC5hZGQoJ2NvbHVtbicpO1xuXHRcdFx0XHRkaXYuY2xhc3NMaXN0LmFkZCgnaXMtNCcpO1xuXHRcdFx0XHRkaXYuaW5uZXJIVE1MID0gaHRtbDtcblx0XHRcdHJldHVybiBkaXY7XG5cdFx0fSxcblxuXHRcdGdldENsYXNzVGlsZTogKG1vZGVsKSA9PiB7XG5cdFx0XHRsZXQgb3JpZ2luID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbjtcblx0XHRcdGxldCBjbGFzc0xpbmsgPSBgJHtvcmlnaW59L2NsYXNzLmh0bWw/Y2xhc3M9JHttb2RlbC5jaWR9YDtcblx0XHRcdGxldCBsaXN0ID0gT2JqZWN0LmtleXMobW9kZWwudGVhbXMpLmZpbHRlcigodGlkKSA9PiB7XG5cdFx0XHRcdHJldHVybiBPYmplY3Qua2V5cyhtb2RlbC50ZWFtc1t0aWRdKS5sZW5ndGggPiAwO1xuXHRcdFx0fSkubWFwKCh0aWQpID0+IHtcblx0XHRcdFx0bGV0IHRlYW0gPSBtb2RlbC50ZWFtc1t0aWRdO1xuXHRcdFx0XHR0ZWFtLnRpZCA9IHRpZDtcblx0XHRcdFx0cmV0dXJuIHRlYW07XG5cdFx0XHR9KTtcblx0XHRcdGxldCBuID0gbGlzdC5sZW5ndGg7XG5cdFx0XHRsZXQgaXRlbXMgPSBsaXN0Lm1hcCgodGVhbSkgPT4ge1xuXHRcdFx0XHRsZXQgdGVhbUxpbmsgPSBgJHtvcmlnaW59L2NoYXJ0ZXIuaHRtbD90ZWFtPSR7dGVhbS50aWR9Jm1lbnRvcj10cnVlYDtcblx0XHRcdFx0bGV0IGl0ZW1IVE1MID0gYFxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb2x1bW4gaXMtNFwiPlxuXHRcdFx0XHRcdFx0PGEgaHJlZj0ke3RlYW1MaW5rfSBjbGFzcz1cImJ1dHRvbiBpcy1wcmltYXJ5IGlzLW91dGxpbmVkIGlzLWZ1bGx3aWR0aFwiPiR7dGVhbS5uYW1lfTwvYT5cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0YDtcblx0XHRcdFx0cmV0dXJuIGl0ZW1IVE1MO1xuXHRcdFx0fSk7XG5cdFx0XHRsZXQgaHRtbCA9IGBcblx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtdmVydGljYWxcIj5cblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBib3ggaXMtY2hpbGRcIj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG5cdFx0XHRcdFx0XHRcdDxoMyBjbGFzcz1cInRpdGxlXCI+JHttb2RlbC5uYW1lfTwvaDM+XG5cdFx0XHRcdFx0XHRcdDxwIGNsYXNzPVwic3VidGl0bGVcIj4ke259IHRlYW0ke24gPT09IDEgPyAnJyA6ICdzJ30gfCBDb2RlOiAke21vZGVsLmNpZH08L3A+XG5cdFx0XHRcdFx0XHRcdDxhIGhyZWY9XCIke2NsYXNzTGlua31cIiBjbGFzcz1cImJ1dHRvbiBpcy1wcmltYXJ5IGlzLW91dGxpbmVkXCI+VmlldyBDbGFzcyBEYXNoYm9hcmQ8L2E+XG5cdFx0XHRgO1xuXHRcdFx0XHRcdFx0XHQvKjxkaXYgY2xhc3M9XCJjb2x1bW5zIGlzLW11bHRpbGluZVwiPlxuXHRcdFx0XHRcdFx0XHRcdCR7aXRlbXMuam9pbignJyl9XG5cdFx0XHRcdFx0XHRcdDwvZGl2PiovXG5cdFx0XHRodG1sICs9IGBcblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8L2Rpdj5gO1xuXHRcdFx0XHQvLzxhIGhyZWY9XCIke2xpbmt9XCIgY2xhc3M9XCJidXR0b24gaXMtcHJpbWFyeSBpcy1vdXRsaW5lZFwiPlZpZXcgQ2xhc3MgUHJvZ3Jlc3M8L2E+XG5cdFx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCdjb2x1bW4nKTtcblx0XHRcdFx0ZGl2LmNsYXNzTGlzdC5hZGQoJ2lzLTQnKTtcblx0XHRcdFx0ZGl2LmlubmVySFRNTCA9IGh0bWw7XG5cdFx0XHRyZXR1cm4gZGl2O1xuXHRcdH0sXG5cblx0XHRnZXRVc2VyVGlsZTogKG1vZGVsKSA9PiB7XG5cdFx0XHRsZXQgaHRtbCA9IGBcblx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtY2hpbGRcIj5cblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwibWVkaWFcIj5cblx0XHRcdFx0XHRcdDxmaWd1cmUgY2xhc3M9XCJtZWRpYS1sZWZ0XCI+XG5cdFx0XHRcdFx0XHRcdDxwIGNsYXNzPVwiaW1hZ2UgaXMtNDh4NDggaW1hZ2UtdGFnLXJvdW5kZWRcIj5cblx0XHRcdFx0XHRcdFx0XHQ8aW1nIHNyYz1cIiR7bW9kZWwuaW1hZ2V9XCI+XG5cdFx0XHRcdFx0XHRcdDwvcD5cblx0XHRcdFx0XHRcdDwvZmlndXJlPlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cblx0XHRcdFx0XHRcdFx0PGgzIGNsYXNzPVwidGl0bGUgaXMtNVwiPiR7bW9kZWwubmFtZX08L2gzPlxuXHRcdFx0XHRcdFx0XHQ8cCBjbGFzcz1cInN1YnRpdGxlIGlzLTZcIj4ke21vZGVsLnN1YnRpdGxlfTwvcD5cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8L2Rpdj5cblx0XHRcdGA7XG5cdFx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCdjb2x1bW4nKTtcblx0XHRcdFx0ZGl2LmNsYXNzTGlzdC5hZGQoJ2lzLTQnKTtcblx0XHRcdFx0ZGl2LmlubmVySFRNTCA9IGh0bWw7XG5cdFx0XHRyZXR1cm4gZGl2O1xuXHRcdH0sXG5cblx0XHRnZXRDbGFzc1RlYW1UYWJsZTogKG1vZGVsKSA9PiB7XG5cdFx0XHRsZXQgaHRtbCA9IGBcblx0XHRcdFx0PHRoZWFkPlxuXHRcdFx0XHRcdDx0cj5cblx0XHRcdFx0XHRcdDx0aD5UZWFtIE5hbWU8L3RoPlxuXHRcdFx0XHRcdFx0PHRoPk1lbWJlcnM8L3RoPlxuXHRcdFx0XHRcdFx0PHRoPkNoYXJ0ZXIgRWRpdHM8L3RoPlxuXHRcdFx0XHRcdFx0PHRoPlByb2dyZXNzIFVwZGF0ZXM8L3RoPlxuXHRcdFx0XHRcdFx0PHRoPkxhc3QgQWN0aXZlPC90aD5cblx0XHRcdFx0XHRcdDx0aD5WaWV3IFRlYW08L3RoPlxuXHRcdFx0XHRcdDwvdHI+XG5cdFx0XHRcdDwvdGhlYWQ+XG5cdFx0XHRcdDx0Ym9keT5cblx0XHRcdGA7XG5cdFx0XHRtb2RlbC50ZWFtcy5mb3JFYWNoKCh0ZWFtKSA9PiB7XG5cdFx0XHRcdGxldCB1cGRhdGVzID0gMDtcblx0XHRcdFx0Zm9yIChsZXQgdWlkIGluIHRlYW0udXBkYXRlcykge1xuXHRcdFx0XHRcdGZvciAobGV0IHVwaWQgaW4gdGVhbS51cGRhdGVzW3VpZF0pIHtcblx0XHRcdFx0XHRcdHVwZGF0ZXMrKztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0bGV0IGxpbmsgPSBgJHtvcmlnaW59L2NoYXJ0ZXIuaHRtbD90ZWFtPSR7dGVhbS50aWR9Jm1lbnRvcj10cnVlYDtcblx0XHRcdFx0bGV0IG1lbWJlcnMgPSB0ZWFtLm1lbWJlcnMgfHwge307XG5cdFx0XHRcdGh0bWwgKz0gYFxuXHRcdFx0XHRcdDx0cj5cblx0XHRcdFx0XHRcdDx0ZD4ke3RlYW0ubmFtZX08L3RkPlxuXHRcdFx0XHRcdFx0PHRkPiR7T2JqZWN0LmtleXMobWVtYmVycykubGVuZ3RofTwvdGQ+XG5cdFx0XHRcdFx0XHQ8dGQ+JHtPYmplY3Qua2V5cyh0ZWFtLmVkaXRzKS5sZW5ndGh9PC90ZD5cblx0XHRcdFx0XHRcdDx0ZD4ke3VwZGF0ZXN9PC90ZD5cblx0XHRcdFx0XHRcdDx0ZD4ke21vbWVudCh0ZWFtLmxhc3RBY2Nlc3MpLmZyb21Ob3coKX08L3RkPlxuXHRcdFx0XHRcdFx0PHRkPlxuXHRcdFx0XHRcdFx0XHQ8YSBocmVmPVwiJHtsaW5rfVwiIGNsYXNzPVwiYnV0dG9uIGlzLXByaW1hcnkgaXMtb3V0bGluZWRcIj5WaWV3IENoYXJ0ZXI8L2E+XG5cdFx0XHRcdFx0XHQ8L3RkPlxuXHRcdFx0XHRcdDwvdHI+XG5cdFx0XHRcdGA7XG5cdFx0XHR9KTtcblx0XHRcdGh0bWwgKz0gYFxuXHRcdFx0XHQ8L3Rib2R5PlxuXHRcdFx0YDtcblx0XHRcdGxldCB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7XG5cdFx0XHRcdHRhYmxlLmNsYXNzTGlzdC5hZGQoJ3RhYmxlJyk7XG5cdFx0XHRcdHRhYmxlLmNsYXNzTGlzdC5hZGQoJ2lzLW5hcnJvdycpO1xuXHRcdFx0XHR0YWJsZS5jbGFzc0xpc3QuYWRkKCdpcy1mdWxsd2lkdGgnKTtcblx0XHRcdFx0dGFibGUuaW5uZXJIVE1MID0gaHRtbDtcblx0XHRcdHJldHVybiB0YWJsZTtcblx0XHR9LFxuXG5cdFx0Z2V0Q2xhc3NUZWFtR3JpZDogKG1vZGVsKSA9PiB7XG5cdFx0XHRsZXQgaHRtbCA9IGBgO1xuXHRcdFx0bW9kZWwudGVhbXMuZm9yRWFjaCgodGVhbSkgPT4ge1xuXHRcdFx0XHRsZXQgdXBkYXRlcyA9IDA7XG5cdFx0XHRcdGZvciAobGV0IHVpZCBpbiB0ZWFtLnVwZGF0ZXMpIHtcblx0XHRcdFx0XHRmb3IgKGxldCB1cGlkIGluIHRlYW0udXBkYXRlc1t1aWRdKSB7XG5cdFx0XHRcdFx0XHR1cGRhdGVzKys7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGxldCBsaW5rID0gYCR7b3JpZ2lufS9jaGFydGVyLmh0bWw/dGVhbT0ke3RlYW0udGlkfSZjb2RlPSR7dGVhbS5qb2luQ29kZX1gO1xuXHRcdFx0XHRsZXQgbWVtYmVycyA9IHRlYW0ubWVtYmVycyB8fCB7fTtcblx0XHRcdFx0aHRtbCArPSBgXG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNvbHVtbiBpcy02XCI+XG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiYm94IGNvbnRlbnQgaGFzLXRleHQtY2VudGVyZWRcIj5cblx0XHRcdFx0XHRcdFx0PGgyIGNsYXNzPVwidGl0bGUgaXMtNFwiPiR7dGVhbS5uYW1lfTwvaDIgY2xhc3M9XCJ0aXRsZSBpcy00XCI+XG5cdFx0XHRcdFx0XHRcdDxwIGNsYXNzPVwic3VidGl0bGUgaXMtbmVhdGx5LXNwYWNlZFwiPkxhc3QgYWN0aXZlICR7bW9tZW50KHRlYW0ubGFzdEFjY2VzcykuZnJvbU5vdygpfTwvcD5cblx0XHRcdFx0XHRcdFx0PHAgY2xhc3M9XCJzdWJ0aXRsZSBpcy1uZWF0bHktc3BhY2VkXCI+JHtPYmplY3Qua2V5cyh0ZWFtLmVkaXRzKS5sZW5ndGh9IGNoYXJ0ZXIgZWRpdHM8L3A+XG5cdFx0XHRcdGA7XG5cdFx0XHRcdGZvciAobGV0IHVpZCBpbiB0ZWFtLm1lbWJlcnMpIHtcblx0XHRcdFx0XHRsZXQgcHJvZmlsZSA9IG1vZGVsLnByb2ZpbGVzW3VpZF07XG5cdFx0XHRcdFx0bGV0IHVzZXJNb2RlbCA9IHtcblx0XHRcdFx0XHRcdG5hbWU6ICdVbmtub3duIFN0dWRlbnQnLFxuXHRcdFx0XHRcdFx0aW1hZ2U6ICcuL3B1YmxpYy9pbWcvbm8tdXNlci5wbmcnLFxuXHRcdFx0XHRcdFx0c3VidGl0bGU6ICcuLi4nXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChwcm9maWxlLm5hbWUpIHtcblx0XHRcdFx0XHRcdHVzZXJNb2RlbC5uYW1lID0gcHJvZmlsZS5uYW1lO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAocHJvZmlsZS5pbWFnZSkge1xuXHRcdFx0XHRcdFx0dXNlck1vZGVsLmltYWdlID0gcHJvZmlsZS5pbWFnZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHRlYW0ubWVtYmVyc1t1aWRdLnJvbGUpIHtcblx0XHRcdFx0XHRcdHVzZXJNb2RlbC5zdWJ0aXRsZSA9IHRlYW0ubWVtYmVyc1t1aWRdLnJvbGU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGxldCB1c2VyRGl2ID0gdmlld3MuZ2V0VXNlclRpbGUodXNlck1vZGVsKTtcblx0XHRcdFx0XHRodG1sICs9IHVzZXJEaXYuaW5uZXJIVE1MO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGh0bWwgKz0gYFxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiaXMtZ3JvdXBlZCBoYXMtdGV4dC1jZW50ZXJlZFwiPlxuXHRcdFx0XHRcdFx0XHRcdDxhIGhyZWY9XCIke2xpbmt9XCIgY2xhc3M9XCJidXR0b24gaXMtcHJpbWFyeSBpcy1vdXRsaW5lZFwiPkpvaW4gVGVhbTwvYT5cblx0XHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0YDtcblx0XHRcdH0pO1xuXHRcdFx0aHRtbCArPSBgXG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNvbHVtbiBpcy02XCI+XG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiYm94IGNvbnRlbnQgaGFzLXRleHQtY2VudGVyZWRcIj5cblx0XHRcdFx0XHRcdFx0PGgyIGNsYXNzPVwidGl0bGUgaXMtNFwiPlN0YXJ0IE5ldyBUZWFtPC9oMiBjbGFzcz1cInRpdGxlIGlzLTRcIj5cblx0XHRcdFx0XHRcdFx0PHAgY2xhc3M9XCJzdWJ0aXRsZSBpcy1uZWF0bHktc3BhY2VkXCI+RG9uJ3Qgc2VlIHlvdXIgdGVhbT88L3A+XG5cdFx0XHRgO1xuXG5cdFx0XHRsZXQgcHJvZmlsZSA9IG1vZGVsLnByb2ZpbGVzW21vZGVsLnVpZF07XG5cdFx0XHRsZXQgdXNlck1vZGVsID0ge1xuXHRcdFx0XHRuYW1lOiAnVW5rbm93biBTdHVkZW50Jyxcblx0XHRcdFx0aW1hZ2U6ICcuL3B1YmxpYy9pbWcvbm8tdXNlci5wbmcnLFxuXHRcdFx0XHRzdWJ0aXRsZTogJ1RlYW0gTWVtYmVyJ1xuXHRcdFx0fVxuXHRcdFx0aWYgKHByb2ZpbGUubmFtZSkge1xuXHRcdFx0XHR1c2VyTW9kZWwubmFtZSA9IHByb2ZpbGUubmFtZTtcblx0XHRcdH1cblx0XHRcdGlmIChwcm9maWxlLmltYWdlKSB7XG5cdFx0XHRcdHVzZXJNb2RlbC5pbWFnZSA9IHByb2ZpbGUuaW1hZ2U7XG5cdFx0XHR9XG5cdFx0XHRsZXQgdXNlckRpdiA9IHZpZXdzLmdldFVzZXJUaWxlKHVzZXJNb2RlbCk7XG5cdFx0XHRodG1sICs9IHVzZXJEaXYuaW5uZXJIVE1MO1xuXG5cdFx0XHRodG1sICs9IGBcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiaXMtZ3JvdXBlZCBoYXMtdGV4dC1jZW50ZXJlZFwiPlxuXHRcdFx0XHRcdFx0XHRcdDxhIGlkPVwibmV3LXRlYW1cIiBjbGFzcz1cImJ1dHRvbiBpcy1wcmltYXJ5IGlzLW91dGxpbmVkXCI+U3RhcnQgTmV3IFRlYW08L2E+XG5cdFx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRgO1xuXHRcdFx0bGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRkaXYuY2xhc3NMaXN0LmFkZCgnY29sdW1ucycpO1xuXHRcdFx0XHRkaXYuY2xhc3NMaXN0LmFkZCgnaXMtbXVsdGlsaW5lJyk7XG5cdFx0XHRcdGRpdi5pbm5lckhUTUwgPSBodG1sO1xuXHRcdFx0cmV0dXJuIGRpdjtcblx0XHR9LFxuXG5cdFx0Z2V0UHJvbWlzZVRhYmxlOiAobW9kZWwpID0+IHtcblx0XHRcdGxldCBodG1sID0gYFxuXHRcdFx0XHQ8dGhlYWQ+XG5cdFx0XHRcdFx0PHRyPlxuXHRcdFx0XHRcdFx0PHRoPk5hbWU8L3RoPlxuXHRcdFx0XHRcdFx0PHRoPk1lbWJlcjwvdGg+XG5cdFx0XHRcdFx0XHQ8dGg+U3RhdHVzPC90aD5cblx0XHRcdFx0XHRcdDx0aD5MYXN0IEFjdGl2ZTwvdGg+XG5cdFx0XHRcdFx0XHQ8dGg+VmlldzwvdGg+XG5cdFx0XHRcdFx0PC90cj5cblx0XHRcdFx0PC90aGVhZD5cblx0XHRcdFx0PHRib2R5PlxuXHRcdFx0YDtcblxuXHRcdFx0T2JqZWN0LmtleXMobW9kZWwucHJvbWlzZXMpLm1hcCgocGRpZCkgPT4ge1xuXHRcdFx0XHRsZXQgdmFsID0gbW9kZWwucHJvbWlzZXNbcGRpZF07XG5cdFx0XHRcdFx0dmFsLmtleSA9IHBkaWQ7XG5cdFx0XHRcdHJldHVybiB2YWw7XG5cdFx0XHR9KS5zb3J0KChhLCBiKSA9PiB7XG5cdFx0XHRcdHJldHVybiAwO1xuXHRcdFx0fSkuZm9yRWFjaCgocHJvbWlzZSkgPT4ge1xuXHRcdFx0XHRsZXQgYXV0aG9yTmFtZSA9ICdVbmtub3duJztcblx0XHRcdFx0bGV0IHNpbmNlU3RhcnQgPSBtb21lbnQocHJvbWlzZS5zdGFydGVkKS5mcm9tTm93KCk7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0YXV0aG9yTmFtZSA9IG1vZGVsLnByb2ZpbGVzW3Byb21pc2UuYXV0aG9yXS5uYW1lO1xuXHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRsZXQgZHVyID0gbW9tZW50LmR1cmF0aW9uKG1vbWVudChwcm9taXNlLmR1ZSkuZGlmZihtb21lbnQoRGF0ZS5ub3coKSkpKTtcblx0XHRcdFx0bGV0IGRheXNMZWZ0ID0gTWF0aC5mbG9vcihkdXIuYXNEYXlzKCkpO1xuXHRcdFx0XHRodG1sICs9IGBcblx0XHRcdFx0XHQ8dHI+XG5cdFx0XHRcdFx0XHQ8dGQ+JHtwcm9taXNlLnRpdGxlfTwvdGQ+XG5cdFx0XHRcdFx0XHQ8dGQ+JHthdXRob3JOYW1lfTwvdGQ+XG5cdFx0XHRcdFx0XHQ8dGQ+JHtwcm9taXNlLmNvbXBsZXRlZCA/ICdDb21wbGV0ZScgOiBkYXlzTGVmdCArICcgZGF5cyBsZWZ0J308L3RkPlxuXHRcdFx0XHRcdFx0PHRkPiR7c2luY2VTdGFydH08L3RkPlxuXHRcdFx0XHRcdFx0PHRkPlxuXHRcdFx0XHRcdFx0XHQ8YnV0dG9uIGRhdGEtcHJvbWlzZWlkPVwiJHtwcm9taXNlLmtleX1cIiBjbGFzcz1cImJ1dHRvbiBpcy1wcmltYXJ5IGlzLW91dGxpbmVkXCI+VmlldzwvYnV0dG9uPlxuXHRcdFx0XHRcdFx0PC90ZD5cblx0XHRcdFx0XHQ8L3RyPlxuXHRcdFx0XHRgO1xuXHRcdFx0fSk7XG5cdFx0XHRodG1sICs9IGBcblx0XHRcdFx0PC90Ym9keT5cblx0XHRcdGA7XG5cdFx0XHRsZXQgdGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xuXHRcdFx0XHR0YWJsZS5jbGFzc0xpc3QuYWRkKCd0YWJsZScpO1xuXHRcdFx0XHR0YWJsZS5jbGFzc0xpc3QuYWRkKCdpcy1uYXJyb3cnKTtcblx0XHRcdFx0dGFibGUuY2xhc3NMaXN0LmFkZCgnaXMtZnVsbHdpZHRoJyk7XG5cdFx0XHRcdHRhYmxlLmNsYXNzTGlzdC5hZGQoJ2lzLXN0cmlwZWQnKTtcblx0XHRcdFx0dGFibGUuaW5uZXJIVE1MID0gaHRtbDtcblx0XHRcdHJldHVybiB0YWJsZTtcblx0XHR9LFxuXG5cdFx0Z2V0UHJvbWlzZUJveDogKG1vZGVsKSA9PiB7XG5cdFx0XHRsZXQgcHJvbWlzZSA9IG1vZGVsLnByb21pc2U7XG5cdFx0XHRsZXQgcHJvZmlsZXMgPSBtb2RlbC5wcm9maWxlcztcblx0XHRcdGxldCBsZXZlbFRleHQgPSAnVW5rbm93bic7XG5cdFx0XHRzd2l0Y2ggKHByb21pc2UubGV2ZWwpIHtcblx0XHRcdFx0Y2FzZSAxOiBsZXZlbFRleHQgPSAnU21hbGwnOyBicmVhaztcblx0XHRcdFx0Y2FzZSAyOiBsZXZlbFRleHQgPSAnTWVkaXVtJzsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgMzogbGV2ZWxUZXh0ID0gJ0xhcmdlJzsgYnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRsZXQgc2luY2VTdGFydCA9IG1vbWVudChwcm9taXNlLnN0YXJ0ZWQpLmZyb21Ob3coKTtcblx0XHRcdGxldCBkdWVEYXRlID0gbW9tZW50KHByb21pc2UuZHVlKS5mb3JtYXQoJ00vRCcpO1xuXHRcdFx0bGV0IGF1dGhvck5hbWUgPSAnVW5rbm93bic7XG5cdFx0XHRsZXQgYXV0aG9ySW1hZ2UgPSAnLi9wdWJsaWMvaW1nL25vLXVzZXIucG5nJztcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF1dGhvck5hbWUgPSBwcm9maWxlc1twcm9taXNlLmF1dGhvcl0ubmFtZTtcblx0XHRcdFx0YXV0aG9ySW1hZ2UgPSBwcm9maWxlc1twcm9taXNlLmF1dGhvcl0uaW1hZ2U7XG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoZSlcblx0XHRcdH1cblx0XHRcdC8vPGgxIGNsYXNzPVwidGl0bGUgaXMtMlwiPiR7cHJvbWlzZS50aXRsZX0gPHNwYW4gY2xhc3M9XCJ0YWcgaXMtd2FybmluZ1wiPiR7bGV2ZWxUZXh0fTwvc3Bhbj48L2gxPlxuXHRcdFx0bGV0IGh0bWwgPSBgXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJjb2x1bW5cIj5cblx0XHRcdFx0PGRpdiBjbGFzcz1cImJveCBjb250ZW50XCI+XG5cdFx0XHRcdFx0PGgxIGNsYXNzPVwidGl0bGUgaXMtMlwiPiR7cHJvbWlzZS50aXRsZX08L2gxPlxuXHRcdFx0XHRcdDxwIGNsYXNzPVwic3VidGl0bGUgaXMtbmVhdGx5LXNwYWNlZFwiPlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNvbW1lbnRcIj5cblx0XHRcdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJpbWFnZSBpcy0xNngxNiBpcy1yb3VuZGVkIGlzLWlubGluZS1pbWFnZVwiPlxuXHRcdFx0XHRcdFx0XHRcdDxpbWcgc3JjPVwiJHthdXRob3JJbWFnZX1cIj5cblx0XHRcdFx0XHRcdFx0PC9zcGFuPlxuXHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cInRpdGxlIGlzLTZcIj4ke2F1dGhvck5hbWV9PC9zcGFuPlxuXHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cImlzLWZhZGVkXCI+IHN0YXJ0ZWQgJHtzaW5jZVN0YXJ0fTwvc3Bhbj5cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdDwvcD5cblx0XHRcdFx0XHQ8cCBjbGFzcz1cInN1YnRpdGxlIGlzLW5vcm1hbGx5LXNwYWNlZFwiPkkgcHJvbWlzZSB0byAke3Byb21pc2UuZGVzY3JpcHRpb259IGJ5ICR7ZHVlRGF0ZX0uPC9wPlxuXHRcdFx0YDtcblx0XHRcdGxldCBsaW5rTGlzdCA9IE9iamVjdC5rZXlzKHByb21pc2UubGlua3MpLm1hcCgoa2V5KSA9PiB7XG5cdFx0XHRcdGxldCB2YWwgPSBwcm9taXNlLmxpbmtzW2tleV07XG5cdFx0XHRcdHZhbC5rZXkgPSBrZXk7XG5cdFx0XHRcdHJldHVybiB2YWw7XG5cdFx0XHR9KTtcblx0XHRcdGlmIChsaW5rTGlzdC5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGh0bWwgKz0gYDxkaXY+YDtcblx0XHRcdFx0bGlua0xpc3QuZm9yRWFjaCgobGluaykgPT4ge1xuXHRcdFx0XHRcdGh0bWwgKz0gYDxkaXYgY2xhc3M9XCJ0ZWFtLWxpbmtcIj4ke3ZpZXdzLmdldExpbmtJdGVtKGxpbmspLmlubmVySFRNTH08L2Rpdj5gO1xuXHRcdFx0XHRcdC8vaHRtbCArPSBgPGxpPjxhIGhyZWY9XCIke2xpbmsudXJsfVwiIHRhcmdldD1cIl9ibGFua1wiPiR7bGluay5uYW1lfTwvYT48L2xpPmA7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRodG1sICs9IGA8L2Rpdj5gO1xuXHRcdFx0fVxuXHRcdFx0aHRtbCArPSBgXG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cImlzLWdyb3VwZWRcIj5cblx0XHRcdFx0XHRcdDxidXR0b24gZGF0YS1mcGI9XCJlZGl0XCIgY2xhc3M9XCJidXR0b24gaXMtcHJpbWFyeSBpcy1vdXRsaW5lZCBpcy1oaWRkZW4tdG8tbWVudG9yXCI+XG5cdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwiaWNvblwiPlxuXHRcdFx0XHRcdFx0XHRcdDxpIGNsYXNzPVwiZmEgZmEtZWRpdFwiPjwvaT5cblx0XHRcdFx0XHRcdFx0PC9zcGFuPlxuXHRcdFx0XHRcdFx0XHQ8c3Bhbj5FZGl0PC9zcGFuPlxuXHRcdFx0XHRcdFx0PC9idXR0b24+XG5cdFx0XHRcdFx0XHQ8YnV0dG9uIGRhdGEtZnBiPVwibGlua1wiIGNsYXNzPVwiYnV0dG9uIGlzLXByaW1hcnkgaXMtb3V0bGluZWQgaXMtaGlkZGVuLXRvLW1lbnRvclwiPlxuXHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cImljb25cIj5cblx0XHRcdFx0XHRcdFx0XHQ8aSBjbGFzcz1cImZhIGZhLWxpbmtcIj48L2k+XG5cdFx0XHRcdFx0XHRcdDwvc3Bhbj5cblx0XHRcdFx0XHRcdFx0PHNwYW4+QWRkIExpbms8L3NwYW4+XG5cdFx0XHRcdFx0XHQ8L2J1dHRvbj5cblx0XHRcdFx0XHRcdDxidXR0b24gZGF0YS1mcGI9XCJiYWNrXCIgY2xhc3M9XCJidXR0b24gaXMtZGFuZ2VyIGlzLW91dGxpbmVkXCI+XG5cdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwiaWNvblwiPlxuXHRcdFx0XHRcdFx0XHRcdDxpIGNsYXNzPVwiZmEgZmEtYXJyb3ctbGVmdFwiPjwvaT5cblx0XHRcdFx0XHRcdFx0PC9zcGFuPlxuXHRcdFx0XHRcdFx0XHQ8c3Bhbj5CYWNrIHRvIFByb21pc2VzPC9zcGFuPlxuXHRcdFx0XHRcdFx0PC9idXR0b24+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PGRpdiBjbGFzcz1cImNvbHVtblwiPlxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwiYm94IGNvbnRlbnRcIj5cblx0XHRcdFx0XHQ8aDEgY2xhc3M9XCJ0aXRsZSBpcy00XCI+UHJvZ3Jlc3M8L2gxPlxuXHRcdFx0XHRcdDxkaXYgaWQ9XCJjb21tZW50cy1maWVsZFwiPlxuXHRcdFx0XHRcdGA7XG5cblx0XHRcdE9iamVjdC5rZXlzKHByb21pc2UuY29tbWVudHMpLm1hcCgoa2V5KSA9PiB7XG5cdFx0XHRcdHJldHVybiBwcm9taXNlLmNvbW1lbnRzW2tleV07XG5cdFx0XHR9KS5zb3J0KChhLCBiKSA9PiB7XG5cdFx0XHRcdHJldHVybiBhLnRpbWVzdGFtcCAtIGIudGltZXN0YW1wO1xuXHRcdFx0fSkuZm9yRWFjaCgoY29tbWVudCkgPT4ge1xuXHRcdFx0XHRsZXQgY29tbWVudEF1dGhvciA9IHtcblx0XHRcdFx0XHRuYW1lOiAnVW5rbm93bicsXG5cdFx0XHRcdFx0aW1hZ2U6ICcuL3B1YmxpYy9pbWcvbm8tdXNlci5wbmcnXG5cdFx0XHRcdH1cblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRjb21tZW50QXV0aG9yLm5hbWUgPSBwcm9maWxlc1tjb21tZW50LmF1dGhvcl0ubmFtZTtcblx0XHRcdFx0XHRjb21tZW50QXV0aG9yLmltYWdlID0gcHJvZmlsZXNbY29tbWVudC5hdXRob3JdLmltYWdlO1xuXHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlKVxuXHRcdFx0XHR9XG5cdFx0XHRcdGxldCBzaW5jZUNvbW1lbnQgPSBtb21lbnQoY29tbWVudC50aW1lc3RhbXApLmZvcm1hdCgnTS9EIGg6bW0gQScpOy8vLmZyb21Ob3coKTtcblx0XHRcdFx0aWYgKGNvbW1lbnQuZ2VuZXJhdGVkKSB7XG5cdFx0XHRcdFx0aHRtbCArPSBgXG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29tbWVudFwiPlxuXHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cImltYWdlIGlzLTE2eDE2IGlzLXJvdW5kZWQgaXMtaW5saW5lLWltYWdlXCI+XG5cdFx0XHRcdFx0XHRcdFx0PGltZyBzcmM9XCIke2NvbW1lbnRBdXRob3IuaW1hZ2V9XCI+XG5cdFx0XHRcdFx0XHRcdDwvc3Bhbj5cblx0XHRcdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJ0aXRsZSBpcy02XCI+JHtjb21tZW50QXV0aG9yLm5hbWV9PC9zcGFuPlxuXHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cImlzLWZhZGVkXCI+ICR7c2luY2VDb21tZW50fTogPC9zcGFuPlxuXHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cImdlbmVyYXRlZC10ZXh0XCI+JHtjb21tZW50LnRleHR9PC9zcGFuPlxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0YDtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRodG1sICs9IGBcblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb21tZW50XCI+XG5cdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwiaW1hZ2UgaXMtMTZ4MTYgaXMtcm91bmRlZCBpcy1pbmxpbmUtaW1hZ2VcIj5cblx0XHRcdFx0XHRcdFx0XHQ8aW1nIHNyYz1cIiR7Y29tbWVudEF1dGhvci5pbWFnZX1cIj5cblx0XHRcdFx0XHRcdFx0PC9zcGFuPlxuXHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cInRpdGxlIGlzLTZcIj4ke2NvbW1lbnRBdXRob3IubmFtZX08L3NwYW4+XG5cdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwiaXMtZmFkZWRcIj4gJHtzaW5jZUNvbW1lbnR9OiA8L3NwYW4+XG5cdFx0XHRcdFx0XHRcdDxzcGFuPiR7Y29tbWVudC50ZXh0fTwvc3Bhbj5cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdGA7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHRodG1sICs9IGBcblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiaXMtaGlkZGVuLXRvLW1lbnRvclwiPlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtY2hpbGRcIj5cblx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUtZWRpdGFibGVcIj5cblx0XHRcdFx0XHRcdFx0XHQ8dGV4dGFyZWEgZGF0YS1mcGI9XCJ0ZXh0YXJlYVwiIGNsYXNzPVwidGV4dGFyZWFcIiByb3dzPVwiMlwiIHBsYWNlaG9sZGVyPVwiV3JpdGUgaGVyZS4uLlwiPjwvdGV4dGFyZWE+XG5cdFx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiaXMtZ3JvdXBlZFwiPlxuXHRcdFx0XHRcdFx0XHRcdDxidXR0b24gZGF0YS1mcGI9XCJjb21tZW50XCIgY2xhc3M9XCJidXR0b24gaXMtcHJpbWFyeVwiPlxuXHRcdFx0XHRcdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJpY29uXCI+XG5cdFx0XHRcdFx0XHRcdFx0XHRcdDxpIGNsYXNzPVwiZmEgZmEtY29tbWVudC1vXCI+PC9pPlxuXHRcdFx0XHRcdFx0XHRcdFx0PC9zcGFuPlxuXHRcdFx0XHRcdFx0XHRcdFx0PHNwYW4+Q29tbWVudDwvc3Bhbj5cblx0XHRcdFx0XHRcdFx0XHQ8L2J1dHRvbj5cblx0XHRcdFx0XHRcdFx0XHQ8YnV0dG9uIGRhdGEtZnBiPVwiY29tcGxldGVcIiBjbGFzcz1cImJ1dHRvbiBpcy1wcmltYXJ5IGlzLW91dGxpbmVkXCI+XG5cdFx0XHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cImljb25cIj5cblx0XHRcdFx0XHRcdFx0XHRcdFx0PGkgY2xhc3M9XCJmYSAke3Byb21pc2UuY29tcGxldGVkID8gJ2ZhLXRpbWVzJyA6ICdmYS1jaGVjayd9XCI+PC9pPlxuXHRcdFx0XHRcdFx0XHRcdFx0PC9zcGFuPlxuXHRcdFx0XHRcdFx0XHRcdFx0PHNwYW4+JHtwcm9taXNlLmNvbXBsZXRlZCA/ICdNYXJrIGFzIEluY29tcGxldGUnIDogJ01hcmsgYXMgQ29tcGxldGUnfTwvc3Bhbj5cblx0XHRcdFx0XHRcdFx0XHQ8L2J1dHRvbj5cblx0XHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PlxuXHRcdFx0YDtcblx0XHRcdGxldCBib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0Ym94LmNsYXNzTGlzdC5hZGQoJ2NvbHVtbnMnKTtcblx0XHRcdFx0Ym94LmlubmVySFRNTCA9IGh0bWw7XG5cdFx0XHRyZXR1cm4gYm94O1xuXHRcdH0sXG5cblx0XHRnZXRQcm9taXNlRWRpdG9yOiAobW9kZWwpID0+IHtcblx0XHRcdGlmIChtb2RlbC5kZXNjcmlwdGlvbiA9PT0gJy4uLicpIHtcblx0XHRcdFx0bW9kZWwuZGVzY3JpcHRpb24gPSBmYWxzZTtcblx0XHRcdH1cblx0XHRcdGxldCBodG1sID0gYFxuXHRcdFx0XHQ8aDEgZGF0YS1wZWY9XCJ0aXRsZVwiIGNsYXNzPVwidGl0bGUgaXMtMiBubHAtZWRpdGFibGVcIiBjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCI+JHttb2RlbC50aXRsZSA/IG1vZGVsLnRpdGxlIDogJ1RpdGxlIG9mIFByb21pc2UnfTwvaDE+XG5cdFx0XHRcdDxwIGNsYXNzPVwic3VidGl0bGUgaXMtbmVhdGx5LXNwYWNlZFwiPlxuXHRcdFx0XHRcdEkgcHJvbWlzZSB0byA8c3BhbiBkYXRhLXBlZj1cImRlc2NyaXB0aW9uXCIgY2xhc3M9XCJubHAtZWRpdGFibGVcIiBjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCI+JHttb2RlbC5kZXNjcmlwdGlvbiA/IG1vZGVsLmRlc2NyaXB0aW9uIDogJyhkbyBzb21ldGhpbmcgZm9yIG15IHRlYW0pJ308L3NwYW4+IGJ5IDxzcGFuIGRhdGEtcGVmPVwiZHVlXCIgY2xhc3M9XCJubHAtZWRpdGFibGVcIiBjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCI+JHttb2RlbC5kdWUgPyBtb21lbnQobW9kZWwuZHVlKS5mb3JtYXQoJ00vRC9ZWVlZJykgOidNTS9ERC9ZWVlZJ308L3NwYW4+LlxuXHRcdFx0XHQ8L3A+XG5cdFx0XHRcdDxwIGRhdGEtcGVmPVwid2FybmluZ1wiIGNsYXNzPVwiaXMtZGFuZ2VyLXRleHRcIj48L3A+XG5cdFx0XHRcdDxidXR0b24gZGF0YS1wZWY9XCJzdWJtaXRcIiBjbGFzcz1cImJ1dHRvbiBpcy1wcmltYXJ5XCI+U2F2ZSBQcm9taXNlPC9idXR0b24+XG5cdFx0XHRgO1xuXHRcdFx0aWYgKG1vZGVsLmRlbGV0YWJsZSkge1xuXHRcdFx0XHRodG1sICs9IGA8YnV0dG9uIGRhdGEtcGVmPVwicmVtb3ZlXCIgY2xhc3M9XCJidXR0b24gaXMtZGFuZ2VyIGlzLW91dGxpbmVkXCI+Q2FuY2VsPC9idXR0b24+YDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGh0bWwgKz0gYDxidXR0b24gZGF0YS1wZWY9XCJjYW5jZWxcIiBjbGFzcz1cImJ1dHRvbiBpcy1kYW5nZXIgaXMtb3V0bGluZWRcIj5DYW5jZWw8L2J1dHRvbj5gO1xuXHRcdFx0fVxuXHRcdFx0bGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRkaXYuY2xhc3NMaXN0LmFkZCgnYm94Jyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCdjb250ZW50Jyk7XG5cdFx0XHRcdGRpdi5pbm5lckhUTUwgPSBodG1sO1xuXHRcdFx0cmV0dXJuIGRpdjtcblx0XHR9XG5cblx0fVxuXG5cdHJldHVybiB2aWV3cztcblxufVxuXG5leHBvcnQge1ZpZXdzfTtcbiJdfQ==\n"]}