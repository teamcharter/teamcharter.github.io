{"version":3,"sources":["me.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","Object","defineProperty","value","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","2","Database","firebase","CharterFirebase","initializeApp","db","database","auth","localhost","noScreenshots","prometheus","Prometheus","init","callback","fallback","called","onAuthStateChanged","user","logon","uid","name","displayName","email","image","photoURL","login","method","provider","GoogleAuthProvider","FacebookAuthProvider","signInWithPopup","then","result","credential","accessToken","providerId","providerData","console","error","catch","getPrometheus","getCurrentUser","currentUser","saveFeedback","tid","feedback","ref","push","timestamp","Date","now","getUser","Promise","resolve","reject","once","snap","val","getTeam","team","keys","getTeamEdits","edits","onTeamChange","members","on","promises","memberMap","status","p","all","users","forEach","member","idx","updateTeamName","field","set","updateQuestion","question","updateExpectations","list","submitUpdate","update","save","type","addLink","data","url","added","updateLink","key","p1","p2","removeLink","removed","remove","updateRole","author","role","responsibility","addTemplateRole","joined","icon","updateRoleIcon","joinTeam","joinCode","success","addMember","done","removeMember","getAllTeams","orderByChild","startAt","endAt","nodes","createNewTeam","teamName","res","pathList","path","ct","getInstructorClasses","map","cid","classData","teams","resolveTeam","rejectTeam","_loop","teamList","tidx","meta","getClassTeams","classCode","_loop2","addTeamToClass","access","addInstructorToClass","isAlreadyInstructor","getInstructorsByClass","getTeamPromises","onTeamPromisesChange","err","onPromiseChange","promiseid","commentOnPromise","params","text","addPromise","payload","finished","unsetPromise","updatePromise","editData","addLinkToPromise","hasLinkId","linkid","3","initInstructorSection","classMap","classTiles","document","getElementById","style","display","innerHTML","tile","views","getClassTile","appendChild","convertTidToJoinCode","jc","ts","split","reverse","limit","half","Math","round","reportErrorToUser","vex","dialog","alert","fillText","className","spans","getElementsByClassName","innerText","fillSrc","src","_config","_database","_views","qs","join","tokens","re","exec","decodeURIComponent","getQueryParams","location","search","Views","feedbackBtn","createBtn","promoBtn","teamTiles","addEventListener","prompt","message","_uid","promoCode","redeem","redeemed","title","desc","description","unsafeMessage","over","window","reload","failed","getTeamTile","isTemplate","can","extraBtnControl","querySelectorAll","link","origin","log","instructor","./config","./database","./views","4","getRoleAndUpdateTile","model","posted","dateFormat","moment","format","diff","daysSinceLastUpdate","duration","asDays","tagClass","html","div","createElement","classList","add","getRoleTile","editSection","editable","getRoleTemplateTile","editButton","onSave","button","resp","onIconEdit","getProgressUpdate","getLinkItem","indexOf","classLink","filter","getUserTile","subtitle","getClassTeamTable","updates","upid","lastAccess","fromNow","table","getClassTeamGrid","_profile","profiles","_userModel","_userDiv","profile","userModel","userDiv","getPromiseTable","pdid","sort","b","promise","authorName","sinceStart","started","dur","due","daysLeft","floor","completed","getPromiseBox","level","dueDate","authorImage","linkList","links","comments","comment","commentAuthor","sinceComment","generated","box","getPromiseEditor","deletable"],"mappings":"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","file":"../me.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar config = {\n\tapiKey: \"AIzaSyBWk9EWPkkvqiruG8aYnHV0dBPg1z3EtN4\",\n\tauthDomain: \"charter-ecb07.firebaseapp.com\",\n\tdatabaseURL: \"https://charter-ecb07.firebaseio.com\",\n\tprojectId: \"charter-ecb07\",\n\tstorageBucket: \"\",\n\tmessagingSenderId: \"134239305153\"\n};\nexports.config = config;\n\n},{}],2:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar Database = function Database(firebase, config) {\n\n\tvar CharterFirebase = firebase.initializeApp(config, 'Charter Database');\n\tvar db = CharterFirebase.database();\n\tvar auth = CharterFirebase.auth();\n\tconfig.localhost = true;\n\tconfig.noScreenshots = true;\n\tvar prometheus = Prometheus(config, CharterFirebase);\n\n\t// Super Dirty: Update Prometheus Promos and Features Here\n\t// db.ref('prometheus/features/contributor').set({info: {name: 'Charter Contributor'}, validate: 'return {allowed: userData.contributor,data: userData}'})\n\n\t//db.ref('classes/master/teams').remove();\n\t/*db.ref('teams').once('value', (snap) => {\n \tlet teamMap = snap.val() || {};\n \tfor (let tid in teamMap) {\n \t\tdb.ref(`classes/master/teams/${tid}`).set({\n \t\t\taccess: true,\n \t\t\tjoined: Date.now()\n \t\t});\n \t}\n });*/\n\n\tvar database = {\n\n\t\tinit: function init(callback, fallback) {\n\t\t\tvar called = false;\n\t\t\tauth.onAuthStateChanged(function (user) {\n\t\t\t\tif (user) {\n\t\t\t\t\t//\n\t\t\t\t\tprometheus.logon(user.uid, {\n\t\t\t\t\t\tname: user.displayName,\n\t\t\t\t\t\temail: user.email,\n\t\t\t\t\t\timage: user.photoURL,\n\t\t\t\t\t\tuid: user.uid\n\t\t\t\t\t});\n\t\t\t\t\t//\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tcallback(user);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!called) {\n\t\t\t\t\t\tcalled = true;\n\t\t\t\t\t\tfallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tlogin: function login(callback, method) {\n\t\t\t//auth.signOut().then((done) => {\n\t\t\tvar provider = new firebase.auth.GoogleAuthProvider();\n\t\t\tif (method === 'facebook') {\n\t\t\t\tprovider = new firebase.auth.FacebookAuthProvider();\n\t\t\t}\n\t\t\tauth.signInWithPopup(provider).then(function (result) {\n\t\t\t\t//console.log(result);\n\t\t\t\tvar token = result.credential.accessToken;\n\t\t\t\tvar user = result.user;\n\t\t\t\tvar providerId = 'Unknown Provider';\n\t\t\t\ttry {\n\t\t\t\t\tproviderId = user.providerData[0].providerId;\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\t\t\t\t//\n\t\t\t\tprometheus.logon(user.uid, {\n\t\t\t\t\tname: user.displayName,\n\t\t\t\t\temail: user.email,\n\t\t\t\t\timage: user.photoURL,\n\t\t\t\t\tuid: user.uid,\n\t\t\t\t\tprovider: providerId\n\t\t\t\t});\n\t\t\t\t//\n\t\t\t\tcallback(user);\n\t\t\t}).catch(function (error) {\n\t\t\t\t/*let errorCode = error.code;\n    let errorMessage = error.message;\n    let email = error.email;\n    let credential = error.credential;*/\n\t\t\t\tconsole.error(error);\n\t\t\t});\n\t\t\t/*}).catch((err) => {\n   \tconsole.error(err);\n   });*/\n\t\t},\n\n\t\tgetPrometheus: function getPrometheus() {\n\t\t\treturn prometheus;\n\t\t},\n\n\t\tgetCurrentUser: function getCurrentUser() {\n\t\t\treturn auth.currentUser || {};\n\t\t},\n\n\t\tsaveFeedback: function saveFeedback(tid, uid, feedback) {\n\t\t\treturn db.ref('feedback').push({\n\t\t\t\ttid: tid,\n\t\t\t\tuid: uid,\n\t\t\t\tfeedback: feedback,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t},\n\n\t\tgetUser: function getUser(uid) {\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('prometheus/users/' + uid + '/profile').once('value', function (snap) {\n\t\t\t\t\tvar user = snap.val();\n\t\t\t\t\tresolve(user);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tgetTeam: function getTeam(tid) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('teams/' + tid).once('value', function (snap) {\n\t\t\t\t\tvar team = snap.val() || {};\n\t\t\t\t\tif (Object.keys(team).length > 0) {\n\t\t\t\t\t\tteam.tid = tid;\n\t\t\t\t\t\tresolve(team);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve({});\n\t\t\t\t\t}\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tgetTeamEdits: function getTeamEdits(tid) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('edits/' + tid).once('value', function (snap) {\n\t\t\t\t\tvar edits = snap.val() || {};\n\t\t\t\t\tresolve(edits);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tonTeamChange: function onTeamChange(tid, callback, fallback) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tvar members = {};\n\t\t\tdb.ref('teams/' + tid).on('value', function (snap) {\n\t\t\t\tvar promises = [];\n\t\t\t\tvar team = snap.val() || {};\n\t\t\t\tvar memberMap = team.members || {};\n\t\t\t\tfor (var uid in memberMap) {\n\t\t\t\t\tif (!(uid in members)) {\n\t\t\t\t\t\tif (memberMap[uid].status === 'template') {\n\t\t\t\t\t\t\tmembers[uid] = {\n\t\t\t\t\t\t\t\tname: 'Unknown',\n\t\t\t\t\t\t\t\timage: './public/img/no-user.png',\n\t\t\t\t\t\t\t\tuid: uid,\n\t\t\t\t\t\t\t\temail: 'team@omnipointment.com'\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar p = database.getUser(uid);\n\t\t\t\t\t\t\tp.uid = uid;\n\t\t\t\t\t\t\tpromises.push(p);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (promises.length > 0) {\n\t\t\t\t\tPromise.all(promises).then(function (users) {\n\t\t\t\t\t\tusers.forEach(function (member, idx) {\n\t\t\t\t\t\t\tvar uid = promises[idx].uid;\n\t\t\t\t\t\t\tmembers[uid] = member;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcallback(team, members);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcallback(team, members);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tupdateTeamName: function updateTeamName(tid, uid, name) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'name',\n\t\t\t\tuid: uid,\n\t\t\t\tvalue: name,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\treturn db.ref('teams/' + tid + '/name').set(name);\n\t\t},\n\n\t\tupdateQuestion: function updateQuestion(tid, uid, question) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'question',\n\t\t\t\tuid: uid,\n\t\t\t\tvalue: question,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\treturn db.ref('teams/' + tid + '/question').set(question);\n\t\t},\n\n\t\tupdateExpectations: function updateExpectations(tid, uid, list) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'expectations',\n\t\t\t\tuid: uid,\n\t\t\t\tvalue: list,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\treturn db.ref('teams/' + tid + '/expectations').set(list);\n\t\t},\n\n\t\tsubmitUpdate: function submitUpdate(tid, uid, update) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'SUBMIT_UPDATE',\n\t\t\t\ttid: tid,\n\t\t\t\tupdate: update\n\t\t\t});\n\t\t\t//\n\t\t\treturn db.ref('teams/' + tid + '/updates/' + uid).push({\n\t\t\t\tupdate: update,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t},\n\n\t\taddLink: function addLink(tid, uid, data) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'ADD_LINK',\n\t\t\t\ttid: tid,\n\t\t\t\tname: data.name,\n\t\t\t\turl: data.url\n\t\t\t});\n\t\t\t//\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'link',\n\t\t\t\tuid: uid,\n\t\t\t\tvalue: data,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\treturn db.ref('teams/' + tid + '/links').push({\n\t\t\t\tname: data.name,\n\t\t\t\turl: data.url,\n\t\t\t\tuid: uid,\n\t\t\t\tadded: Date.now()\n\t\t\t});\n\t\t},\n\n\t\tupdateLink: function updateLink(tid, uid, key, data) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\tif (!key) {\n\t\t\t\tthrow Error('No link id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'UPDATE_LINK',\n\t\t\t\ttid: tid,\n\t\t\t\tname: data.name,\n\t\t\t\turl: data.url,\n\t\t\t\tkey: key\n\t\t\t});\n\t\t\t//\n\t\t\tdata.key = key;\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'link',\n\t\t\t\tuid: uid,\n\t\t\t\tvalue: data,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\tvar p1 = db.ref('teams/' + tid + '/links/' + key + '/name').set(data.name);\n\t\t\tvar p2 = db.ref('teams/' + tid + '/links/' + key + '/url').set(data.url);\n\t\t\treturn Promise.all([p1, p2]);\n\t\t},\n\n\t\tremoveLink: function removeLink(tid, uid, key) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given.');\n\t\t\t}\n\t\t\tif (!key) {\n\t\t\t\tthrow Error('No link id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'REMOVE_LINK',\n\t\t\t\ttid: tid,\n\t\t\t\tkey: key\n\t\t\t});\n\t\t\t//\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'link',\n\t\t\t\tuid: uid,\n\t\t\t\tvalue: {\n\t\t\t\t\tremoved: true,\n\t\t\t\t\tkey: key\n\t\t\t\t},\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\treturn db.ref('teams/' + tid + '/links/' + key).remove();\n\t\t},\n\n\t\tupdateRole: function updateRole(tid, author, data) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!author) {\n\t\t\t\tthrow Error('No authoring user id given.');\n\t\t\t}\n\t\t\tif (!data.uid) {\n\t\t\t\tdata.uid = author; // If someone is editing their own role\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'UPDATE_ROLE',\n\t\t\t\ttid: tid,\n\t\t\t\tuid: data.uid,\n\t\t\t\trole: data.role,\n\t\t\t\tresponsibility: data.responsibility\n\t\t\t});\n\t\t\t//\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'role',\n\t\t\t\tuid: author,\n\t\t\t\tvalue: data,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\tvar p1 = db.ref('teams/' + tid + '/members/' + data.uid + '/role').set(data.role);\n\t\t\tvar p2 = db.ref('teams/' + tid + '/members/' + data.uid + '/responsibility').set(data.responsibility);\n\t\t\treturn Promise.all([p1, p2]);\n\t\t},\n\n\t\taddTemplateRole: function addTemplateRole(tid, author) {\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'ADD_TEMPLATE_ROLE',\n\t\t\t\ttid: tid\n\t\t\t});\n\t\t\t//\n\t\t\treturn db.ref('teams/' + tid + '/members').push({\n\t\t\t\tstatus: 'template',\n\t\t\t\trole: 'Team Member',\n\t\t\t\tjoined: Date.now(),\n\t\t\t\tmember: true,\n\t\t\t\ticon: 'user'\n\t\t\t});\n\t\t},\n\n\t\tupdateRoleIcon: function updateRoleIcon(tid, author, data) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!author) {\n\t\t\t\tthrow Error('No authoring user id given.');\n\t\t\t}\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'UPDATE_ROLE_ICON',\n\t\t\t\ttid: tid,\n\t\t\t\tuid: data.uid,\n\t\t\t\ticon: data.icon\n\t\t\t});\n\t\t\t//\n\t\t\tif (!data.uid) {\n\t\t\t\tdata.uid = author; // If someone is editing their own role\n\t\t\t}\n\t\t\tdb.ref('edits/' + tid).push({\n\t\t\t\tfield: 'role',\n\t\t\t\tuid: author,\n\t\t\t\tvalue: data,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t});\n\t\t\treturn db.ref('teams/' + tid + '/members/' + data.uid + '/icon').set(data.icon);\n\t\t},\n\n\t\tjoinTeam: function joinTeam(tid, uid, joinCode) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!uid) {\n\t\t\t\tthrow Error('No user id given');\n\t\t\t}\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdatabase.getTeam(tid).then(function (team) {\n\t\t\t\t\tif (joinCode === team.joinCode || !team.joinCode) {\n\t\t\t\t\t\tdatabase.addMember(tid, uid).then(function (done) {\n\t\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\t\tsuccess: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}).catch(reject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\tsuccess: false\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\taddMember: function addMember(tid, uid) {\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'ADD_MEMBER',\n\t\t\t\ttid: tid,\n\t\t\t\tuid: uid\n\t\t\t});\n\t\t\t//\n\t\t\treturn db.ref('teams/' + tid + '/members/' + uid).set({\n\t\t\t\tstatus: 'member',\n\t\t\t\trole: 'Team Member',\n\t\t\t\tjoined: Date.now(),\n\t\t\t\tmember: true\n\t\t\t});\n\t\t},\n\n\t\tremoveMember: function removeMember(tid, author, uid) {\n\t\t\t//\n\t\t\tprometheus.save({\n\t\t\t\ttype: 'REMOVE_MEMBER',\n\t\t\t\ttid: tid,\n\t\t\t\tuid: uid\n\t\t\t});\n\t\t\t//\n\t\t\treturn db.ref('teams/' + tid + '/members/' + uid).remove();\n\t\t},\n\n\t\tgetAllTeams: function getAllTeams(uid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar ref = db.ref('teams');\n\t\t\t\tvar query = ref.orderByChild('members/' + uid + '/member').startAt(true).endAt(true);\n\t\t\t\tquery.once('value', function (snap) {\n\t\t\t\t\tvar nodes = snap.val() || {};\n\t\t\t\t\tresolve(nodes);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tcreateNewTeam: function createNewTeam(uid, joinCode, data) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar teamName = data.name;\n\t\t\t\tdb.ref('teams').push({\n\t\t\t\t\tname: teamName || 'New Team Charter',\n\t\t\t\t\tjoinCode: joinCode,\n\t\t\t\t\tstatus: data.status || 'regular'\n\t\t\t\t}).then(function (res) {\n\t\t\t\t\tvar pathList = res.path.ct;\n\t\t\t\t\tvar tid = pathList[pathList.length - 1];\n\t\t\t\t\t//\n\t\t\t\t\tprometheus.save({\n\t\t\t\t\t\ttype: 'CREATE_TEAM',\n\t\t\t\t\t\ttid: tid,\n\t\t\t\t\t\tname: teamName,\n\t\t\t\t\t\tdata: data\n\t\t\t\t\t});\n\t\t\t\t\t//\n\t\t\t\t\tdatabase.addMember(tid, uid).then(function (done) {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\ttid: tid\n\t\t\t\t\t\t});\n\t\t\t\t\t}).catch(reject);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tgetInstructorClasses: function getInstructorClasses(uid) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar ref = db.ref('classes');\n\t\t\t\tvar query = ref.orderByChild('members/' + uid + '/access').startAt(true).endAt(true);\n\t\t\t\tquery.once('value', function (snap) {\n\t\t\t\t\tvar nodes = snap.val() || {};\n\t\t\t\t\tvar list = Object.keys(nodes).map(function (cid) {\n\t\t\t\t\t\tvar classData = nodes[cid];\n\t\t\t\t\t\tclassData.cid = cid;\n\t\t\t\t\t\treturn classData;\n\t\t\t\t\t});\n\t\t\t\t\tif (list.length > 0) {\n\t\t\t\t\t\tvar promises = [];\n\t\t\t\t\t\tlist.forEach(function (classData) {\n\t\t\t\t\t\t\tvar cid = classData.cid;\n\n\t\t\t\t\t\t\tvar _loop = function _loop(tid) {\n\t\t\t\t\t\t\t\tvar p = new Promise(function (resolveTeam, rejectTeam) {\n\t\t\t\t\t\t\t\t\tdatabase.getTeam(tid).then(resolveTeam).catch(rejectTeam);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tp.cid = cid;\n\t\t\t\t\t\t\t\tpromises.push(p);\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tfor (var tid in classData.teams) {\n\t\t\t\t\t\t\t\t_loop(tid);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tPromise.all(promises).then(function (teamList) {\n\t\t\t\t\t\t\tteamList.forEach(function (team, tidx) {\n\t\t\t\t\t\t\t\tvar meta = promises[tidx];\n\t\t\t\t\t\t\t\tif (nodes[meta.cid]) {\n\t\t\t\t\t\t\t\t\tif (nodes[meta.cid].teams[team.tid]) {\n\t\t\t\t\t\t\t\t\t\tnodes[meta.cid].teams[team.tid] = team;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tresolve(nodes);\n\t\t\t\t\t\t}).catch(reject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve({});\n\t\t\t\t\t}\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tgetClassTeams: function getClassTeams(classCode) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar ref = db.ref('classes/' + classCode);\n\t\t\t\tref.once('value', function (snap) {\n\t\t\t\t\tvar val = snap.val() || {};\n\t\t\t\t\tvar nodes = {};\n\t\t\t\t\tnodes[classCode] = val;\n\t\t\t\t\tvar list = Object.keys(nodes).map(function (cid) {\n\t\t\t\t\t\tvar classData = nodes[cid];\n\t\t\t\t\t\tclassData.cid = cid;\n\t\t\t\t\t\treturn classData;\n\t\t\t\t\t});\n\t\t\t\t\tif (list.length > 0) {\n\t\t\t\t\t\tvar promises = [];\n\t\t\t\t\t\tlist.forEach(function (classData) {\n\t\t\t\t\t\t\tvar cid = classData.cid;\n\n\t\t\t\t\t\t\tvar _loop2 = function _loop2(tid) {\n\t\t\t\t\t\t\t\tvar p = new Promise(function (resolveTeam, rejectTeam) {\n\t\t\t\t\t\t\t\t\tdatabase.getTeam(tid).then(resolveTeam).catch(rejectTeam);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tp.cid = cid;\n\t\t\t\t\t\t\t\tpromises.push(p);\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tfor (var tid in classData.teams) {\n\t\t\t\t\t\t\t\t_loop2(tid);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tPromise.all(promises).then(function (teamList) {\n\t\t\t\t\t\t\tteamList.forEach(function (team, tidx) {\n\t\t\t\t\t\t\t\tvar meta = promises[tidx];\n\t\t\t\t\t\t\t\tif (nodes[meta.cid]) {\n\t\t\t\t\t\t\t\t\tif (nodes[meta.cid].teams[team.tid]) {\n\t\t\t\t\t\t\t\t\t\tnodes[meta.cid].teams[team.tid] = team;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tresolve(nodes);\n\t\t\t\t\t\t}).catch(reject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve({});\n\t\t\t\t\t}\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\taddTeamToClass: function addTeamToClass(tid, uid, code) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('classes/' + code).once('value', function (snap) {\n\t\t\t\t\tvar classData = snap.val();\n\t\t\t\t\tif (classData) {\n\t\t\t\t\t\t//\n\t\t\t\t\t\tprometheus.save({\n\t\t\t\t\t\t\ttype: 'ADD_TEAM_TO_CLASS',\n\t\t\t\t\t\t\ttid: tid,\n\t\t\t\t\t\t\tclassCode: code\n\t\t\t\t\t\t});\n\t\t\t\t\t\t//\n\t\t\t\t\t\tdb.ref('classes/' + code + '/teams/' + tid).set({\n\t\t\t\t\t\t\taccess: true,\n\t\t\t\t\t\t\tjoined: Date.now()\n\t\t\t\t\t\t}).then(function (done) {\n\t\t\t\t\t\t\tresolve(classData);\n\t\t\t\t\t\t}).catch(reject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject('Could not find a class with code: ' + code + '.');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\taddInstructorToClass: function addInstructorToClass(uid, code) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('classes/' + code).once('value', function (snap) {\n\t\t\t\t\tvar classData = snap.val();\n\t\t\t\t\tif (classData) {\n\t\t\t\t\t\tvar memberMap = classData.members || {};\n\t\t\t\t\t\tif (uid in memberMap) {\n\t\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\t\tisAlreadyInstructor: true,\n\t\t\t\t\t\t\t\tclassData: classData\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\tprometheus.save({\n\t\t\t\t\t\t\t\ttype: 'ADD_INSTRUCTOR_TO_CLASS',\n\t\t\t\t\t\t\t\tclassCode: code\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t\tdb.ref('classes/' + code + '/members/' + uid).set({\n\t\t\t\t\t\t\t\taccess: true,\n\t\t\t\t\t\t\t\ttype: 'instructor',\n\t\t\t\t\t\t\t\tjoined: Date.now()\n\t\t\t\t\t\t\t}).then(function (done) {\n\t\t\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\t\t\tisAlreadyInstructor: false,\n\t\t\t\t\t\t\t\t\tclassData: classData\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}).catch(reject);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject('Could not find a class with code: ' + code + '.');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\tgetInstructorsByClass: function getInstructorsByClass(classCode) {},\n\n\t\tgetTeamPromises: function getTeamPromises(tid) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('promises/' + tid).once('value', function (snap) {\n\t\t\t\t\tvar val = snap.val();\n\t\t\t\t\tresolve(val);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tonTeamPromisesChange: function onTeamPromisesChange(tid, callback, fallback) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tdb.ref('promises/' + tid).on('value', function (snap) {\n\t\t\t\t\tvar val = snap.val();\n\t\t\t\t\tcallback(val);\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(err);\n\t\t\t\tif (fallback) {\n\t\t\t\t\tfallback(err);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tonPromiseChange: function onPromiseChange(tid, promiseid, callback, fallback) {\n\t\t\tif (!tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!promiseid) {\n\t\t\t\tthrow Error('No promise id given');\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tdb.ref('promises/' + tid).on('value', function (snap) {\n\t\t\t\t\tvar val = snap.val();\n\t\t\t\t\tcallback(val);\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\tif (fallback) {\n\t\t\t\t\tfallback(err);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\n\t\tcommentOnPromise: function commentOnPromise(params) {\n\t\t\tif (!params.tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!params.promiseid) {\n\t\t\t\tthrow Error('No promise id given');\n\t\t\t}\n\t\t\tif (!params.author) {\n\t\t\t\tthrow Error('No author id given');\n\t\t\t}\n\t\t\tif (!params.text) {\n\t\t\t\tthrow Error('No text given');\n\t\t\t}\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('promises/' + params.tid).push({\n\t\t\t\t\ttype: 'comment',\n\t\t\t\t\tpromiseid: params.promiseid,\n\t\t\t\t\tauthor: params.author,\n\t\t\t\t\ttimestamp: Date.now(),\n\t\t\t\t\ttext: params.text\n\t\t\t\t}).then(resolve).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\taddPromise: function addPromise(params) {\n\t\t\tif (!params.tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!params.author) {\n\t\t\t\tthrow Error('No author id given');\n\t\t\t}\n\t\t\tvar payload = {\n\t\t\t\ttype: 'edit',\n\t\t\t\tauthor: params.author,\n\t\t\t\ttimestamp: Date.now()\n\t\t\t};\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('promises/' + params.tid).push(payload).then(function (done) {\n\t\t\t\t\tvar promiseid = done.path.ct[2];\n\t\t\t\t\tdb.ref('promises/' + params.tid + '/' + promiseid + '/promiseid').set(promiseid).then(function (finished) {\n\t\t\t\t\t\tpayload.promiseid = promiseid;\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\tpromiseid: promiseid,\n\t\t\t\t\t\t\tdata: payload\n\t\t\t\t\t\t});\n\t\t\t\t\t}).catch(reject);\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tunsetPromise: function unsetPromise(params) {\n\t\t\tif (!params.tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!params.promiseid) {\n\t\t\t\tthrow Error('No promise id given');\n\t\t\t}\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('promises/' + params.tid + '/' + params.promiseid).remove().then(resolve).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\tupdatePromise: function updatePromise(params) {\n\t\t\tif (!params.tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!params.promiseid) {\n\t\t\t\tthrow Error('No promise id given');\n\t\t\t}\n\t\t\tif (!params.author) {\n\t\t\t\tthrow Error('No author id given');\n\t\t\t}\n\t\t\tvar tid = params.tid + '';\n\t\t\tvar editData = params;\n\t\t\tdelete editData.tid;\n\t\t\teditData.timestamp = Date.now();\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tdb.ref('promises/' + tid).push(editData).then(resolve).catch(reject);\n\t\t\t});\n\t\t},\n\n\t\taddLinkToPromise: function addLinkToPromise(params) {\n\t\t\tif (!params.tid) {\n\t\t\t\tthrow Error('No team id given.');\n\t\t\t}\n\t\t\tif (!params.promiseid) {\n\t\t\t\tthrow Error('No promise id given');\n\t\t\t}\n\t\t\tif (!params.author) {\n\t\t\t\tthrow Error('No author id given');\n\t\t\t}\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar hasLinkId = params.linkid ? true : false;\n\t\t\t\tdb.ref('promises/' + params.tid).push({\n\t\t\t\t\ttype: 'link',\n\t\t\t\t\tpromiseid: params.promiseid,\n\t\t\t\t\tlinkid: params.linkid || false,\n\t\t\t\t\tauthor: params.author,\n\t\t\t\t\ttimestamp: Date.now(),\n\t\t\t\t\tname: params.name || false,\n\t\t\t\t\turl: params.url || false\n\t\t\t\t}).then(function (done) {\n\t\t\t\t\tif (hasLinkId) {\n\t\t\t\t\t\tresolve(done);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar linkid = done.path.ct[2];\n\t\t\t\t\t\tdb.ref('promises/' + params.tid + '/' + linkid + '/linkid').set(linkid).then(resolve).catch(reject);\n\t\t\t\t\t}\n\t\t\t\t}).catch(reject);\n\t\t\t});\n\t\t}\n\n\t};\n\n\treturn database;\n};\n\nexports.Database = Database;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nvar _config = require('./config');\n\nvar _database = require('./database');\n\nvar _views = require('./views');\n\nvar database = (0, _database.Database)(firebase, _config.config);\n\nvar params = getQueryParams(document.location.search);\n\nvar views = (0, _views.Views)();\n\nvar loginBtn = document.getElementById('login');\nvar feedbackBtn = document.getElementById('feedback');\nvar createBtn = document.getElementById('create');\nvar promoBtn = document.getElementById('enter-promo');\nvar teamTiles = document.getElementById('team-tiles');\n\n/*loginBtn.addEventListener('click', (e) => {\n\tdatabase.login(main);\n});*/\n\ndatabase.init(main, function () {\n\t// No user signed in\n\twindow.location = window.location.origin + '/login.html' + document.location.search;\n});\n\nfunction main(user) {\n\n\tfeedbackBtn.addEventListener('click', function (e) {\n\t\tvex.dialog.prompt({\n\t\t\tmessage: 'What feedback do you have to share with us?',\n\t\t\tcallback: function callback(feedback) {\n\t\t\t\tif (feedback) {\n\t\t\t\t\tvar _uid = database.getCurrentUser().uid;\n\t\t\t\t\tdatabase.saveFeedback(false, _uid, feedback).then(function (done) {\n\t\t\t\t\t\tvex.dialog.alert('Thank you for your feedback, it really helps us a lot!');\n\t\t\t\t\t}).catch(reportErrorToUser);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\tpromoBtn.addEventListener('click', function (e) {\n\t\tvex.dialog.prompt({\n\t\t\tmessage: 'Enter your promo code:',\n\t\t\tcallback: function callback(promoCode) {\n\t\t\t\tif (promoCode) {\n\t\t\t\t\tdatabase.getPrometheus().redeem(promoCode, function (redeemed) {\n\t\t\t\t\t\tvar title = redeemed.title || 'Promo Code: ' + promoCode;\n\t\t\t\t\t\tvar desc = redeemed.description || 'Succesfully redeemed the promo code.';\n\t\t\t\t\t\tvex.dialog.alert({\n\t\t\t\t\t\t\tunsafeMessage: '\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title\">' + title + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"subtitle\">' + desc + '</p>\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t',\n\t\t\t\t\t\t\tcallback: function callback(over) {\n\t\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}, function (failed) {\n\t\t\t\t\t\tvex.dialog.alert(failed.message);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\tfillText('fill-user-name', user.displayName);\n\tfillSrc('fill-user-image', user.photoURL);\n\n\tvar uid = database.getCurrentUser().uid;\n\n\tdatabase.getAllTeams(uid).then(function (teams) {\n\t\tteamTiles.innerHTML = '';\n\t\tfor (var tid in teams) {\n\t\t\tvar team = teams[tid];\n\t\t\tvar tile = views.getTeamTile({\n\t\t\t\ttid: tid,\n\t\t\t\tname: team.name,\n\t\t\t\tisTemplate: team.status === 'template'\n\t\t\t});\n\t\t\tteamTiles.appendChild(tile);\n\t\t}\n\t}).catch(reportErrorToUser);\n\n\tdatabase.getPrometheus().can('contributor', function (data) {\n\t\tvar extraBtnControl = document.getElementById('extra-buttons');\n\t\textraBtnControl.innerHTML = '\\n\\t\\t\\t<button data-bind=\"button-create-template\" class=\"button is-primary is-outlined\">\\n\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t<i class=\"fa fa-address-card\"></i>\\n\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t<span>Create Team Template</span>\\n\\t\\t\\t</button>\\n\\t\\t';\n\t\tvar templateBtn = extraBtnControl.querySelectorAll('[data-bind=button-create-template]')[0];\n\t\ttemplateBtn.addEventListener('click', function (e) {\n\t\t\tvar uid = database.getCurrentUser().uid;\n\t\t\tvar jc = convertTidToJoinCode(uid);\n\t\t\tvex.dialog.prompt({\n\t\t\t\tmessage: 'What is your team template\\'s name?',\n\t\t\t\tvalue: 'My Team Template',\n\t\t\t\tcallback: function callback(value) {\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\tdatabase.createNewTeam(uid, jc, {\n\t\t\t\t\t\t\tname: value,\n\t\t\t\t\t\t\tstatus: 'template'\n\t\t\t\t\t\t}).then(function (res) {\n\t\t\t\t\t\t\tvar tid = res.tid;\n\t\t\t\t\t\t\tvar origin = window.location.origin;\n\t\t\t\t\t\t\tvar link = origin + '/charter.html?team=' + tid;\n\t\t\t\t\t\t\twindow.location = link;\n\t\t\t\t\t\t}).catch(reportErrorToUser);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}, function (data) {\n\t\tconsole.log('not allowed', data);\n\t});\n\n\tcreateBtn.addEventListener('click', function (e) {\n\t\tvar uid = database.getCurrentUser().uid;\n\t\tvar jc = convertTidToJoinCode(uid);\n\t\tvex.dialog.prompt({\n\t\t\tmessage: 'What is your team\\'s name?',\n\t\t\tvalue: 'My Team',\n\t\t\tcallback: function callback(value) {\n\t\t\t\tif (value) {\n\t\t\t\t\tdatabase.createNewTeam(uid, jc, {\n\t\t\t\t\t\tname: value\n\t\t\t\t\t}).then(function (res) {\n\t\t\t\t\t\tvar tid = res.tid;\n\t\t\t\t\t\tvar origin = window.location.origin;\n\t\t\t\t\t\tvar link = origin + '/charter.html?team=' + tid;\n\t\t\t\t\t\twindow.location = link;\n\t\t\t\t\t}).catch(reportErrorToUser);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\tvar classCode = params.instructor;\n\tif (classCode) {\n\t\tdatabase.addInstructorToClass(uid, classCode).then(function (res) {\n\t\t\tinitInstructorSection(uid);\n\t\t\tif (!res.isAlreadyInstructor) {\n\t\t\t\tvex.dialog.alert({\n\t\t\t\t\tmessage: 'You have been added as an instructor to ' + res.classData.name + '!'\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconsole.log('You are already an instructor in ' + res.classData.name + '!');\n\t\t\t}\n\t\t}).catch(reportErrorToUser);\n\t} else {\n\t\tinitInstructorSection(uid);\n\t}\n\n\tdatabase.getPrometheus().save({\n\t\ttype: 'ACCOUNT_PAGE'\n\t});\n}\n\nfunction initInstructorSection(uid) {\n\tdatabase.getInstructorClasses(uid).then(function (classMap) {\n\t\tif (Object.keys(classMap).length > 0) {\n\n\t\t\tvar classTiles = document.getElementById('class-tiles');\n\t\t\tdocument.getElementById('section-instructor').style.display = 'block';\n\t\t\tclassTiles.innerHTML = '';\n\n\t\t\tfor (var cid in classMap) {\n\t\t\t\tvar classData = classMap[cid];\n\t\t\t\tvar tile = views.getClassTile({\n\t\t\t\t\tcid: cid,\n\t\t\t\t\tname: classData.name || 'Untitled Class',\n\t\t\t\t\tteams: classData.teams || {}\n\t\t\t\t});\n\t\t\t\tclassTiles.appendChild(tile);\n\t\t\t}\n\t\t}\n\t}).catch(console.error);\n}\n\nfunction convertTidToJoinCode(tid) {\n\tvar jc = '';\n\tvar ts = tid.split('').reverse();\n\tvar limit = 5;\n\tvar half = Math.round(ts.length / 2);\n\tif (half > limit) {\n\t\tlimit = half;\n\t}\n\tfor (var t = 0; t < limit; t++) {\n\t\tjc += ts[t];\n\t}\n\treturn jc;\n}\n\nfunction reportErrorToUser(err) {\n\tvex.dialog.alert(err + '');\n}\n\nfunction getQueryParams(qs) {\n\tqs = qs.split('+').join(' ');\n\tvar params = {},\n\t    tokens,\n\t    re = /[?&]?([^=]+)=([^&]*)/g;\n\twhile (tokens = re.exec(qs)) {\n\t\tparams[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);\n\t}\n\treturn params;\n}\n\nfunction fillText(className, text) {\n\tvar spans = document.getElementsByClassName(className);\n\tfor (var s = 0; s < spans.length; s++) {\n\t\tspans[s].innerText = text;\n\t}\n}\n\nfunction fillSrc(className, text) {\n\tvar spans = document.getElementsByClassName(className);\n\tfor (var s = 0; s < spans.length; s++) {\n\t\tspans[s].src = text;\n\t}\n}\n\n},{\"./config\":1,\"./database\":2,\"./views\":4}],4:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nvar Views = function Views() {\n\n\tvar views = {\n\n\t\tgetRoleAndUpdateTile: function getRoleAndUpdateTile(model) {\n\t\t\tvar posted = new Date(model.timestamp);\n\t\t\tvar dateFormat = moment(posted).format('M/D h:mm A');\n\t\t\tvar diff = moment(Date.now()).diff(moment(model.timestamp));\n\t\t\tvar daysSinceLastUpdate = moment.duration(diff).asDays();\n\t\t\tvar tagClass = 'is-success';\n\t\t\tif (daysSinceLastUpdate >= 5) {\n\t\t\t\ttagClass = 'is-danger';\n\t\t\t} else if (daysSinceLastUpdate >= 3) {\n\t\t\t\ttagClass = 'is-warning';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-5\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"media\">\\n\\t\\t\\t\\t\\t\\t\\t<figure class=\"media-left\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"image is-48x48\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + model.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t\\t\\t\\t</figure>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"media-content content\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title is-5\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"subtitle is-6\">' + model.role + '</p>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-7\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"tag ' + tagClass + '\">' + dateFormat + '</span> ' + model.update + '\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('tile');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetRoleTile: function getRoleTile(model) {\n\t\t\tvar editSection = '<div class=\"content\">\\n\\t\\t\\t\\t<h3 class=\"title is-5\">' + model.role + '</h3>\\n\\t\\t\\t\\t<p class=\"subtitle is-6\">' + model.responsibility + '</p>\\n\\t\\t\\t</div>';\n\t\t\tif (model.editable) {\n\t\t\t\teditSection = '<div class=\"content\">\\n\\t\\t\\t\\t\\t<h3 id=\"my-title\" class=\"title is-5\" contenteditable=\"true\">' + model.role + '</h3>\\n\\t\\t\\t\\t\\t<p id=\"my-responsibility\" class=\"subtitle is-6\" contenteditable=\"true\">' + model.responsibility + '</p>\\n\\t\\t\\t\\t\\t<button id=\"my-role-save\" class=\"button is-primary is-outlined is-hidden-to-mentor\">\\n\\t\\t\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t\\t\\t<i class=\"fa fa-edit\"></i>\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t<span>Save Role</span>\\n\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t</div>';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-5\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"media\">\\n\\t\\t\\t\\t\\t\\t\\t<figure class=\"media-left\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<p class=\"image is-48x48\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + model.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t\\t\\t\\t</figure>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title is-5\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-7\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t' + editSection + '\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('tile');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetRoleTemplateTile: function getRoleTemplateTile(model) {\n\t\t\tvar editSection = '<div class=\"content\">\\n\\t\\t\\t\\t<h3 class=\"title is-5\">' + model.role + '</h3>\\n\\t\\t\\t\\t<p class=\"subtitle is-6\">' + model.responsibility + '</p>\\n\\t\\t\\t</div>';\n\t\t\tvar editButton = '';\n\t\t\tif (model.editable) {\n\t\t\t\teditSection = '<div class=\"content\">\\n\\t\\t\\t\\t\\t<h3 data-bind=\"field-role\" class=\"title is-5\" contenteditable=\"true\">' + model.role + '</h3>\\n\\t\\t\\t\\t\\t<p data-bind=\"field-responsibility\" class=\"subtitle is-6\" contenteditable=\"true\">' + model.responsibility + '</p>\\n\\t\\t\\t\\t</div>';\n\t\t\t\teditButton = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-4\">\\n\\t\\t\\t\\t\\t<button data-bind=\"button-save\" class=\"button is-primary is-outlined is-hidden-to-mentor\">\\n\\t\\t\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t\\t\\t<i class=\"fa fa-edit\"></i>\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t<span>Save Role</span>\\n\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical {model.editable ? \\'is-8\\' : \\'is-12\\'}\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"media\">\\n\\t\\t\\t\\t\\t\\t\\t<figure class=\"media-left\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<div data-bind=\"field-icon\" class=\"image is-48x48 icon-image\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\"fa fa-' + (model.icon || 'user') + '\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t</figure>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t\\t\\t' + editSection + '\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t' + editButton + '\\n\\t\\t\\t';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('tile');\n\t\t\tdiv.innerHTML = html;\n\t\t\tif (model.editable && model.onSave) {\n\t\t\t\tvar button = div.querySelectorAll('[data-bind=button-save]')[0];\n\t\t\t\tvar role = div.querySelectorAll('[data-bind=field-role]')[0];\n\t\t\t\tvar resp = div.querySelectorAll('[data-bind=field-responsibility]')[0];\n\t\t\t\tbutton.addEventListener('click', function (e) {\n\t\t\t\t\tmodel.onSave({\n\t\t\t\t\t\te: e,\n\t\t\t\t\t\tmodel: model,\n\t\t\t\t\t\trole: role.innerText,\n\t\t\t\t\t\tresponsibility: resp.innerText\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tvar iconEdit = div.querySelectorAll('[data-bind=field-icon]')[0];\n\t\t\t\ticonEdit.addEventListener('click', function (e) {\n\t\t\t\t\tmodel.onIconEdit({\n\t\t\t\t\t\te: e,\n\t\t\t\t\t\tmodel: model\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn div;\n\t\t},\n\n\t\tgetProgressUpdate: function getProgressUpdate(model) {\n\t\t\tvar posted = new Date(model.timestamp);\n\t\t\tvar dateFormat = moment(posted).format('M/D h:mm A');\n\t\t\tvar diff = moment(Date.now()).diff(moment(model.timestamp));\n\t\t\tvar daysSinceLastUpdate = moment.duration(diff).asDays();\n\t\t\tvar tagClass = 'is-success';\n\t\t\tif (daysSinceLastUpdate >= 5) {\n\t\t\t\ttagClass = 'is-danger';\n\t\t\t} else if (daysSinceLastUpdate >= 3) {\n\t\t\t\ttagClass = 'is-warning';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-5\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<span class=\"tags has-addons\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"tag ' + tagClass + ' is-medium\">' + dateFormat + '</span>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"tag is-medium\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\"image image-tag-rounded is-32x32\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + model.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\"is-medium\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t' + model.name + '\\n\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\"tile is-parent is-vertical is-7\">\\n\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t' + model.update + '\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('tile');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetLinkItem: function getLinkItem(model) {\n\t\t\tvar icon = 'file';\n\t\t\tif (model.url.indexOf('docs.google') > -1) {\n\t\t\t\ticon = 'google';\n\t\t\t\tif (model.url.indexOf('docs.google.com/document') > -1) {\n\t\t\t\t\ticon = 'file-text';\n\t\t\t\t} else if (model.url.indexOf('docs.google.com/spreadsheets') > -1) {\n\t\t\t\t\ticon = 'table';\n\t\t\t\t} else if (model.url.indexOf('docs.google.com/presentation') > -1) {\n\t\t\t\t\ticon = 'slideshare';\n\t\t\t\t}\n\t\t\t} else if (model.url.indexOf('omnipointment.com/meeting') > -1) {\n\t\t\t\ticon = 'calendar';\n\t\t\t} else if (model.url.indexOf('github.com') > -1) {\n\t\t\t\ticon = 'github';\n\t\t\t} else if (model.url.indexOf('youtube.com') > -1) {\n\t\t\t\ticon = 'youtube-play';\n\t\t\t} else if (model.url.indexOf('vimeo.com') > -1) {\n\t\t\t\ticon = 'vimeo';\n\t\t\t} else if (model.url.indexOf('codeshare.io') > -1 || model.url.indexOf('codepen.io') > -1) {\n\t\t\t\ticon = 'code-fork';\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<a target=\"_blank\" href=\"' + model.url + '\">\\n\\t\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t\\t<i class=\"fa fa-' + icon + '\"></i>\\n\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t<span>' + model.name + '</span>\\n\\t\\t\\t\\t</a>\\n\\t\\t\\t\\t<a class=\"is-danger is-hidden-to-mentor\">\\n\\t\\t\\t\\t\\t<span class=\"icon edit-link\" data-for=\"' + model.key + '\">\\n\\t\\t\\t\\t\\t\\t<i class=\"fa fa-edit\"></i>\\n\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t</a>\\n\\t\\t\\t';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('team-link');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetTeamTile: function getTeamTile(model) {\n\t\t\tvar origin = window.location.origin;\n\t\t\tvar link = origin + '/charter.html?team=' + model.tid;\n\t\t\tvar tag = '<span class=\"tag is-warning\">Template</span>';\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-vertical\">\\n\\t\\t\\t\\t\\t<div class=\"box\">\\n\\t\\t\\t\\t\\t\\t<div class=\"tile\">\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title\">' + model.name + ' ' + (model.isTemplate ? tag : '') + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t<div class=\"tile\">\\n\\t\\t\\t\\t\\t\\t\\t<a href=\"' + link + '\" class=\"button is-primary is-outlined\">View Team Charter</a>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('column');\n\t\t\tdiv.classList.add('is-4');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetClassTile: function getClassTile(model) {\n\t\t\tvar origin = window.location.origin;\n\t\t\tvar classLink = origin + '/class.html?class=' + model.cid;\n\t\t\tvar list = Object.keys(model.teams).filter(function (tid) {\n\t\t\t\treturn Object.keys(model.teams[tid]).length > 0;\n\t\t\t}).map(function (tid) {\n\t\t\t\tvar team = model.teams[tid];\n\t\t\t\tteam.tid = tid;\n\t\t\t\treturn team;\n\t\t\t});\n\t\t\tvar n = list.length;\n\t\t\tvar items = list.map(function (team) {\n\t\t\t\tvar teamLink = origin + '/charter.html?team=' + team.tid + '&mentor=true';\n\t\t\t\tvar itemHTML = '\\n\\t\\t\\t\\t\\t<div class=\"column is-4\">\\n\\t\\t\\t\\t\\t\\t<a href=' + teamLink + ' class=\"button is-primary is-outlined is-fullwidth\">' + team.name + '</a>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t';\n\t\t\t\treturn itemHTML;\n\t\t\t});\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-vertical\">\\n\\t\\t\\t\\t\\t<div class=\"tile box is-child\">\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t<p class=\"subtitle\">' + n + ' team' + (n === 1 ? '' : 's') + ' | Code: ' + model.cid + '</p>\\n\\t\\t\\t\\t\\t\\t\\t<a href=\"' + classLink + '\" class=\"button is-primary is-outlined\">View Class Dashboard</a>\\n\\t\\t\\t';\n\t\t\t/*<div class=\"columns is-multiline\">\n   \t${items.join('')}\n   </div>*/\n\t\t\thtml += '\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>';\n\t\t\t//<a href=\"${link}\" class=\"button is-primary is-outlined\">View Class Progress</a>\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('column');\n\t\t\tdiv.classList.add('is-4');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetUserTile: function getUserTile(model) {\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t<div class=\"media\">\\n\\t\\t\\t\\t\\t\\t<figure class=\"media-left\">\\n\\t\\t\\t\\t\\t\\t\\t<p class=\"image is-48x48 image-tag-rounded\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + model.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t\\t\\t</figure>\\n\\t\\t\\t\\t\\t\\t<div class=\"content\">\\n\\t\\t\\t\\t\\t\\t\\t<h3 class=\"title is-5\">' + model.name + '</h3>\\n\\t\\t\\t\\t\\t\\t\\t<p class=\"subtitle is-6\">' + model.subtitle + '</p>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('column');\n\t\t\tdiv.classList.add('is-4');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetClassTeamTable: function getClassTeamTable(model) {\n\t\t\tvar html = '\\n\\t\\t\\t\\t<thead>\\n\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t<th>Team Name</th>\\n\\t\\t\\t\\t\\t\\t<th>Members</th>\\n\\t\\t\\t\\t\\t\\t<th>Charter Edits</th>\\n\\t\\t\\t\\t\\t\\t<th>Progress Updates</th>\\n\\t\\t\\t\\t\\t\\t<th>Last Active</th>\\n\\t\\t\\t\\t\\t\\t<th>View Team</th>\\n\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t</thead>\\n\\t\\t\\t\\t<tbody>\\n\\t\\t\\t';\n\t\t\tmodel.teams.forEach(function (team) {\n\t\t\t\tvar updates = 0;\n\t\t\t\tfor (var uid in team.updates) {\n\t\t\t\t\tfor (var upid in team.updates[uid]) {\n\t\t\t\t\t\tupdates++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar link = origin + '/charter.html?team=' + team.tid + '&mentor=true';\n\t\t\t\tvar members = team.members || {};\n\t\t\t\thtml += '\\n\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t<td>' + team.name + '</td>\\n\\t\\t\\t\\t\\t\\t<td>' + Object.keys(members).length + '</td>\\n\\t\\t\\t\\t\\t\\t<td>' + Object.keys(team.edits).length + '</td>\\n\\t\\t\\t\\t\\t\\t<td>' + updates + '</td>\\n\\t\\t\\t\\t\\t\\t<td>' + moment(team.lastAccess).fromNow() + '</td>\\n\\t\\t\\t\\t\\t\\t<td>\\n\\t\\t\\t\\t\\t\\t\\t<a href=\"' + link + '\" class=\"button is-primary is-outlined\">View Charter</a>\\n\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t';\n\t\t\t});\n\t\t\thtml += '\\n\\t\\t\\t\\t</tbody>\\n\\t\\t\\t';\n\t\t\tvar table = document.createElement('table');\n\t\t\ttable.classList.add('table');\n\t\t\ttable.classList.add('is-narrow');\n\t\t\ttable.classList.add('is-fullwidth');\n\t\t\ttable.innerHTML = html;\n\t\t\treturn table;\n\t\t},\n\n\t\tgetClassTeamGrid: function getClassTeamGrid(model) {\n\t\t\tvar html = '';\n\t\t\tmodel.teams.forEach(function (team) {\n\t\t\t\tvar updates = 0;\n\t\t\t\tfor (var uid in team.updates) {\n\t\t\t\t\tfor (var upid in team.updates[uid]) {\n\t\t\t\t\t\tupdates++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar link = origin + '/charter.html?team=' + team.tid + '&code=' + team.joinCode;\n\t\t\t\tvar members = team.members || {};\n\t\t\t\thtml += '\\n\\t\\t\\t\\t\\t<div class=\"column is-6\">\\n\\t\\t\\t\\t\\t\\t<div class=\"box content has-text-centered\">\\n\\t\\t\\t\\t\\t\\t\\t<h2 class=\"title is-4\">' + team.name + '</h2 class=\"title is-4\">\\n\\t\\t\\t\\t\\t\\t\\t<p class=\"subtitle is-neatly-spaced\">Last active ' + moment(team.lastAccess).fromNow() + '</p>\\n\\t\\t\\t\\t\\t\\t\\t<p class=\"subtitle is-neatly-spaced\">' + Object.keys(team.edits).length + ' charter edits</p>\\n\\t\\t\\t\\t';\n\t\t\t\tfor (var _uid in team.members) {\n\t\t\t\t\tvar _profile = model.profiles[_uid];\n\t\t\t\t\tvar _userModel = {\n\t\t\t\t\t\tname: 'Unknown Student',\n\t\t\t\t\t\timage: './public/img/no-user.png',\n\t\t\t\t\t\tsubtitle: '...'\n\t\t\t\t\t};\n\t\t\t\t\tif (_profile.name) {\n\t\t\t\t\t\t_userModel.name = _profile.name;\n\t\t\t\t\t}\n\t\t\t\t\tif (_profile.image) {\n\t\t\t\t\t\t_userModel.image = _profile.image;\n\t\t\t\t\t}\n\t\t\t\t\tif (team.members[_uid].role) {\n\t\t\t\t\t\t_userModel.subtitle = team.members[_uid].role;\n\t\t\t\t\t}\n\t\t\t\t\tvar _userDiv = views.getUserTile(_userModel);\n\t\t\t\t\thtml += _userDiv.innerHTML;\n\t\t\t\t}\n\t\t\t\thtml += '\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"is-grouped has-text-centered\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<a href=\"' + link + '\" class=\"button is-primary is-outlined\">Join Team</a>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t';\n\t\t\t});\n\t\t\thtml += '\\n\\t\\t\\t\\t\\t<div class=\"column is-6\">\\n\\t\\t\\t\\t\\t\\t<div class=\"box content has-text-centered\">\\n\\t\\t\\t\\t\\t\\t\\t<h2 class=\"title is-4\">Start New Team</h2 class=\"title is-4\">\\n\\t\\t\\t\\t\\t\\t\\t<p class=\"subtitle is-neatly-spaced\">Don\\'t see your team?</p>\\n\\t\\t\\t';\n\n\t\t\tvar profile = model.profiles[model.uid];\n\t\t\tvar userModel = {\n\t\t\t\tname: 'Unknown Student',\n\t\t\t\timage: './public/img/no-user.png',\n\t\t\t\tsubtitle: 'Team Member'\n\t\t\t};\n\t\t\tif (profile.name) {\n\t\t\t\tuserModel.name = profile.name;\n\t\t\t}\n\t\t\tif (profile.image) {\n\t\t\t\tuserModel.image = profile.image;\n\t\t\t}\n\t\t\tvar userDiv = views.getUserTile(userModel);\n\t\t\thtml += userDiv.innerHTML;\n\n\t\t\thtml += '\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"is-grouped has-text-centered\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<a id=\"new-team\" class=\"button is-primary is-outlined\">Start New Team</a>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t';\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('columns');\n\t\t\tdiv.classList.add('is-multiline');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t},\n\n\t\tgetPromiseTable: function getPromiseTable(model) {\n\t\t\tvar html = '\\n\\t\\t\\t\\t<thead>\\n\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t<th>Name</th>\\n\\t\\t\\t\\t\\t\\t<th>Member</th>\\n\\t\\t\\t\\t\\t\\t<th>Status</th>\\n\\t\\t\\t\\t\\t\\t<th>Last Active</th>\\n\\t\\t\\t\\t\\t\\t<th>View</th>\\n\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t</thead>\\n\\t\\t\\t\\t<tbody>\\n\\t\\t\\t';\n\n\t\t\tObject.keys(model.promises).map(function (pdid) {\n\t\t\t\tvar val = model.promises[pdid];\n\t\t\t\tval.key = pdid;\n\t\t\t\treturn val;\n\t\t\t}).sort(function (a, b) {\n\t\t\t\treturn 0;\n\t\t\t}).forEach(function (promise) {\n\t\t\t\tvar authorName = 'Unknown';\n\t\t\t\tvar sinceStart = moment(promise.started).fromNow();\n\t\t\t\ttry {\n\t\t\t\t\tauthorName = model.profiles[promise.author].name;\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\t\t\t\tvar dur = moment.duration(moment(promise.due).diff(moment(Date.now())));\n\t\t\t\tvar daysLeft = Math.floor(dur.asDays());\n\t\t\t\thtml += '\\n\\t\\t\\t\\t\\t<tr>\\n\\t\\t\\t\\t\\t\\t<td>' + promise.title + '</td>\\n\\t\\t\\t\\t\\t\\t<td>' + authorName + '</td>\\n\\t\\t\\t\\t\\t\\t<td>' + (promise.completed ? 'Complete' : daysLeft + ' days left') + '</td>\\n\\t\\t\\t\\t\\t\\t<td>' + sinceStart + '</td>\\n\\t\\t\\t\\t\\t\\t<td>\\n\\t\\t\\t\\t\\t\\t\\t<button data-promiseid=\"' + promise.key + '\" class=\"button is-primary is-outlined\">View</button>\\n\\t\\t\\t\\t\\t\\t</td>\\n\\t\\t\\t\\t\\t</tr>\\n\\t\\t\\t\\t';\n\t\t\t});\n\t\t\thtml += '\\n\\t\\t\\t\\t</tbody>\\n\\t\\t\\t';\n\t\t\tvar table = document.createElement('table');\n\t\t\ttable.classList.add('table');\n\t\t\ttable.classList.add('is-narrow');\n\t\t\ttable.classList.add('is-fullwidth');\n\t\t\ttable.classList.add('is-striped');\n\t\t\ttable.innerHTML = html;\n\t\t\treturn table;\n\t\t},\n\n\t\tgetPromiseBox: function getPromiseBox(model) {\n\t\t\tvar promise = model.promise;\n\t\t\tvar profiles = model.profiles;\n\t\t\tvar levelText = 'Unknown';\n\t\t\tswitch (promise.level) {\n\t\t\t\tcase 1:\n\t\t\t\t\tlevelText = 'Small';break;\n\t\t\t\tcase 2:\n\t\t\t\t\tlevelText = 'Medium';break;\n\t\t\t\tcase 3:\n\t\t\t\t\tlevelText = 'Large';break;\n\t\t\t}\n\t\t\tvar sinceStart = moment(promise.started).fromNow();\n\t\t\tvar dueDate = moment(promise.due).format('M/D');\n\t\t\tvar authorName = 'Unknown';\n\t\t\tvar authorImage = './public/img/no-user.png';\n\t\t\ttry {\n\t\t\t\tauthorName = profiles[promise.author].name;\n\t\t\t\tauthorImage = profiles[promise.author].image;\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t\t//<h1 class=\"title is-2\">${promise.title} <span class=\"tag is-warning\">${levelText}</span></h1>\n\t\t\tvar html = '\\n\\t\\t\\t\\t<div class=\"column\">\\n\\t\\t\\t\\t<div class=\"box content\">\\n\\t\\t\\t\\t\\t<h1 class=\"title is-2\">' + promise.title + '</h1>\\n\\t\\t\\t\\t\\t<p class=\"subtitle is-neatly-spaced\">\\n\\t\\t\\t\\t\\t\\t<div class=\"comment\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"image is-16x16 is-rounded is-inline-image\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + authorImage + '\">\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"title is-6\">' + authorName + '</span>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"is-faded\"> started ' + sinceStart + '</span>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t\\t<p class=\"subtitle is-normally-spaced\">I promise to ' + promise.description + ' by ' + dueDate + '.</p>\\n\\t\\t\\t';\n\t\t\tvar linkList = Object.keys(promise.links).map(function (key) {\n\t\t\t\tvar val = promise.links[key];\n\t\t\t\tval.key = key;\n\t\t\t\treturn val;\n\t\t\t});\n\t\t\tif (linkList.length > 0) {\n\t\t\t\thtml += '<div>';\n\t\t\t\tlinkList.forEach(function (link) {\n\t\t\t\t\thtml += '<div class=\"team-link\">' + views.getLinkItem(link).innerHTML + '</div>';\n\t\t\t\t\t//html += `<li><a href=\"${link.url}\" target=\"_blank\">${link.name}</a></li>`;\n\t\t\t\t});\n\t\t\t\thtml += '</div>';\n\t\t\t}\n\t\t\thtml += '\\n\\t\\t\\t\\t\\t<div class=\"is-grouped\">\\n\\t\\t\\t\\t\\t\\t<button data-fpb=\"edit\" class=\"button is-primary is-outlined is-hidden-to-mentor\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\"fa fa-edit\"></i>\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t<span>Edit</span>\\n\\t\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t\\t<button data-fpb=\"link\" class=\"button is-primary is-outlined is-hidden-to-mentor\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\"fa fa-link\"></i>\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t<span>Add Link</span>\\n\\t\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t\\t<button data-fpb=\"back\" class=\"button is-danger is-outlined\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<i class=\"fa fa-arrow-left\"></i>\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t<span>Back to Promises</span>\\n\\t\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\"column\">\\n\\t\\t\\t\\t<div class=\"box content\">\\n\\t\\t\\t\\t\\t<h1 class=\"title is-4\">Progress</h1>\\n\\t\\t\\t\\t\\t<div id=\"comments-field\">\\n\\t\\t\\t\\t\\t';\n\n\t\t\tObject.keys(promise.comments).map(function (key) {\n\t\t\t\treturn promise.comments[key];\n\t\t\t}).sort(function (a, b) {\n\t\t\t\treturn a.timestamp - b.timestamp;\n\t\t\t}).forEach(function (comment) {\n\t\t\t\tvar commentAuthor = {\n\t\t\t\t\tname: 'Unknown',\n\t\t\t\t\timage: './public/img/no-user.png'\n\t\t\t\t};\n\t\t\t\ttry {\n\t\t\t\t\tcommentAuthor.name = profiles[comment.author].name;\n\t\t\t\t\tcommentAuthor.image = profiles[comment.author].image;\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\t\t\t\tvar sinceComment = moment(comment.timestamp).format('M/D h:mm A'); //.fromNow();\n\t\t\t\tif (comment.generated) {\n\t\t\t\t\thtml += '\\n\\t\\t\\t\\t\\t\\t<div class=\"comment\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"image is-16x16 is-rounded is-inline-image\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + commentAuthor.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"title is-6\">' + commentAuthor.name + '</span>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"is-faded\"> ' + sinceComment + ': </span>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"generated-text\">' + comment.text + '</span>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t';\n\t\t\t\t} else {\n\t\t\t\t\thtml += '\\n\\t\\t\\t\\t\\t\\t<div class=\"comment\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"image is-16x16 is-rounded is-inline-image\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<img src=\"' + commentAuthor.image + '\">\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"title is-6\">' + commentAuthor.name + '</span>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\"is-faded\"> ' + sinceComment + ': </span>\\n\\t\\t\\t\\t\\t\\t\\t<span>' + comment.text + '</span>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t';\n\t\t\t\t}\n\t\t\t});\n\n\t\t\thtml += '\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t<div class=\"is-hidden-to-mentor\">\\n\\t\\t\\t\\t\\t\\t<div class=\"tile is-child\">\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"tile-editable\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<textarea data-fpb=\"textarea\" class=\"textarea\" rows=\"2\" placeholder=\"Write here...\"></textarea>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t<div class=\"is-grouped\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<button data-fpb=\"comment\" class=\"button is-primary\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\"fa fa-comment-o\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>Comment</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t\\t\\t\\t<button data-fpb=\"complete\" class=\"button is-primary is-outlined\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\"icon\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\"fa ' + (promise.completed ? 'fa-times' : 'fa-check') + '\"></i>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>' + (promise.completed ? 'Mark as Incomplete' : 'Mark as Complete') + '</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t';\n\t\t\tvar box = document.createElement('div');\n\t\t\tbox.classList.add('columns');\n\t\t\tbox.innerHTML = html;\n\t\t\treturn box;\n\t\t},\n\n\t\tgetPromiseEditor: function getPromiseEditor(model) {\n\t\t\tif (model.description === '...') {\n\t\t\t\tmodel.description = false;\n\t\t\t}\n\t\t\tvar html = '\\n\\t\\t\\t\\t<h1 data-pef=\"title\" class=\"title is-2 nlp-editable\" contenteditable=\"true\">' + (model.title ? model.title : 'Title of Promise') + '</h1>\\n\\t\\t\\t\\t<p class=\"subtitle is-neatly-spaced\">\\n\\t\\t\\t\\t\\tI promise to <span data-pef=\"description\" class=\"nlp-editable\" contenteditable=\"true\">' + (model.description ? model.description : '(do something for my team)') + '</span> by <span data-pef=\"due\" class=\"nlp-editable\" contenteditable=\"true\">' + (model.due ? moment(model.due).format('M/D/YYYY') : 'MM/DD/YYYY') + '</span>.\\n\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t<p data-pef=\"warning\" class=\"is-danger-text\"></p>\\n\\t\\t\\t\\t<button data-pef=\"submit\" class=\"button is-primary\">Save Promise</button>\\n\\t\\t\\t';\n\t\t\tif (model.deletable) {\n\t\t\t\thtml += '<button data-pef=\"remove\" class=\"button is-danger is-outlined\">Cancel</button>';\n\t\t\t} else {\n\t\t\t\thtml += '<button data-pef=\"cancel\" class=\"button is-danger is-outlined\">Cancel</button>';\n\t\t\t}\n\t\t\tvar div = document.createElement('div');\n\t\t\tdiv.classList.add('box');\n\t\t\tdiv.classList.add('content');\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div;\n\t\t}\n\n\t};\n\n\treturn views;\n};\n\nexports.Views = Views;\n\n},{}]},{},[3])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29uZmlnLmpzIiwic3JjL2pzL2RhdGFiYXNlLmpzIiwic3JjL2pzL21lLmpzIiwic3JjL2pzL3ZpZXdzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7QUNBQSxJQUFJLFNBQVM7QUFDWixTQUFRLHlDQURJO0FBRVosYUFBWSwrQkFGQTtBQUdaLGNBQWEsc0NBSEQ7QUFJWixZQUFXLGVBSkM7QUFLWixnQkFBZSxFQUxIO0FBTVosb0JBQW1CO0FBTlAsQ0FBYjtRQVFRLE0sR0FBQSxNOzs7Ozs7OztBQ1JSLElBQUksV0FBVyxTQUFYLFFBQVcsQ0FBQyxRQUFELEVBQVcsTUFBWCxFQUFzQjs7QUFFcEMsS0FBSSxrQkFBa0IsU0FBUyxhQUFULENBQXVCLE1BQXZCLEVBQStCLGtCQUEvQixDQUF0QjtBQUNBLEtBQUksS0FBSyxnQkFBZ0IsUUFBaEIsRUFBVDtBQUNBLEtBQUksT0FBTyxnQkFBZ0IsSUFBaEIsRUFBWDtBQUNDLFFBQU8sU0FBUCxHQUFtQixJQUFuQjtBQUNBLFFBQU8sYUFBUCxHQUF1QixJQUF2QjtBQUNELEtBQUksYUFBYSxXQUFXLE1BQVgsRUFBbUIsZUFBbkIsQ0FBakI7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBOzs7Ozs7Ozs7O0FBVUMsS0FBSSxXQUFXOztBQUVkLFFBQU0sY0FBQyxRQUFELEVBQVcsUUFBWCxFQUF3QjtBQUM3QixPQUFJLFNBQVMsS0FBYjtBQUNBLFFBQUssa0JBQUwsQ0FBd0IsVUFBQyxJQUFELEVBQVU7QUFDakMsUUFBSSxJQUFKLEVBQVU7QUFDVDtBQUNBLGdCQUFXLEtBQVgsQ0FBaUIsS0FBSyxHQUF0QixFQUEyQjtBQUMxQixZQUFNLEtBQUssV0FEZTtBQUUxQixhQUFPLEtBQUssS0FGYztBQUcxQixhQUFPLEtBQUssUUFIYztBQUkxQixXQUFLLEtBQUs7QUFKZ0IsTUFBM0I7QUFNQTtBQUNBLFNBQUksQ0FBQyxN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QUosR0FBZ0IsSUFBaEI7QUFDRCxVQUFPLEdBQVA7QUFDQTs7QUFycUJVLEVBQVo7O0FBeXFCQSxRQUFPLEtBQVA7QUFFQSxDQTdxQkQ7O1FBK3FCUSxLLEdBQUEsSyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJsZXQgY29uZmlnID0ge1xuXHRhcGlLZXk6IFwiQUl6YVN5QldrOUVXUGtrdnFpcnVHOGFZbkhWMGRCUGcxejNFdE40XCIsXG5cdGF1dGhEb21haW46IFwiY2hhcnRlci1lY2IwNy5maXJlYmFzZWFwcC5jb21cIixcblx0ZGF0YWJhc2VVUkw6IFwiaHR0cHM6Ly9jaGFydGVyLWVjYjA3LmZpcmViYXNlaW8uY29tXCIsXG5cdHByb2plY3RJZDogXCJjaGFydGVyLWVjYjA3XCIsXG5cdHN0b3JhZ2VCdWNrZXQ6IFwiXCIsXG5cdG1lc3NhZ2luZ1NlbmRlcklkOiBcIjEzNDIzOTMwNTE1M1wiXG59O1xuZXhwb3J0IHtjb25maWd9OyIsImxldCBEYXRhYmFzZSA9IChmaXJlYmFzZSwgY29uZmlnKSA9PiB7XG5cblx0bGV0IENoYXJ0ZXJGaXJlYmFzZSA9IGZpcmViYXNlLmluaXRpYWxpemVBcHAoY29uZmlnLCAnQ2hhcnRlciBEYXRhYmFzZScpO1xuXHRsZXQgZGIgPSBDaGFydGVyRmlyZWJhc2UuZGF0YWJhc2UoKTtcblx0bGV0IGF1dGggPSBDaGFydGVyRmlyZWJhc2UuYXV0aCgpO1xuXHRcdGNvbmZpZy5sb2NhbGhvc3QgPSB0cnVlO1xuXHRcdGNvbmZpZy5ub1NjcmVlbnNob3RzID0gdHJ1ZTtcblx0bGV0IHByb21ldGhldXMgPSBQcm9tZXRoZXVzKGNvbmZpZywgQ2hhcnRlckZpcmViYXNlKTtcblxuLy8gU3VwZXIgRGlydHk6IFVwZGF0ZSBQcm9tZXRoZXVzIFByb21vcyBhbmQgRmVhdHVyZXMgSGVyZVxuLy8gZGIucmVmKCdwcm9tZXRoZXVzL2ZlYXR1cmVzL2NvbnRyaWJ1dG9yJykuc2V0KHtpbmZvOiB7bmFtZTogJ0NoYXJ0ZXIgQ29udHJpYnV0b3InfSwgdmFsaWRhdGU6ICdyZXR1cm4ge2FsbG93ZWQ6IHVzZXJEYXRhLmNvbnRyaWJ1dG9yLGRhdGE6IHVzZXJEYXRhfSd9KVxuXG4vL2RiLnJlZignY2xhc3Nlcy9tYXN0ZXIvdGVhbXMnKS5yZW1vdmUoKTtcbi8qZGIucmVmKCd0ZWFtcycpLm9uY2UoJ3ZhbHVlJywgKHNuYXApID0+IHtcblx0bGV0IHRlYW1NYXAgPSBzbmFwLnZhbCgpIHx8IHt9O1xuXHRmb3IgKGxldCB0aWQgaW4gdGVhbU1hcCkge1xuXHRcdGRiLnJlZihgY2xhc3Nlcy9tYXN0ZXIvdGVhbXMvJHt0aWR9YCkuc2V0KHtcblx0XHRcdGFjY2VzczogdHJ1ZSxcblx0XHRcdGpvaW5lZDogRGF0ZS5ub3coKVxuXHRcdH0pO1xuXHR9XG59KTsqL1xuXG5cdGxldCBkYXRhYmFzZSA9IHtcblx0XHRcblx0XHRpbml0OiAoY2FsbGJhY2ssIGZhbGxiYWNrKSA9PiB7XG5cdFx0XHRsZXQgY2FsbGVkID0gZmFsc2U7XG5cdFx0XHRhdXRoLm9uQXV0aFN0YXRlQ2hhbmdlZCgodXNlcikgPT4ge1xuXHRcdFx0XHRpZiAodXNlcikge1xuXHRcdFx0XHRcdC8vXG5cdFx0XHRcdFx0cHJvbWV0aGV1cy5sb2dvbih1c2VyLnVpZCwge1xuXHRcdFx0XHRcdFx0bmFtZTogdXNlci5kaXNwbGF5TmFtZSxcblx0XHRcdFx0XHRcdGVtYWlsOiB1c2VyLmVtYWlsLFxuXHRcdFx0XHRcdFx0aW1hZ2U6IHVzZXIucGhvdG9VUkwsXG5cdFx0XHRcdFx0XHR1aWQ6IHVzZXIudWlkXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly9cblx0XHRcdFx0XHRpZiAoIWNhbGxlZCkge1xuXHRcdFx0XHRcdFx0Y2FsbGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKHVzZXIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAoIWNhbGxlZCkge1xuXHRcdFx0XHRcdFx0Y2FsbGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGZhbGxiYWNrKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0bG9naW46IChjYWxsYmFjaywgbWV0aG9kKSA9PiB7XG5cdFx0XHQvL2F1dGguc2lnbk91dCgpLnRoZW4oKGRvbmUpID0+IHtcblx0XHRcdFx0bGV0IHByb3ZpZGVyID0gbmV3IGZpcmViYXNlLmF1dGguR29vZ2xlQXV0aFByb3ZpZGVyKCk7XG5cdFx0XHRcdGlmIChtZXRob2QgPT09ICdmYWNlYm9vaycpIHtcblx0XHRcdFx0XHRwcm92aWRlciA9IG5ldyBmaXJlYmFzZS5hdXRoLkZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0YXV0aC5zaWduSW5XaXRoUG9wdXAocHJvdmlkZXIpLnRoZW4oKHJlc3VsdCkgPT4ge1xuXHRcdFx0XHRcdC8vY29uc29sZS5sb2cocmVzdWx0KTtcblx0XHRcdFx0XHRsZXQgdG9rZW4gPSByZXN1bHQuY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcblx0XHRcdFx0XHRsZXQgdXNlciA9IHJlc3VsdC51c2VyO1xuXHRcdFx0XHRcdGxldCBwcm92aWRlcklkID0gJ1Vua25vd24gUHJvdmlkZXInO1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRwcm92aWRlcklkID0gdXNlci5wcm92aWRlckRhdGFbMF0ucHJvdmlkZXJJZDtcblx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvL1xuXHRcdFx0XHRcdHByb21ldGhldXMubG9nb24odXNlci51aWQsIHtcblx0XHRcdFx0XHRcdG5hbWU6IHVzZXIuZGlzcGxheU5hbWUsXG5cdFx0XHRcdFx0XHRlbWFpbDogdXNlci5lbWFpbCxcblx0XHRcdFx0XHRcdGltYWdlOiB1c2VyLnBob3RvVVJMLFxuXHRcdFx0XHRcdFx0dWlkOiB1c2VyLnVpZCxcblx0XHRcdFx0XHRcdHByb3ZpZGVyOiBwcm92aWRlcklkXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0Ly9cblx0XHRcdFx0XHRjYWxsYmFjayh1c2VyKTtcblx0XHRcdFx0fSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdFx0XHQvKmxldCBlcnJvckNvZGUgPSBlcnJvci5jb2RlO1xuXHRcdFx0XHRcdGxldCBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuXHRcdFx0XHRcdGxldCBlbWFpbCA9IGVycm9yLmVtYWlsO1xuXHRcdFx0XHRcdGxldCBjcmVkZW50aWFsID0gZXJyb3IuY3JlZGVudGlhbDsqL1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHRcdFx0XHR9KTtcblx0XHRcdC8qfSkuY2F0Y2goKGVycikgPT4ge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKGVycik7XG5cdFx0XHR9KTsqL1xuXHRcdH0sXG5cblx0XHRnZXRQcm9tZXRoZXVzOiAoKSA9PiB7XG5cdFx0XHRyZXR1cm4gcHJvbWV0aGV1cztcblx0XHR9LFxuXG5cdFx0Z2V0Q3VycmVudFVzZXI6ICgpID0+IHtcblx0XHRcdHJldHVybiBhdXRoLmN1cnJlbnRVc2VyIHx8IHt9O1xuXHRcdH0sXG5cblx0XHRzYXZlRmVlZGJhY2s6ICh0aWQsIHVpZCwgZmVlZGJhY2spID0+IHtcblx0XHRcdHJldHVybiBkYi5yZWYoYGZlZWRiYWNrYCkucHVzaCh7XG5cdFx0XHRcdHRpZDogdGlkLFxuXHRcdFx0XHR1aWQ6IHVpZCxcblx0XHRcdFx0ZmVlZGJhY2s6IGZlZWRiYWNrLFxuXHRcdFx0XHR0aW1lc3RhbXA6IERhdGUubm93KClcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRnZXRVc2VyOiAodWlkKSA9PiB7XG5cdFx0XHRpZiAoIXVpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdXNlciBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGRiLnJlZihgcHJvbWV0aGV1cy91c2Vycy8ke3VpZH0vcHJvZmlsZWApLm9uY2UoJ3ZhbHVlJywgKHNuYXApID0+IHtcblx0XHRcdFx0XHRsZXQgdXNlciA9IHNuYXAudmFsKCk7XG5cdFx0XHRcdFx0cmVzb2x2ZSh1c2VyKTtcblx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRnZXRUZWFtOiAodGlkKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGRiLnJlZihgdGVhbXMvJHt0aWR9YCkub25jZSgndmFsdWUnLCAoc25hcCkgPT4ge1xuXHRcdFx0XHRcdGxldCB0ZWFtID0gc25hcC52YWwoKSB8fCB7fTtcblx0XHRcdFx0XHRpZiAoT2JqZWN0LmtleXModGVhbSkubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0dGVhbS50aWQgPSB0aWQ7XG5cdFx0XHRcdFx0XHRyZXNvbHZlKHRlYW0pO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXNvbHZlKHt9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0Z2V0VGVhbUVkaXRzOiAodGlkKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGRiLnJlZihgZWRpdHMvJHt0aWR9YCkub25jZSgndmFsdWUnLCAoc25hcCkgPT4ge1xuXHRcdFx0XHRcdGxldCBlZGl0cyA9IHNuYXAudmFsKCkgfHwge307XG5cdFx0XHRcdFx0cmVzb2x2ZShlZGl0cyk7XG5cdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0b25UZWFtQ2hhbmdlOiAodGlkLCBjYWxsYmFjaywgZmFsbGJhY2spID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0bGV0IG1lbWJlcnMgPSB7fTtcblx0XHRcdGRiLnJlZihgdGVhbXMvJHt0aWR9YCkub24oJ3ZhbHVlJywgKHNuYXApID0+IHtcblx0XHRcdFx0bGV0IHByb21pc2VzID0gW107XG5cdFx0XHRcdGxldCB0ZWFtID0gc25hcC52YWwoKSB8fCB7fTtcblx0XHRcdFx0bGV0IG1lbWJlck1hcCA9IHRlYW0ubWVtYmVycyB8fCB7fTtcblx0XHRcdFx0Zm9yIChsZXQgdWlkIGluIG1lbWJlck1hcCkge1xuXHRcdFx0XHRcdGlmICghKHVpZCBpbiBtZW1iZXJzKSkge1xuXHRcdFx0XHRcdFx0aWYgKG1lbWJlck1hcFt1aWRdLnN0YXR1cyA9PT0gJ3RlbXBsYXRlJykge1xuXHRcdFx0XHRcdFx0XHRtZW1iZXJzW3VpZF0gPSB7XG5cdFx0XHRcdFx0XHRcdFx0bmFtZTogJ1Vua25vd24nLFxuXHRcdFx0XHRcdFx0XHRcdGltYWdlOiAnLi9wdWJsaWMvaW1nL25vLXVzZXIucG5nJyxcblx0XHRcdFx0XHRcdFx0XHR1aWQ6IHVpZCxcblx0XHRcdFx0XHRcdFx0XHRlbWFpbDogJ3RlYW1Ab21uaXBvaW50bWVudC5jb20nXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGxldCBwID0gZGF0YWJhc2UuZ2V0VXNlcih1aWQpO1xuXHRcdFx0XHRcdFx0XHRwLnVpZCA9IHVpZDtcblx0XHRcdFx0XHRcdFx0cHJvbWlzZXMucHVzaChwKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHByb21pc2VzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigodXNlcnMpID0+IHtcblx0XHRcdFx0XHRcdHVzZXJzLmZvckVhY2goKG1lbWJlciwgaWR4KSA9PiB7XG5cdFx0XHRcdFx0XHRcdGxldCB1aWQgPSBwcm9taXNlc1tpZHhdLnVpZDtcblx0XHRcdFx0XHRcdFx0bWVtYmVyc1t1aWRdID0gbWVtYmVyO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRjYWxsYmFjayh0ZWFtLCBtZW1iZXJzKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjYWxsYmFjayh0ZWFtLCBtZW1iZXJzKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdHVwZGF0ZVRlYW1OYW1lOiAodGlkLCB1aWQsIG5hbWUpID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0ZGIucmVmKGBlZGl0cy8ke3RpZH1gKS5wdXNoKHtcblx0XHRcdFx0ZmllbGQ6ICduYW1lJyxcblx0XHRcdFx0dWlkOiB1aWQsXG5cdFx0XHRcdHZhbHVlOiBuYW1lLFxuXHRcdFx0XHR0aW1lc3RhbXA6IERhdGUubm93KClcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGRiLnJlZihgdGVhbXMvJHt0aWR9L25hbWVgKS5zZXQobmFtZSk7XG5cdFx0fSxcblxuXHRcdHVwZGF0ZVF1ZXN0aW9uOiAodGlkLCB1aWQsIHF1ZXN0aW9uKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGRiLnJlZihgZWRpdHMvJHt0aWR9YCkucHVzaCh7XG5cdFx0XHRcdGZpZWxkOiAncXVlc3Rpb24nLFxuXHRcdFx0XHR1aWQ6IHVpZCxcblx0XHRcdFx0dmFsdWU6IHF1ZXN0aW9uLFxuXHRcdFx0XHR0aW1lc3RhbXA6IERhdGUubm93KClcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGRiLnJlZihgdGVhbXMvJHt0aWR9L3F1ZXN0aW9uYCkuc2V0KHF1ZXN0aW9uKTtcblx0XHR9LFxuXG5cdFx0dXBkYXRlRXhwZWN0YXRpb25zOiAodGlkLCB1aWQsIGxpc3QpID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0ZGIucmVmKGBlZGl0cy8ke3RpZH1gKS5wdXNoKHtcblx0XHRcdFx0ZmllbGQ6ICdleHBlY3RhdGlvbnMnLFxuXHRcdFx0XHR1aWQ6IHVpZCxcblx0XHRcdFx0dmFsdWU6IGxpc3QsXG5cdFx0XHRcdHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gZGIucmVmKGB0ZWFtcy8ke3RpZH0vZXhwZWN0YXRpb25zYCkuc2V0KGxpc3QpO1xuXHRcdH0sXG5cblx0XHRzdWJtaXRVcGRhdGU6ICh0aWQsIHVpZCwgdXBkYXRlKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghdWlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB1c2VyIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0Ly9cblx0XHRcdHByb21ldGhldXMuc2F2ZSh7XG5cdFx0XHRcdHR5cGU6ICdTVUJNSVRfVVBEQVRFJyxcblx0XHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRcdHVwZGF0ZTogdXBkYXRlXG5cdFx0XHR9KTtcblx0XHRcdC8vXG5cdFx0XHRyZXR1cm4gZGIucmVmKGB0ZWFtcy8ke3RpZH0vdXBkYXRlcy8ke3VpZH1gKS5wdXNoKHtcblx0XHRcdFx0dXBkYXRlOiB1cGRhdGUsXG5cdFx0XHRcdHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGFkZExpbms6ICh0aWQsIHVpZCwgZGF0YSkgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXVpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdXNlciBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdC8vXG5cdFx0XHRwcm9tZXRoZXVzLnNhdmUoe1xuXHRcdFx0XHR0eXBlOiAnQUREX0xJTksnLFxuXHRcdFx0XHR0aWQ6IHRpZCxcblx0XHRcdFx0bmFtZTogZGF0YS5uYW1lLFxuXHRcdFx0XHR1cmw6IGRhdGEudXJsXG5cdFx0XHR9KTtcblx0XHRcdC8vXG5cdFx0XHRkYi5yZWYoYGVkaXRzLyR7dGlkfWApLnB1c2goe1xuXHRcdFx0XHRmaWVsZDogJ2xpbmsnLFxuXHRcdFx0XHR1aWQ6IHVpZCxcblx0XHRcdFx0dmFsdWU6IGRhdGEsXG5cdFx0XHRcdHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gZGIucmVmKGB0ZWFtcy8ke3RpZH0vbGlua3NgKS5wdXNoKHtcblx0XHRcdFx0bmFtZTogZGF0YS5uYW1lLFxuXHRcdFx0XHR1cmw6IGRhdGEudXJsLFxuXHRcdFx0XHR1aWQ6IHVpZCxcblx0XHRcdFx0YWRkZWQ6IERhdGUubm93KClcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHR1cGRhdGVMaW5rOiAodGlkLCB1aWQsIGtleSwgZGF0YSkgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXVpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdXNlciBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICgha2V5KSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyBsaW5rIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0Ly9cblx0XHRcdHByb21ldGhldXMuc2F2ZSh7XG5cdFx0XHRcdHR5cGU6ICdVUERBVEVfTElOSycsXG5cdFx0XHRcdHRpZDogdGlkLFxuXHRcdFx0XHRuYW1lOiBkYXRhLm5hbWUsXG5cdFx0XHRcdHVybDogZGF0YS51cmwsXG5cdFx0XHRcdGtleToga2V5XG5cdFx0XHR9KTtcblx0XHRcdC8vXG5cdFx0XHRkYXRhLmtleSA9IGtleTtcblx0XHRcdGRiLnJlZihgZWRpdHMvJHt0aWR9YCkucHVzaCh7XG5cdFx0XHRcdGZpZWxkOiAnbGluaycsXG5cdFx0XHRcdHVpZDogdWlkLFxuXHRcdFx0XHR2YWx1ZTogZGF0YSxcblx0XHRcdFx0dGltZXN0YW1wOiBEYXRlLm5vdygpXG5cdFx0XHR9KTtcblx0XHRcdGxldCBwMSA9IGRiLnJlZihgdGVhbXMvJHt0aWR9L2xpbmtzLyR7a2V5fS9uYW1lYCkuc2V0KGRhdGEubmFtZSk7XG5cdFx0XHRsZXQgcDIgPSBkYi5yZWYoYHRlYW1zLyR7dGlkfS9saW5rcy8ke2tleX0vdXJsYCkuc2V0KGRhdGEudXJsKTtcblx0XHRcdHJldHVybiBQcm9taXNlLmFsbChbcDEsIHAyXSk7XG5cdFx0fSxcblxuXHRcdHJlbW92ZUxpbms6ICh0aWQsIHVpZCwga2V5KSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghdWlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB1c2VyIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFrZXkpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIGxpbmsgaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHQvL1xuXHRcdFx0cHJvbWV0aGV1cy5zYXZlKHtcblx0XHRcdFx0dHlwZTogJ1JFTU9WRV9MSU5LJyxcblx0XHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRcdGtleToga2V5XG5cdFx0XHR9KTtcblx0XHRcdC8vXG5cdFx0XHRkYi5yZWYoYGVkaXRzLyR7dGlkfWApLnB1c2goe1xuXHRcdFx0XHRmaWVsZDogJ2xpbmsnLFxuXHRcdFx0XHR1aWQ6IHVpZCxcblx0XHRcdFx0dmFsdWU6IHtcblx0XHRcdFx0XHRyZW1vdmVkOiB0cnVlLFxuXHRcdFx0XHRcdGtleToga2V5XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm4gZGIucmVmKGB0ZWFtcy8ke3RpZH0vbGlua3MvJHtrZXl9YCkucmVtb3ZlKCk7XG5cdFx0fSxcblxuXHRcdHVwZGF0ZVJvbGU6ICh0aWQsIGF1dGhvciwgZGF0YSkgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWF1dGhvcikge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gYXV0aG9yaW5nIHVzZXIgaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWRhdGEudWlkKSB7XG5cdFx0XHRcdGRhdGEudWlkID0gYXV0aG9yOyAvLyBJZiBzb21lb25lIGlzIGVkaXRpbmcgdGhlaXIgb3duIHJvbGVcblx0XHRcdH1cblx0XHRcdC8vXG5cdFx0XHRwcm9tZXRoZXVzLnNhdmUoe1xuXHRcdFx0XHR0eXBlOiAnVVBEQVRFX1JPTEUnLFxuXHRcdFx0XHR0aWQ6IHRpZCxcblx0XHRcdFx0dWlkOiBkYXRhLnVpZCxcblx0XHRcdFx0cm9sZTogZGF0YS5yb2xlLFxuXHRcdFx0XHRyZXNwb25zaWJpbGl0eTogZGF0YS5yZXNwb25zaWJpbGl0eVxuXHRcdFx0fSk7XG5cdFx0XHQvL1xuXHRcdFx0ZGIucmVmKGBlZGl0cy8ke3RpZH1gKS5wdXNoKHtcblx0XHRcdFx0ZmllbGQ6ICdyb2xlJyxcblx0XHRcdFx0dWlkOiBhdXRob3IsXG5cdFx0XHRcdHZhbHVlOiBkYXRhLFxuXHRcdFx0XHR0aW1lc3RhbXA6IERhdGUubm93KClcblx0XHRcdH0pO1xuXHRcdFx0bGV0IHAxID0gZGIucmVmKGB0ZWFtcy8ke3RpZH0vbWVtYmVycy8ke2RhdGEudWlkfS9yb2xlYCkuc2V0KGRhdGEucm9sZSk7XG5cdFx0XHRsZXQgcDIgPSBkYi5yZWYoYHRlYW1zLyR7dGlkfS9tZW1iZXJzLyR7ZGF0YS51aWR9L3Jlc3BvbnNpYmlsaXR5YCkuc2V0KGRhdGEucmVzcG9uc2liaWxpdHkpO1xuXHRcdFx0cmV0dXJuIFByb21pc2UuYWxsKFtwMSwgcDJdKTtcblx0XHR9LFxuXG5cdFx0YWRkVGVtcGxhdGVSb2xlOiAodGlkLCBhdXRob3IpID0+IHtcblx0XHRcdC8vXG5cdFx0XHRwcm9tZXRoZXVzLnNhdmUoe1xuXHRcdFx0XHR0eXBlOiAnQUREX1RFTVBMQVRFX1JPTEUnLFxuXHRcdFx0XHR0aWQ6IHRpZFxuXHRcdFx0fSk7XG5cdFx0XHQvL1xuXHRcdFx0cmV0dXJuIGRiLnJlZihgdGVhbXMvJHt0aWR9L21lbWJlcnNgKS5wdXNoKHtcblx0XHRcdFx0c3RhdHVzOiAndGVtcGxhdGUnLFxuXHRcdFx0XHRyb2xlOiAnVGVhbSBNZW1iZXInLFxuXHRcdFx0XHRqb2luZWQ6IERhdGUubm93KCksXG5cdFx0XHRcdG1lbWJlcjogdHJ1ZSxcblx0XHRcdFx0aWNvbjogJ3VzZXInXG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0dXBkYXRlUm9sZUljb246ICh0aWQsIGF1dGhvciwgZGF0YSkgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWF1dGhvcikge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gYXV0aG9yaW5nIHVzZXIgaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHQvL1xuXHRcdFx0cHJvbWV0aGV1cy5zYXZlKHtcblx0XHRcdFx0dHlwZTogJ1VQREFURV9ST0xFX0lDT04nLFxuXHRcdFx0XHR0aWQ6IHRpZCxcblx0XHRcdFx0dWlkOiBkYXRhLnVpZCxcblx0XHRcdFx0aWNvbjogZGF0YS5pY29uXG5cdFx0XHR9KTtcblx0XHRcdC8vXG5cdFx0XHRpZiAoIWRhdGEudWlkKSB7XG5cdFx0XHRcdGRhdGEudWlkID0gYXV0aG9yOyAvLyBJZiBzb21lb25lIGlzIGVkaXRpbmcgdGhlaXIgb3duIHJvbGVcblx0XHRcdH1cblx0XHRcdGRiLnJlZihgZWRpdHMvJHt0aWR9YCkucHVzaCh7XG5cdFx0XHRcdGZpZWxkOiAncm9sZScsXG5cdFx0XHRcdHVpZDogYXV0aG9yLFxuXHRcdFx0XHR2YWx1ZTogZGF0YSxcblx0XHRcdFx0dGltZXN0YW1wOiBEYXRlLm5vdygpXG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBkYi5yZWYoYHRlYW1zLyR7dGlkfS9tZW1iZXJzLyR7ZGF0YS51aWR9L2ljb25gKS5zZXQoZGF0YS5pY29uKTtcblx0XHR9LFxuXG5cdFx0am9pblRlYW06ICh0aWQsIHVpZCwgam9pbkNvZGUpID0+IHtcblx0XHRcdGlmICghdGlkKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZWFtIGlkIGdpdmVuLicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCF1aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHVzZXIgaWQgZ2l2ZW4nKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGRhdGFiYXNlLmdldFRlYW0odGlkKS50aGVuKCh0ZWFtKSA9PiB7XG5cdFx0XHRcdFx0aWYgKGpvaW5Db2RlID09PSB0ZWFtLmpvaW5Db2RlIHx8ICF0ZWFtLmpvaW5Db2RlKSB7XG5cdFx0XHRcdFx0XHRkYXRhYmFzZS5hZGRNZW1iZXIodGlkLCB1aWQpLnRoZW4oKGRvbmUpID0+IHtcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZSh7XG5cdFx0XHRcdFx0XHRcdFx0c3VjY2VzczogdHJ1ZVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlc29sdmUoe1xuXHRcdFx0XHRcdFx0XHRzdWNjZXNzOiBmYWxzZVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGFkZE1lbWJlcjogKHRpZCwgdWlkKSA9PiB7XG5cdFx0XHQvL1xuXHRcdFx0cHJvbWV0aGV1cy5zYXZlKHtcblx0XHRcdFx0dHlwZTogJ0FERF9NRU1CRVInLFxuXHRcdFx0XHR0aWQ6IHRpZCxcblx0XHRcdFx0dWlkOiB1aWRcblx0XHRcdH0pO1xuXHRcdFx0Ly9cblx0XHRcdHJldHVybiBkYi5yZWYoYHRlYW1zLyR7dGlkfS9tZW1iZXJzLyR7dWlkfWApLnNldCh7XG5cdFx0XHRcdHN0YXR1czogJ21lbWJlcicsXG5cdFx0XHRcdHJvbGU6ICdUZWFtIE1lbWJlcicsXG5cdFx0XHRcdGpvaW5lZDogRGF0ZS5ub3coKSxcblx0XHRcdFx0bWVtYmVyOiB0cnVlXG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0cmVtb3ZlTWVtYmVyOiAodGlkLCBhdXRob3IsIHVpZCkgPT4ge1xuXHRcdFx0Ly9cblx0XHRcdHByb21ldGhldXMuc2F2ZSh7XG5cdFx0XHRcdHR5cGU6ICdSRU1PVkVfTUVNQkVSJyxcblx0XHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRcdHVpZDogdWlkXG5cdFx0XHR9KTtcblx0XHRcdC8vXG5cdFx0XHRyZXR1cm4gZGIucmVmKGB0ZWFtcy8ke3RpZH0vbWVtYmVycy8ke3VpZH1gKS5yZW1vdmUoKTtcblx0XHR9LFxuXG5cdFx0Z2V0QWxsVGVhbXM6ICh1aWQpID0+IHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGxldCByZWYgPSBkYi5yZWYoYHRlYW1zYCk7XG5cdFx0XHRcdGxldCBxdWVyeSA9IHJlZi5vcmRlckJ5Q2hpbGQoYG1lbWJlcnMvJHt1aWR9L21lbWJlcmApLnN0YXJ0QXQodHJ1ZSkuZW5kQXQodHJ1ZSk7XG5cdFx0XHRcdHF1ZXJ5Lm9uY2UoJ3ZhbHVlJywgKHNuYXApID0+IHtcblx0XHRcdFx0XHRsZXQgbm9kZXMgPSBzbmFwLnZhbCgpIHx8IHt9O1xuXHRcdFx0XHRcdHJlc29sdmUobm9kZXMpO1xuXHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGNyZWF0ZU5ld1RlYW06ICh1aWQsIGpvaW5Db2RlLCBkYXRhKSA9PiB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHRsZXQgdGVhbU5hbWUgPSBkYXRhLm5hbWU7XG5cdFx0XHRcdGRiLnJlZigndGVhbXMnKS5wdXNoKHtcblx0XHRcdFx0XHRuYW1lOiB0ZWFtTmFtZSB8fCAnTmV3IFRlYW0gQ2hhcnRlcicsXG5cdFx0XHRcdFx0am9pbkNvZGU6IGpvaW5Db2RlLFxuXHRcdFx0XHRcdHN0YXR1czogZGF0YS5zdGF0dXMgfHwgJ3JlZ3VsYXInXG5cdFx0XHRcdH0pLnRoZW4oKHJlcykgPT4ge1xuXHRcdFx0XHRcdGxldCBwYXRoTGlzdCA9IHJlcy5wYXRoLmN0O1xuXHRcdFx0XHRcdGxldCB0aWQgPSBwYXRoTGlzdFtwYXRoTGlzdC5sZW5ndGggLSAxXTtcblx0XHRcdFx0XHQvL1xuXHRcdFx0XHRcdHByb21ldGhldXMuc2F2ZSh7XG5cdFx0XHRcdFx0XHR0eXBlOiAnQ1JFQVRFX1RFQU0nLFxuXHRcdFx0XHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRcdFx0XHRuYW1lOiB0ZWFtTmFtZSxcblx0XHRcdFx0XHRcdGRhdGE6IGRhdGFcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQvL1xuXHRcdFx0XHRcdGRhdGFiYXNlLmFkZE1lbWJlcih0aWQsIHVpZCkudGhlbigoZG9uZSkgPT4ge1xuXHRcdFx0XHRcdFx0cmVzb2x2ZSh7XG5cdFx0XHRcdFx0XHRcdHRpZDogdGlkXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGdldEluc3RydWN0b3JDbGFzc2VzOiAodWlkKSA9PiB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHRsZXQgcmVmID0gZGIucmVmKGBjbGFzc2VzYCk7XG5cdFx0XHRcdGxldCBxdWVyeSA9IHJlZi5vcmRlckJ5Q2hpbGQoYG1lbWJlcnMvJHt1aWR9L2FjY2Vzc2ApLnN0YXJ0QXQodHJ1ZSkuZW5kQXQodHJ1ZSk7XG5cdFx0XHRcdHF1ZXJ5Lm9uY2UoJ3ZhbHVlJywgKHNuYXApID0+IHtcblx0XHRcdFx0XHRsZXQgbm9kZXMgPSBzbmFwLnZhbCgpIHx8IHt9O1xuXHRcdFx0XHRcdGxldCBsaXN0ID0gT2JqZWN0LmtleXMobm9kZXMpLm1hcCgoY2lkKSA9PiB7XG5cdFx0XHRcdFx0XHRsZXQgY2xhc3NEYXRhID0gbm9kZXNbY2lkXTtcblx0XHRcdFx0XHRcdGNsYXNzRGF0YS5jaWQgPSBjaWQ7XG5cdFx0XHRcdFx0XHRyZXR1cm4gY2xhc3NEYXRhO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdGlmIChsaXN0Lmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdGxldCBwcm9taXNlcyA9IFtdO1xuXHRcdFx0XHRcdFx0bGlzdC5mb3JFYWNoKChjbGFzc0RhdGEpID0+IHtcblx0XHRcdFx0XHRcdFx0bGV0IGNpZCA9IGNsYXNzRGF0YS5jaWQ7XG5cdFx0XHRcdFx0XHRcdGZvciAobGV0IHRpZCBpbiBjbGFzc0RhdGEudGVhbXMpIHtcblx0XHRcdFx0XHRcdFx0XHRsZXQgcCA9IG5ldyBQcm9taXNlKChyZXNvbHZlVGVhbSwgcmVqZWN0VGVhbSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZGF0YWJhc2UuZ2V0VGVhbSh0aWQpLnRoZW4ocmVzb2x2ZVRlYW0pLmNhdGNoKHJlamVjdFRlYW0pO1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdHAuY2lkID0gY2lkO1xuXHRcdFx0XHRcdFx0XHRcdHByb21pc2VzLnB1c2gocCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0UHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKHRlYW1MaXN0KSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRlYW1MaXN0LmZvckVhY2goKHRlYW0sIHRpZHgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRsZXQgbWV0YSA9IHByb21pc2VzW3RpZHhdO1xuXHRcdFx0XHRcdFx0XHRcdGlmIChub2Rlc1ttZXRhLmNpZF0pe1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKG5vZGVzW21ldGEuY2lkXS50ZWFtc1t0ZWFtLnRpZF0pIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0bm9kZXNbbWV0YS5jaWRdLnRlYW1zW3RlYW0udGlkXSA9IHRlYW07XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZShub2Rlcylcblx0XHRcdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlc29sdmUoe30pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRnZXRDbGFzc1RlYW1zOiAoY2xhc3NDb2RlKSA9PiB7XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHRsZXQgcmVmID0gZGIucmVmKGBjbGFzc2VzLyR7Y2xhc3NDb2RlfWApO1xuXHRcdFx0XHRyZWYub25jZSgndmFsdWUnLCAoc25hcCkgPT4ge1xuXHRcdFx0XHRcdGxldCB2YWwgPSBzbmFwLnZhbCgpIHx8IHt9O1xuXHRcdFx0XHRcdGxldCBub2RlcyA9IHt9O1xuXHRcdFx0XHRcdG5vZGVzW2NsYXNzQ29kZV0gPSB2YWw7XG5cdFx0XHRcdFx0bGV0IGxpc3QgPSBPYmplY3Qua2V5cyhub2RlcykubWFwKChjaWQpID0+IHtcblx0XHRcdFx0XHRcdGxldCBjbGFzc0RhdGEgPSBub2Rlc1tjaWRdO1xuXHRcdFx0XHRcdFx0Y2xhc3NEYXRhLmNpZCA9IGNpZDtcblx0XHRcdFx0XHRcdHJldHVybiBjbGFzc0RhdGE7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0aWYgKGxpc3QubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0bGV0IHByb21pc2VzID0gW107XG5cdFx0XHRcdFx0XHRsaXN0LmZvckVhY2goKGNsYXNzRGF0YSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRsZXQgY2lkID0gY2xhc3NEYXRhLmNpZDtcblx0XHRcdFx0XHRcdFx0Zm9yIChsZXQgdGlkIGluIGNsYXNzRGF0YS50ZWFtcykge1xuXHRcdFx0XHRcdFx0XHRcdGxldCBwID0gbmV3IFByb21pc2UoKHJlc29sdmVUZWFtLCByZWplY3RUZWFtKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRkYXRhYmFzZS5nZXRUZWFtKHRpZCkudGhlbihyZXNvbHZlVGVhbSkuY2F0Y2gocmVqZWN0VGVhbSk7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0cC5jaWQgPSBjaWQ7XG5cdFx0XHRcdFx0XHRcdFx0cHJvbWlzZXMucHVzaChwKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRQcm9taXNlLmFsbChwcm9taXNlcykudGhlbigodGVhbUxpc3QpID0+IHtcblx0XHRcdFx0XHRcdFx0dGVhbUxpc3QuZm9yRWFjaCgodGVhbSwgdGlkeCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGxldCBtZXRhID0gcHJvbWlzZXNbdGlkeF07XG5cdFx0XHRcdFx0XHRcdFx0aWYgKG5vZGVzW21ldGEuY2lkXSl7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAobm9kZXNbbWV0YS5jaWRdLnRlYW1zW3RlYW0udGlkXSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRub2Rlc1ttZXRhLmNpZF0udGVhbXNbdGVhbS50aWRdID0gdGVhbTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRyZXNvbHZlKG5vZGVzKVxuXHRcdFx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmVzb2x2ZSh7fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGFkZFRlYW1Ub0NsYXNzOiAodGlkLCB1aWQsIGNvZGUpID0+IHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGRiLnJlZihgY2xhc3Nlcy8ke2NvZGV9YCkub25jZSgndmFsdWUnLCAoc25hcCkgPT4ge1xuXHRcdFx0XHRcdGxldCBjbGFzc0RhdGEgPSBzbmFwLnZhbCgpO1xuXHRcdFx0XHRcdGlmIChjbGFzc0RhdGEpIHtcblx0XHRcdFx0XHRcdC8vXG5cdFx0XHRcdFx0XHRwcm9tZXRoZXVzLnNhdmUoe1xuXHRcdFx0XHRcdFx0XHR0eXBlOiAnQUREX1RFQU1fVE9fQ0xBU1MnLFxuXHRcdFx0XHRcdFx0XHR0aWQ6IHRpZCxcblx0XHRcdFx0XHRcdFx0Y2xhc3NDb2RlOiBjb2RlXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdC8vXG5cdFx0XHRcdFx0XHRkYi5yZWYoYGNsYXNzZXMvJHtjb2RlfS90ZWFtcy8ke3RpZH1gKS5zZXQoe1xuXHRcdFx0XHRcdFx0XHRhY2Nlc3M6IHRydWUsXG5cdFx0XHRcdFx0XHRcdGpvaW5lZDogRGF0ZS5ub3coKVxuXHRcdFx0XHRcdFx0fSkudGhlbigoZG9uZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRyZXNvbHZlKGNsYXNzRGF0YSk7XG5cdFx0XHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZWplY3QoYENvdWxkIG5vdCBmaW5kIGEgY2xhc3Mgd2l0aCBjb2RlOiAke2NvZGV9LmApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0YWRkSW5zdHJ1Y3RvclRvQ2xhc3M6ICh1aWQsIGNvZGUpID0+IHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGRiLnJlZihgY2xhc3Nlcy8ke2NvZGV9YCkub25jZSgndmFsdWUnLCAoc25hcCkgPT4ge1xuXHRcdFx0XHRcdGxldCBjbGFzc0RhdGEgPSBzbmFwLnZhbCgpO1xuXHRcdFx0XHRcdGlmIChjbGFzc0RhdGEpIHtcblx0XHRcdFx0XHRcdGxldCBtZW1iZXJNYXAgPSBjbGFzc0RhdGEubWVtYmVycyB8fCB7fTtcblx0XHRcdFx0XHRcdGlmICh1aWQgaW4gbWVtYmVyTWFwKSB7XG5cdFx0XHRcdFx0XHRcdHJlc29sdmUoe1xuXHRcdFx0XHRcdFx0XHRcdGlzQWxyZWFkeUluc3RydWN0b3I6IHRydWUsXG5cdFx0XHRcdFx0XHRcdFx0Y2xhc3NEYXRhOiBjbGFzc0RhdGFcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvL1xuXHRcdFx0XHRcdFx0XHRwcm9tZXRoZXVzLnNhdmUoe1xuXHRcdFx0XHRcdFx0XHRcdHR5cGU6ICdBRERfSU5TVFJVQ1RPUl9UT19DTEFTUycsXG5cdFx0XHRcdFx0XHRcdFx0Y2xhc3NDb2RlOiBjb2RlXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHQvL1xuXHRcdFx0XHRcdFx0XHRkYi5yZWYoYGNsYXNzZXMvJHtjb2RlfS9tZW1iZXJzLyR7dWlkfWApLnNldCh7XG5cdFx0XHRcdFx0XHRcdFx0YWNjZXNzOiB0cnVlLFxuXHRcdFx0XHRcdFx0XHRcdHR5cGU6ICdpbnN0cnVjdG9yJyxcblx0XHRcdFx0XHRcdFx0XHRqb2luZWQ6IERhdGUubm93KClcblx0XHRcdFx0XHRcdFx0fSkudGhlbigoZG9uZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHJlc29sdmUoe1xuXHRcdFx0XHRcdFx0XHRcdFx0aXNBbHJlYWR5SW5zdHJ1Y3RvcjogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdFx0XHRjbGFzc0RhdGE6IGNsYXNzRGF0YVxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9KS5jYXRjaChyZWplY3QpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZWplY3QoYENvdWxkIG5vdCBmaW5kIGEgY2xhc3Mgd2l0aCBjb2RlOiAke2NvZGV9LmApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0Z2V0SW5zdHJ1Y3RvcnNCeUNsYXNzOiAoY2xhc3NDb2RlKSA9PiB7XG5cblx0XHR9LFxuXG5cdFx0Z2V0VGVhbVByb21pc2VzOiAodGlkKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGRiLnJlZihgcHJvbWlzZXMvJHt0aWR9YCkub25jZSgndmFsdWUnLCAoc25hcCkgPT4ge1xuXHRcdFx0XHRcdGxldCB2YWwgPSBzbmFwLnZhbCgpO1xuXHRcdFx0XHRcdHJlc29sdmUodmFsKTtcblx0XHRcdFx0fSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRvblRlYW1Qcm9taXNlc0NoYW5nZTogKHRpZCwgY2FsbGJhY2ssIGZhbGxiYWNrKSA9PiB7XG5cdFx0XHRpZiAoIXRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdHRyeSB7XG5cdFx0XHRcdGRiLnJlZihgcHJvbWlzZXMvJHt0aWR9YCkub24oJ3ZhbHVlJywgKHNuYXApID0+IHtcblx0XHRcdFx0XHRsZXQgdmFsID0gc25hcC52YWwoKTtcblx0XHRcdFx0XHRjYWxsYmFjayh2YWwpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKGVycik7XG5cdFx0XHRcdGlmIChmYWxsYmFjaykge1xuXHRcdFx0XHRcdGZhbGxiYWNrKGVycik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0b25Qcm9taXNlQ2hhbmdlOiAodGlkLCBwcm9taXNlaWQsIGNhbGxiYWNrLCBmYWxsYmFjaykgPT4ge1xuXHRcdFx0aWYgKCF0aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXByb21pc2VpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gcHJvbWlzZSBpZCBnaXZlbicpO1xuXHRcdFx0fVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0ZGIucmVmKGBwcm9taXNlcy8ke3RpZH1gKS5vbigndmFsdWUnLCAoc25hcCkgPT4ge1xuXHRcdFx0XHRcdGxldCB2YWwgPSBzbmFwLnZhbCgpO1xuXHRcdFx0XHRcdGNhbGxiYWNrKHZhbCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdGlmIChmYWxsYmFjaykge1xuXHRcdFx0XHRcdGZhbGxiYWNrKGVycik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH0sXG5cblx0XHRjb21tZW50T25Qcm9taXNlOiAocGFyYW1zKSA9PiB7XG5cdFx0XHRpZiAoIXBhcmFtcy50aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXBhcmFtcy5wcm9taXNlaWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHByb21pc2UgaWQgZ2l2ZW4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghcGFyYW1zLmF1dGhvcikge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gYXV0aG9yIGlkIGdpdmVuJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXBhcmFtcy50ZXh0KSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyB0ZXh0IGdpdmVuJyk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHRkYi5yZWYoYHByb21pc2VzLyR7cGFyYW1zLnRpZH1gKS5wdXNoKHtcblx0XHRcdFx0XHR0eXBlOiAnY29tbWVudCcsXG5cdFx0XHRcdFx0cHJvbWlzZWlkOiBwYXJhbXMucHJvbWlzZWlkLFxuXHRcdFx0XHRcdGF1dGhvcjogcGFyYW1zLmF1dGhvcixcblx0XHRcdFx0XHR0aW1lc3RhbXA6IERhdGUubm93KCksXG5cdFx0XHRcdFx0dGV4dDogcGFyYW1zLnRleHRcblx0XHRcdFx0fSkudGhlbihyZXNvbHZlKS5jYXRjaChyZWplY3QpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGFkZFByb21pc2U6IChwYXJhbXMpID0+IHtcblx0XHRcdGlmICghcGFyYW1zLnRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghcGFyYW1zLmF1dGhvcikge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gYXV0aG9yIGlkIGdpdmVuJyk7XG5cdFx0XHR9XG5cdFx0XHRsZXQgcGF5bG9hZCA9IHtcblx0XHRcdFx0dHlwZTogJ2VkaXQnLFxuXHRcdFx0XHRhdXRob3I6IHBhcmFtcy5hdXRob3IsXG5cdFx0XHRcdHRpbWVzdGFtcDogRGF0ZS5ub3coKVxuXHRcdFx0fTtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGRiLnJlZihgcHJvbWlzZXMvJHtwYXJhbXMudGlkfWApLnB1c2gocGF5bG9hZCkudGhlbigoZG9uZSkgPT4ge1xuXHRcdFx0XHRcdGxldCBwcm9taXNlaWQgPSBkb25lLnBhdGguY3RbMl07XG5cdFx0XHRcdFx0ZGIucmVmKGBwcm9taXNlcy8ke3BhcmFtcy50aWR9LyR7cHJvbWlzZWlkfS9wcm9taXNlaWRgKS5zZXQocHJvbWlzZWlkKS50aGVuKChmaW5pc2hlZCkgPT4ge1xuXHRcdFx0XHRcdFx0cGF5bG9hZC5wcm9taXNlaWQgPSBwcm9taXNlaWQ7XG5cdFx0XHRcdFx0XHRyZXNvbHZlKHtcblx0XHRcdFx0XHRcdFx0cHJvbWlzZWlkOiBwcm9taXNlaWQsXG5cdFx0XHRcdFx0XHRcdGRhdGE6IHBheWxvYWRcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0dW5zZXRQcm9taXNlOiAocGFyYW1zKSA9PiB7XG5cdFx0XHRpZiAoIXBhcmFtcy50aWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHRlYW0gaWQgZ2l2ZW4uJyk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXBhcmFtcy5wcm9taXNlaWQpIHtcblx0XHRcdFx0dGhyb3cgRXJyb3IoJ05vIHByb21pc2UgaWQgZ2l2ZW4nKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGRiLnJlZihgcHJvbWlzZXMvJHtwYXJhbXMudGlkfS8ke3BhcmFtcy5wcm9taXNlaWR9YCkucmVtb3ZlKCkudGhlbihyZXNvbHZlKS5jYXRjaChyZWplY3QpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdHVwZGF0ZVByb21pc2U6IChwYXJhbXMpID0+IHtcblx0XHRcdGlmICghcGFyYW1zLnRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghcGFyYW1zLnByb21pc2VpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gcHJvbWlzZSBpZCBnaXZlbicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFwYXJhbXMuYXV0aG9yKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyBhdXRob3IgaWQgZ2l2ZW4nKTtcblx0XHRcdH1cblx0XHRcdGxldCB0aWQgPSBwYXJhbXMudGlkICsgJyc7XG5cdFx0XHRsZXQgZWRpdERhdGEgPSBwYXJhbXM7XG5cdFx0XHRkZWxldGUgZWRpdERhdGEudGlkO1xuXHRcdFx0ZWRpdERhdGEudGltZXN0YW1wID0gRGF0ZS5ub3coKTtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGRiLnJlZihgcHJvbWlzZXMvJHt0aWR9YCkucHVzaChlZGl0RGF0YSkudGhlbihyZXNvbHZlKS5jYXRjaChyZWplY3QpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdGFkZExpbmtUb1Byb21pc2U6IChwYXJhbXMpID0+IHtcblx0XHRcdGlmICghcGFyYW1zLnRpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gdGVhbSBpZCBnaXZlbi4nKTtcblx0XHRcdH1cblx0XHRcdGlmICghcGFyYW1zLnByb21pc2VpZCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignTm8gcHJvbWlzZSBpZCBnaXZlbicpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCFwYXJhbXMuYXV0aG9yKSB7XG5cdFx0XHRcdHRocm93IEVycm9yKCdObyBhdXRob3IgaWQgZ2l2ZW4nKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGxldCBoYXNMaW5rSWQgPSBwYXJhbXMubGlua2lkID8gdHJ1ZSA6IGZhbHNlO1xuXHRcdFx0XHRkYi5yZWYoYHByb21pc2VzLyR7cGFyYW1zLnRpZH1gKS5wdXNoKHtcblx0XHRcdFx0XHR0eXBlOiAnbGluaycsXG5cdFx0XHRcdFx0cHJvbWlzZWlkOiBwYXJhbXMucHJvbWlzZWlkLFxuXHRcdFx0XHRcdGxpbmtpZDogcGFyYW1zLmxpbmtpZCB8fCBmYWxzZSxcblx0XHRcdFx0XHRhdXRob3I6IHBhcmFtcy5hdXRob3IsXG5cdFx0XHRcdFx0dGltZXN0YW1wOiBEYXRlLm5vdygpLFxuXHRcdFx0XHRcdG5hbWU6IHBhcmFtcy5uYW1lIHx8IGZhbHNlLFxuXHRcdFx0XHRcdHVybDogcGFyYW1zLnVybCB8fCBmYWxzZSxcblx0XHRcdFx0fSkudGhlbigoZG9uZSkgPT4ge1xuXHRcdFx0XHRcdGlmIChoYXNMaW5rSWQpIHtcblx0XHRcdFx0XHRcdHJlc29sdmUoZG9uZSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGxldCBsaW5raWQgPSBkb25lLnBhdGguY3RbMl07XG5cdFx0XHRcdFx0XHRkYi5yZWYoYHByb21pc2VzLyR7cGFyYW1zLnRpZH0vJHtsaW5raWR9L2xpbmtpZGApLnNldChsaW5raWQpLnRoZW4ocmVzb2x2ZSkuY2F0Y2gocmVqZWN0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pLmNhdGNoKHJlamVjdCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0fVxuXG5cdHJldHVybiBkYXRhYmFzZTtcbn1cblxuZXhwb3J0IHtEYXRhYmFzZX07IiwiaW1wb3J0IHtjb25maWd9IGZyb20gJy4vY29uZmlnJztcbmltcG9ydCB7RGF0YWJhc2V9IGZyb20gJy4vZGF0YWJhc2UnO1xuaW1wb3J0IHtWaWV3c30gZnJvbSAnLi92aWV3cyc7XG5cbmxldCBkYXRhYmFzZSA9IERhdGFiYXNlKGZpcmViYXNlLCBjb25maWcpO1xuXG5sZXQgcGFyYW1zID0gZ2V0UXVlcnlQYXJhbXMoZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoKTtcblxubGV0IHZpZXdzID0gVmlld3MoKTtcblxubGV0IGxvZ2luQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2luJyk7XG5sZXQgZmVlZGJhY2tCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmVlZGJhY2snKTtcbmxldCBjcmVhdGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3JlYXRlJyk7XG5sZXQgcHJvbW9CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW50ZXItcHJvbW8nKTtcbmxldCB0ZWFtVGlsZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVhbS10aWxlcycpO1xuXG4vKmxvZ2luQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0ZGF0YWJhc2UubG9naW4obWFpbik7XG59KTsqL1xuXG5kYXRhYmFzZS5pbml0KG1haW4sICgpID0+IHtcblx0Ly8gTm8gdXNlciBzaWduZWQgaW5cblx0d2luZG93LmxvY2F0aW9uID0gYCR7d2luZG93LmxvY2F0aW9uLm9yaWdpbn0vbG9naW4uaHRtbCR7ZG9jdW1lbnQubG9jYXRpb24uc2VhcmNofWA7XG59KTtcblxuZnVuY3Rpb24gbWFpbih1c2VyKSB7XG5cblx0ZmVlZGJhY2tCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdHZleC5kaWFsb2cucHJvbXB0KHtcblx0XHRcdG1lc3NhZ2U6ICdXaGF0IGZlZWRiYWNrIGRvIHlvdSBoYXZlIHRvIHNoYXJlIHdpdGggdXM/Jyxcblx0XHRcdGNhbGxiYWNrOiAoZmVlZGJhY2spID0+IHtcblx0XHRcdFx0aWYgKGZlZWRiYWNrKSB7XG5cdFx0XHRcdFx0bGV0IHVpZCA9IGRhdGFiYXNlLmdldEN1cnJlbnRVc2VyKCkudWlkO1xuXHRcdFx0XHRcdGRhdGFiYXNlLnNhdmVGZWVkYmFjayhmYWxzZSwgdWlkLCBmZWVkYmFjaykudGhlbigoZG9uZSkgPT4ge1xuXHRcdFx0XHRcdFx0dmV4LmRpYWxvZy5hbGVydCgnVGhhbmsgeW91IGZvciB5b3VyIGZlZWRiYWNrLCBpdCByZWFsbHkgaGVscHMgdXMgYSBsb3QhJyk7XG5cdFx0XHRcdFx0fSkuY2F0Y2gocmVwb3J0RXJyb3JUb1VzZXIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0pO1xuXG5cdHByb21vQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHR2ZXguZGlhbG9nLnByb21wdCh7XG5cdFx0XHRtZXNzYWdlOiAnRW50ZXIgeW91ciBwcm9tbyBjb2RlOicsXG5cdFx0XHRjYWxsYmFjazogKHByb21vQ29kZSkgPT4ge1xuXHRcdFx0XHRpZiAocHJvbW9Db2RlKSB7XG5cdFx0XHRcdFx0ZGF0YWJhc2UuZ2V0UHJvbWV0aGV1cygpLnJlZGVlbShwcm9tb0NvZGUsIChyZWRlZW1lZCkgPT4ge1xuXHRcdFx0XHRcdFx0bGV0IHRpdGxlID0gcmVkZWVtZWQudGl0bGUgfHwgYFByb21vIENvZGU6ICR7cHJvbW9Db2RlfWA7XG5cdFx0XHRcdFx0XHRsZXQgZGVzYyA9IHJlZGVlbWVkLmRlc2NyaXB0aW9uIHx8ICdTdWNjZXNmdWxseSByZWRlZW1lZCB0aGUgcHJvbW8gY29kZS4nO1xuXHRcdFx0XHRcdFx0dmV4LmRpYWxvZy5hbGVydCh7XG5cdFx0XHRcdFx0XHRcdHVuc2FmZU1lc3NhZ2U6IGBcblx0XHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuXHRcdFx0XHRcdFx0XHRcdFx0PGgzIGNsYXNzPVwidGl0bGVcIj4ke3RpdGxlfTwvaDM+XG5cdFx0XHRcdFx0XHRcdFx0XHQ8cCBjbGFzcz1cInN1YnRpdGxlXCI+JHtkZXNjfTwvcD5cblx0XHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdFx0YCxcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2s6IChvdmVyKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0d2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9LCAoZmFpbGVkKSA9PiB7XG5cdFx0XHRcdFx0XHR2ZXguZGlhbG9nLmFsZXJ0KGZhaWxlZC5tZXNzYWdlKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcblxuXHRmaWxsVGV4dCgnZmlsbC11c2VyLW5hbWUnLCB1c2VyLmRpc3BsYXlOYW1lKTtcblx0ZmlsbFNyYygnZmlsbC11c2VyLWltYWdlJywgdXNlci5waG90b1VSTCk7XG5cblx0bGV0IHVpZCA9IGRhdGFiYXNlLmdldEN1cnJlbnRVc2VyKCkudWlkO1xuXG5cdGRhdGFiYXNlLmdldEFsbFRlYW1zKHVpZCkudGhlbigodGVhbXMpID0+IHtcblx0XHR0ZWFtVGlsZXMuaW5uZXJIVE1MID0gJyc7XG5cdFx0Zm9yIChsZXQgdGlkIGluIHRlYW1zKSB7XG5cdFx0XHRsZXQgdGVhbSA9IHRlYW1zW3RpZF07XG5cdFx0XHRsZXQgdGlsZSA9IHZpZXdzLmdldFRlYW1UaWxlKHtcblx0XHRcdFx0dGlkOiB0aWQsXG5cdFx0XHRcdG5hbWU6IHRlYW0ubmFtZSxcblx0XHRcdFx0aXNUZW1wbGF0ZTogdGVhbS5zdGF0dXMgPT09ICd0ZW1wbGF0ZSdcblx0XHRcdH0pO1xuXHRcdFx0dGVhbVRpbGVzLmFwcGVuZENoaWxkKHRpbGUpO1xuXHRcdH1cblx0fSkuY2F0Y2gocmVwb3J0RXJyb3JUb1VzZXIpO1xuXG5cdGRhdGFiYXNlLmdldFByb21ldGhldXMoKS5jYW4oJ2NvbnRyaWJ1dG9yJywgKGRhdGEpID0+IHtcblx0XHRsZXQgZXh0cmFCdG5Db250cm9sID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2V4dHJhLWJ1dHRvbnMnKTtcblx0XHRleHRyYUJ0bkNvbnRyb2wuaW5uZXJIVE1MID0gYFxuXHRcdFx0PGJ1dHRvbiBkYXRhLWJpbmQ9XCJidXR0b24tY3JlYXRlLXRlbXBsYXRlXCIgY2xhc3M9XCJidXR0b24gaXMtcHJpbWFyeSBpcy1vdXRsaW5lZFwiPlxuXHRcdFx0XHQ8c3BhbiBjbGFzcz1cImljb25cIj5cblx0XHRcdFx0XHQ8aSBjbGFzcz1cImZhIGZhLWFkZHJlc3MtY2FyZFwiPjwvaT5cblx0XHRcdFx0PC9zcGFuPlxuXHRcdFx0XHQ8c3Bhbj5DcmVhdGUgVGVhbSBUZW1wbGF0ZTwvc3Bhbj5cblx0XHRcdDwvYnV0dG9uPlxuXHRcdGA7XG5cdFx0bGV0IHRlbXBsYXRlQnRuID0gZXh0cmFCdG5Db250cm9sLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWJpbmQ9YnV0dG9uLWNyZWF0ZS10ZW1wbGF0ZV0nKVswXTtcblx0XHR0ZW1wbGF0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRsZXQgdWlkID0gZGF0YWJhc2UuZ2V0Q3VycmVudFVzZXIoKS51aWQ7XG5cdFx0XHRsZXQgamMgPSBjb252ZXJ0VGlkVG9Kb2luQ29kZSh1aWQpO1xuXHRcdFx0dmV4LmRpYWxvZy5wcm9tcHQoe1xuXHRcdFx0XHRtZXNzYWdlOiBgV2hhdCBpcyB5b3VyIHRlYW0gdGVtcGxhdGUncyBuYW1lP2AsXG5cdFx0XHRcdHZhbHVlOiAnTXkgVGVhbSBUZW1wbGF0ZScsXG5cdFx0XHRcdGNhbGxiYWNrOiAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRpZiAodmFsdWUpIHtcblx0XHRcdFx0XHRcdGRhdGFiYXNlLmNyZWF0ZU5ld1RlYW0odWlkLCBqYywge1xuXHRcdFx0XHRcdFx0XHRuYW1lOiB2YWx1ZSxcblx0XHRcdFx0XHRcdFx0c3RhdHVzOiAndGVtcGxhdGUnXG5cdFx0XHRcdFx0XHR9KS50aGVuKChyZXMpID0+IHtcblx0XHRcdFx0XHRcdFx0bGV0IHRpZCA9IHJlcy50aWQ7XG5cdFx0XHRcdFx0XHRcdGxldCBvcmlnaW4gPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luO1xuXHRcdFx0XHRcdFx0XHRsZXQgbGluayA9IGAke29yaWdpbn0vY2hhcnRlci5odG1sP3RlYW09JHt0aWR9YDtcblx0XHRcdFx0XHRcdFx0d2luZG93LmxvY2F0aW9uID0gbGluaztcblx0XHRcdFx0XHRcdH0pLmNhdGNoKHJlcG9ydEVycm9yVG9Vc2VyKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cdH0sIChkYXRhKSA9PiB7XG5cdFx0Y29uc29sZS5sb2coJ25vdCBhbGxvd2VkJywgZGF0YSlcblx0fSk7XG5cblx0Y3JlYXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRsZXQgdWlkID0gZGF0YWJhc2UuZ2V0Q3VycmVudFVzZXIoKS51aWQ7XG5cdFx0bGV0IGpjID0gY29udmVydFRpZFRvSm9pbkNvZGUodWlkKTtcblx0XHR2ZXguZGlhbG9nLnByb21wdCh7XG5cdFx0XHRtZXNzYWdlOiBgV2hhdCBpcyB5b3VyIHRlYW0ncyBuYW1lP2AsXG5cdFx0XHR2YWx1ZTogJ015IFRlYW0nLFxuXHRcdFx0Y2FsbGJhY2s6ICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRpZiAodmFsdWUpIHtcblx0XHRcdFx0XHRkYXRhYmFzZS5jcmVhdGVOZXdUZWFtKHVpZCwgamMsIHtcblx0XHRcdFx0XHRcdG5hbWU6IHZhbHVlXG5cdFx0XHRcdFx0fSkudGhlbigocmVzKSA9PiB7XG5cdFx0XHRcdFx0XHRsZXQgdGlkID0gcmVzLnRpZDtcblx0XHRcdFx0XHRcdGxldCBvcmlnaW4gPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luO1xuXHRcdFx0XHRcdFx0bGV0IGxpbmsgPSBgJHtvcmlnaW59L2NoYXJ0ZXIuaHRtbD90ZWFtPSR7dGlkfWA7XG5cdFx0XHRcdFx0XHR3aW5kb3cubG9jYXRpb24gPSBsaW5rO1xuXHRcdFx0XHRcdH0pLmNhdGNoKHJlcG9ydEVycm9yVG9Vc2VyKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcblxuXHRsZXQgY2xhc3NDb2RlID0gcGFyYW1zLmluc3RydWN0b3I7XG5cdGlmIChjbGFzc0NvZGUpIHtcblx0XHRkYXRhYmFzZS5hZGRJbnN0cnVjdG9yVG9DbGFzcyh1aWQsIGNsYXNzQ29kZSkudGhlbigocmVzKSA9PiB7XG5cdFx0XHRpbml0SW5zdHJ1Y3RvclNlY3Rpb24odWlkKTtcblx0XHRcdGlmICghcmVzLmlzQWxyZWFkeUluc3RydWN0b3IpIHtcblx0XHRcdFx0dmV4LmRpYWxvZy5hbGVydCh7XG5cdFx0XHRcdFx0bWVzc2FnZTogYFlvdSBoYXZlIGJlZW4gYWRkZWQgYXMgYW4gaW5zdHJ1Y3RvciB0byAke3Jlcy5jbGFzc0RhdGEubmFtZX0hYFxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGBZb3UgYXJlIGFscmVhZHkgYW4gaW5zdHJ1Y3RvciBpbiAke3Jlcy5jbGFzc0RhdGEubmFtZX0hYCk7XG5cdFx0XHR9XG5cdFx0fSkuY2F0Y2gocmVwb3J0RXJyb3JUb1VzZXIpO1xuXHR9IGVsc2V7XG5cdFx0aW5pdEluc3RydWN0b3JTZWN0aW9uKHVpZCk7XG5cdH1cblxuXHRkYXRhYmFzZS5nZXRQcm9tZXRoZXVzKCkuc2F2ZSh7XG5cdFx0dHlwZTogJ0FDQ09VTlRfUEFHRSdcblx0fSk7XG5cbn1cblxuZnVuY3Rpb24gaW5pdEluc3RydWN0b3JTZWN0aW9uKHVpZCkge1xuXHRkYXRhYmFzZS5nZXRJbnN0cnVjdG9yQ2xhc3Nlcyh1aWQpLnRoZW4oKGNsYXNzTWFwKSA9PiB7XG5cdFx0aWYgKE9iamVjdC5rZXlzKGNsYXNzTWFwKS5sZW5ndGggPiAwKXtcblxuXHRcdFx0bGV0IGNsYXNzVGlsZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xhc3MtdGlsZXMnKTtcblx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWN0aW9uLWluc3RydWN0b3InKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblx0XHRcdGNsYXNzVGlsZXMuaW5uZXJIVE1MID0gJyc7XG5cblx0XHRcdGZvciAobGV0IGNpZCBpbiBjbGFzc01hcCkge1xuXHRcdFx0XHRsZXQgY2xhc3NEYXRhID0gY2xhc3NNYXBbY2lkXTtcblx0XHRcdFx0bGV0IHRpbGUgPSB2aWV3cy5nZXRDbGFzc1RpbGUoe1xuXHRcdFx0XHRcdGNpZDogY2lkLFxuXHRcdFx0XHRcdG5hbWU6IGNsYXNzRGF0YS5uYW1lIHx8ICdVbnRpdGxlZCBDbGFzcycsXG5cdFx0XHRcdFx0dGVhbXM6IGNsYXNzRGF0YS50ZWFtcyB8fCB7fVxuXHRcdFx0XHR9KTtcblx0XHRcdFx0Y2xhc3NUaWxlcy5hcHBlbmRDaGlsZCh0aWxlKTtcblx0XHRcdH1cblx0XHR9XG5cdH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xufVxuXG5mdW5jdGlvbiBjb252ZXJ0VGlkVG9Kb2luQ29kZSh0aWQpIHtcblx0bGV0IGpjID0gJyc7XG5cdGxldCB0cyA9IHRpZC5zcGxpdCgnJykucmV2ZXJzZSgpO1xuXHRsZXQgbGltaXQgPSA1O1xuXHRsZXQgaGFsZiA9IE1hdGgucm91bmQodHMubGVuZ3RoIC8gMik7XG5cdGlmIChoYWxmID4gbGltaXQpIHtcblx0XHRsaW1pdCA9IGhhbGY7XG5cdH1cblx0Zm9yIChsZXQgdCA9IDA7IHQgPCBsaW1pdDsgdCsrKSB7XG5cdFx0amMgKz0gdHNbdF07XG5cdH1cblx0cmV0dXJuIGpjO1xufVxuXG5mdW5jdGlvbiByZXBvcnRFcnJvclRvVXNlcihlcnIpIHtcblx0dmV4LmRpYWxvZy5hbGVydChlcnIgKyAnJyk7XG59XG5cbmZ1bmN0aW9uIGdldFF1ZXJ5UGFyYW1zKHFzKSB7XG5cdHFzID0gcXMuc3BsaXQoJysnKS5qb2luKCcgJyk7XG5cdHZhciBwYXJhbXMgPSB7fSxcblx0XHR0b2tlbnMsXG5cdFx0cmUgPSAvWz8mXT8oW149XSspPShbXiZdKikvZztcblx0d2hpbGUgKHRva2VucyA9IHJlLmV4ZWMocXMpKSB7XG5cdFx0cGFyYW1zW2RlY29kZVVSSUNvbXBvbmVudCh0b2tlbnNbMV0pXSA9IGRlY29kZVVSSUNvbXBvbmVudCh0b2tlbnNbMl0pO1xuXHR9XG5cdHJldHVybiBwYXJhbXM7XG59XG5cbmZ1bmN0aW9uIGZpbGxUZXh0KGNsYXNzTmFtZSwgdGV4dCkge1xuXHRsZXQgc3BhbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNsYXNzTmFtZSk7XG5cdGZvciAobGV0IHMgPSAwOyBzIDwgc3BhbnMubGVuZ3RoOyBzKyspIHtcblx0XHRzcGFuc1tzXS5pbm5lclRleHQgPSB0ZXh0O1xuXHR9XG59XG5cbmZ1bmN0aW9uIGZpbGxTcmMoY2xhc3NOYW1lLCB0ZXh0KSB7XG5cdGxldCBzcGFucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2xhc3NOYW1lKTtcblx0Zm9yIChsZXQgcyA9IDA7IHMgPCBzcGFucy5sZW5ndGg7IHMrKykge1xuXHRcdHNwYW5zW3NdLnNyYyA9IHRleHQ7XG5cdH1cbn1cbiIsImxldCBWaWV3cyA9ICgpID0+IHtcblxuXHRsZXQgdmlld3MgPSB7XG5cblx0XHRnZXRSb2xlQW5kVXBkYXRlVGlsZTogKG1vZGVsKSA9PiB7XG5cdFx0XHRsZXQgcG9zdGVkID0gbmV3IERhdGUobW9kZWwudGltZXN0YW1wKTtcblx0XHRcdGxldCBkYXRlRm9ybWF0ID0gbW9tZW50KHBvc3RlZCkuZm9ybWF0KCdNL0QgaDptbSBBJyk7XG5cdFx0XHRsZXQgZGlmZiA9IG1vbWVudChEYXRlLm5vdygpKS5kaWZmKG1vbWVudChtb2RlbC50aW1lc3RhbXApKTtcblx0XHRcdGxldCBkYXlzU2luY2VMYXN0VXBkYXRlID0gbW9tZW50LmR1cmF0aW9uKGRpZmYpLmFzRGF5cygpO1xuXHRcdFx0bGV0IHRhZ0NsYXNzID0gJ2lzLXN1Y2Nlc3MnO1xuXHRcdFx0aWYgKGRheXNTaW5jZUxhc3RVcGRhdGUgPj0gNSkge1xuXHRcdFx0XHR0YWdDbGFzcyA9ICdpcy1kYW5nZXInO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiAoZGF5c1NpbmNlTGFzdFVwZGF0ZSA+PSAzKSB7XG5cdFx0XHRcdHRhZ0NsYXNzID0gJ2lzLXdhcm5pbmcnO1xuXHRcdFx0fVxuXHRcdFx0bGV0IGh0bWwgPSBgXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXBhcmVudCBpcy12ZXJ0aWNhbCBpcy01XCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtY2hpbGRcIj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJtZWRpYVwiPlxuXHRcdFx0XHRcdFx0XHQ8ZmlndXJlIGNsYXNzPVwibWVkaWEtbGVmdFwiPlxuXHRcdFx0XHRcdFx0XHRcdDxwIGNsYXNzPVwiaW1hZ2UgaXMtNDh4NDhcIj5cblx0XHRcdFx0XHRcdFx0XHRcdDxpbWcgc3JjPVwiJHttb2RlbC5pbWFnZX1cIj5cblx0XHRcdFx0XHRcdFx0XHQ8L3A+XG5cdFx0XHRcdFx0XHRcdDwvZmlndXJlPlxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwibWVkaWEtY29udGVudCBjb250ZW50XCI+XG5cdFx0XHRcdFx0XHRcdFx0PGgzIGNsYXNzPVwidGl0bGUgaXMtNVwiPiR7bW9kZWwubmFtZX08L2gzPlxuXHRcdFx0XHRcdFx0XHRcdDxwIGNsYXNzPVwic3VidGl0bGUgaXMtNlwiPiR7bW9kZWwucm9sZX08L3A+XG5cdFx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1wYXJlbnQgaXMtdmVydGljYWwgaXMtN1wiPlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLWNoaWxkXCI+XG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuXHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cInRhZyAke3RhZ0NsYXNzfVwiPiR7ZGF0ZUZvcm1hdH08L3NwYW4+ICR7bW9kZWwudXBkYXRlfVxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PmA7XG5cdFx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCd0aWxlJyk7XG5cdFx0XHRcdGRpdi5pbm5lckhUTUwgPSBodG1sO1xuXHRcdFx0cmV0dXJuIGRpdjtcblx0XHR9LFxuXG5cdFx0Z2V0Um9sZVRpbGU6IChtb2RlbCkgPT4ge1xuXHRcdFx0bGV0IGVkaXRTZWN0aW9uID0gYDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG5cdFx0XHRcdDxoMyBjbGFzcz1cInRpdGxlIGlzLTVcIj4ke21vZGVsLnJvbGV9PC9oMz5cblx0XHRcdFx0PHAgY2xhc3M9XCJzdWJ0aXRsZSBpcy02XCI+JHttb2RlbC5yZXNwb25zaWJpbGl0eX08L3A+XG5cdFx0XHQ8L2Rpdj5gO1xuXHRcdFx0aWYgKG1vZGVsLmVkaXRhYmxlKSB7XG5cdFx0XHRcdGVkaXRTZWN0aW9uID0gYDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG5cdFx0XHRcdFx0PGgzIGlkPVwibXktdGl0bGVcIiBjbGFzcz1cInRpdGxlIGlzLTVcIiBjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCI+JHttb2RlbC5yb2xlfTwvaDM+XG5cdFx0XHRcdFx0PHAgaWQ9XCJteS1yZXNwb25zaWJpbGl0eVwiIGNsYXNzPVwic3VidGl0bGUgaXMtNlwiIGNvbnRlbnRlZGl0YWJsZT1cInRydWVcIj4ke21vZGVsLnJlc3BvbnNpYmlsaXR5fTwvcD5cblx0XHRcdFx0XHQ8YnV0dG9uIGlkPVwibXktcm9sZS1zYXZlXCIgY2xhc3M9XCJidXR0b24gaXMtcHJpbWFyeSBpcy1vdXRsaW5lZCBpcy1oaWRkZW4tdG8tbWVudG9yXCI+XG5cdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cImljb25cIj5cblx0XHRcdFx0XHRcdFx0PGkgY2xhc3M9XCJmYSBmYS1lZGl0XCI+PC9pPlxuXHRcdFx0XHRcdFx0PC9zcGFuPlxuXHRcdFx0XHRcdFx0PHNwYW4+U2F2ZSBSb2xlPC9zcGFuPlxuXHRcdFx0XHRcdDwvYnV0dG9uPlxuXHRcdFx0XHQ8L2Rpdj5gO1xuXHRcdFx0fVxuXHRcdFx0bGV0IGh0bWwgPSBgXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXBhcmVudCBpcy12ZXJ0aWNhbCBpcy01XCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtY2hpbGRcIj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJtZWRpYVwiPlxuXHRcdFx0XHRcdFx0XHQ8ZmlndXJlIGNsYXNzPVwibWVkaWEtbGVmdFwiPlxuXHRcdFx0XHRcdFx0XHRcdDxwIGNsYXNzPVwiaW1hZ2UgaXMtNDh4NDhcIj5cblx0XHRcdFx0XHRcdFx0XHRcdDxpbWcgc3JjPVwiJHttb2RlbC5pbWFnZX1cIj5cblx0XHRcdFx0XHRcdFx0XHQ8L3A+XG5cdFx0XHRcdFx0XHRcdDwvZmlndXJlPlxuXHRcdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuXHRcdFx0XHRcdFx0XHRcdDxoMyBjbGFzcz1cInRpdGxlIGlzLTVcIj4ke21vZGVsLm5hbWV9PC9oMz5cblx0XHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXBhcmVudCBpcy12ZXJ0aWNhbCBpcy03XCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtY2hpbGRcIj5cblx0XHRcdFx0XHRcdCR7ZWRpdFNlY3Rpb259XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PmA7XG5cdFx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCd0aWxlJyk7XG5cdFx0XHRcdGRpdi5pbm5lckhUTUwgPSBodG1sO1xuXHRcdFx0cmV0dXJuIGRpdjtcblx0XHR9LFxuXG5cdFx0Z2V0Um9sZVRlbXBsYXRlVGlsZTogKG1vZGVsKSA9PiB7XG5cdFx0XHRsZXQgZWRpdFNlY3Rpb24gPSBgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cblx0XHRcdFx0PGgzIGNsYXNzPVwidGl0bGUgaXMtNVwiPiR7bW9kZWwucm9sZX08L2gzPlxuXHRcdFx0XHQ8cCBjbGFzcz1cInN1YnRpdGxlIGlzLTZcIj4ke21vZGVsLnJlc3BvbnNpYmlsaXR5fTwvcD5cblx0XHRcdDwvZGl2PmA7XG5cdFx0XHRsZXQgZWRpdEJ1dHRvbiA9IGBgO1xuXHRcdFx0aWYgKG1vZGVsLmVkaXRhYmxlKSB7XG5cdFx0XHRcdGVkaXRTZWN0aW9uID0gYDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG5cdFx0XHRcdFx0PGgzIGRhdGEtYmluZD1cImZpZWxkLXJvbGVcIiBjbGFzcz1cInRpdGxlIGlzLTVcIiBjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCI+JHttb2RlbC5yb2xlfTwvaDM+XG5cdFx0XHRcdFx0PHAgZGF0YS1iaW5kPVwiZmllbGQtcmVzcG9uc2liaWxpdHlcIiBjbGFzcz1cInN1YnRpdGxlIGlzLTZcIiBjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCI+JHttb2RlbC5yZXNwb25zaWJpbGl0eX08L3A+XG5cdFx0XHRcdDwvZGl2PmA7XG5cdFx0XHRcdGVkaXRCdXR0b24gPSBgXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXBhcmVudCBpcy12ZXJ0aWNhbCBpcy00XCI+XG5cdFx0XHRcdFx0PGJ1dHRvbiBkYXRhLWJpbmQ9XCJidXR0b24tc2F2ZVwiIGNsYXNzPVwiYnV0dG9uIGlzLXByaW1hcnkgaXMtb3V0bGluZWQgaXMtaGlkZGVuLXRvLW1lbnRvclwiPlxuXHRcdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJpY29uXCI+XG5cdFx0XHRcdFx0XHRcdDxpIGNsYXNzPVwiZmEgZmEtZWRpdFwiPjwvaT5cblx0XHRcdFx0XHRcdDwvc3Bhbj5cblx0XHRcdFx0XHRcdDxzcGFuPlNhdmUgUm9sZTwvc3Bhbj5cblx0XHRcdFx0XHQ8L2J1dHRvbj5cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdGA7XG5cdFx0XHR9XG5cdFx0XHRsZXQgaHRtbCA9IGBcblx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtcGFyZW50IGlzLXZlcnRpY2FsIHttb2RlbC5lZGl0YWJsZSA/ICdpcy04JyA6ICdpcy0xMid9XCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgaXMtY2hpbGRcIj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJtZWRpYVwiPlxuXHRcdFx0XHRcdFx0XHQ8ZmlndXJlIGNsYXNzPVwibWVkaWEtbGVmdFwiPlxuXHRcdFx0XHRcdFx0XHRcdDxkaXYgZGF0YS1iaW5kPVwiZmllbGQtaWNvblwiIGNsYXNzPVwiaW1hZ2UgaXMtNDh4NDggaWNvbi1pbWFnZVwiPlxuXHRcdFx0XHRcdFx0XHRcdFx0PGkgY2xhc3M9XCJmYSBmYS0ke21vZGVsLmljb24gfHwgJ3VzZXInfVwiPjwvaT5cblx0XHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdFx0PC9maWd1cmU+XG5cdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLWNoaWxkXCI+XG5cdFx0XHRcdFx0XHRcdFx0JHtlZGl0U2VjdGlvbn1cblx0XHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdCR7ZWRpdEJ1dHRvbn1cblx0XHRcdGA7XG5cdFx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCd0aWxlJyk7XG5cdFx0XHRcdGRpdi5pbm5lckhUTUwgPSBodG1sO1xuXHRcdFx0aWYgKG1vZGVsLmVkaXRhYmxlICYmIG1vZGVsLm9uU2F2ZSkge1xuXHRcdFx0XHRsZXQgYnV0dG9uID0gZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWJpbmQ9YnV0dG9uLXNhdmVdJylbMF07XG5cdFx0XHRcdGxldCByb2xlID0gZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWJpbmQ9ZmllbGQtcm9sZV0nKVswXTtcblx0XHRcdFx0bGV0IHJlc3AgPSBkaXYucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtYmluZD1maWVsZC1yZXNwb25zaWJpbGl0eV0nKVswXTtcblx0XHRcdFx0YnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdFx0XHRtb2RlbC5vblNhdmUoe1xuXHRcdFx0XHRcdFx0ZTogZSxcblx0XHRcdFx0XHRcdG1vZGVsOiBtb2RlbCxcblx0XHRcdFx0XHRcdHJvbGU6IHJvbGUuaW5uZXJUZXh0LFxuXHRcdFx0XHRcdFx0cmVzcG9uc2liaWxpdHk6IHJlc3AuaW5uZXJUZXh0XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRsZXQgaWNvbkVkaXQgPSBkaXYucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtYmluZD1maWVsZC1pY29uXScpWzBdO1xuXHRcdFx0XHRpY29uRWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG5cdFx0XHRcdFx0bW9kZWwub25JY29uRWRpdCh7XG5cdFx0XHRcdFx0XHRlOiBlLFxuXHRcdFx0XHRcdFx0bW9kZWw6IG1vZGVsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGRpdjtcblx0XHR9LFxuXG5cdFx0Z2V0UHJvZ3Jlc3NVcGRhdGU6IChtb2RlbCkgPT4ge1xuXHRcdFx0bGV0IHBvc3RlZCA9IG5ldyBEYXRlKG1vZGVsLnRpbWVzdGFtcCk7XG5cdFx0XHRsZXQgZGF0ZUZvcm1hdCA9IG1vbWVudChwb3N0ZWQpLmZvcm1hdCgnTS9EIGg6bW0gQScpO1xuXHRcdFx0bGV0IGRpZmYgPSBtb21lbnQoRGF0ZS5ub3coKSkuZGlmZihtb21lbnQobW9kZWwudGltZXN0YW1wKSk7XG5cdFx0XHRsZXQgZGF5c1NpbmNlTGFzdFVwZGF0ZSA9IG1vbWVudC5kdXJhdGlvbihkaWZmKS5hc0RheXMoKTtcblx0XHRcdGxldCB0YWdDbGFzcyA9ICdpcy1zdWNjZXNzJztcblx0XHRcdGlmIChkYXlzU2luY2VMYXN0VXBkYXRlID49IDUpIHtcblx0XHRcdFx0dGFnQ2xhc3MgPSAnaXMtZGFuZ2VyJztcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYgKGRheXNTaW5jZUxhc3RVcGRhdGUgPj0gMykge1xuXHRcdFx0XHR0YWdDbGFzcyA9ICdpcy13YXJuaW5nJztcblx0XHRcdH1cblx0XHRcdGxldCBodG1sID0gYFxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1wYXJlbnQgaXMtdmVydGljYWwgaXMtNVwiPlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLWNoaWxkXCI+XG5cdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cInRhZ3MgaGFzLWFkZG9uc1wiPlxuXHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cInRhZyAke3RhZ0NsYXNzfSBpcy1tZWRpdW1cIj4ke2RhdGVGb3JtYXR9PC9zcGFuPlxuXHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cInRhZyBpcy1tZWRpdW1cIj5cblx0XHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cImltYWdlIGltYWdlLXRhZy1yb3VuZGVkIGlzLTMyeDMyXCI+XG5cdFx0XHRcdFx0XHRcdFx0XHQ8aW1nIHNyYz1cIiR7bW9kZWwuaW1hZ2V9XCI+XG5cdFx0XHRcdFx0XHRcdFx0PC9zcGFuPlxuXHRcdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwiaXMtbWVkaXVtXCI+XG5cdFx0XHRcdFx0XHRcdFx0XHQke21vZGVsLm5hbWV9XG5cdFx0XHRcdFx0XHRcdFx0PC9zcGFuPlxuXHRcdFx0XHRcdFx0XHQ8L3NwYW4+XG5cdFx0XHRcdFx0XHQ8L3NwYW4+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwidGlsZSBpcy1wYXJlbnQgaXMtdmVydGljYWwgaXMtN1wiPlxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLWNoaWxkXCI+XG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuXHRcdFx0XHRcdFx0XHQke21vZGVsLnVwZGF0ZX1cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8L2Rpdj5gO1xuXHRcdFx0bGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRkaXYuY2xhc3NMaXN0LmFkZCgndGlsZScpO1xuXHRcdFx0XHRkaXYuaW5uZXJIVE1MID0gaHRtbDtcblx0XHRcdHJldHVybiBkaXY7XG5cdFx0fSxcblxuXHRcdGdldExpbmtJdGVtOiAobW9kZWwpID0+IHtcblx0XHRcdGxldCBpY29uID0gJ2ZpbGUnO1xuXHRcdFx0aWYgKG1vZGVsLnVybC5pbmRleE9mKCdkb2NzLmdvb2dsZScpID4gLTEpIHtcblx0XHRcdFx0aWNvbiA9ICdnb29nbGUnO1xuXHRcdFx0XHRpZiAobW9kZWwudXJsLmluZGV4T2YoJ2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudCcpID4gLTEpIHtcblx0XHRcdFx0XHRpY29uID0gJ2ZpbGUtdGV4dCc7XG5cdFx0XHRcdH0gZWxzZSBpZiAobW9kZWwudXJsLmluZGV4T2YoJ2RvY3MuZ29vZ2xlLmNvbS9zcHJlYWRzaGVldHMnKSA+IC0xKSB7XG5cdFx0XHRcdFx0aWNvbiA9ICd0YWJsZSc7XG5cdFx0XHRcdH0gZWxzZSBpZiAobW9kZWwudXJsLmluZGV4T2YoJ2RvY3MuZ29vZ2xlLmNvbS9wcmVzZW50YXRpb24nKSA+IC0xKSB7XG5cdFx0XHRcdFx0aWNvbiA9ICdzbGlkZXNoYXJlJztcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChtb2RlbC51cmwuaW5kZXhPZignb21uaXBvaW50bWVudC5jb20vbWVldGluZycpID4gLTEpIHtcblx0XHRcdFx0aWNvbiA9ICdjYWxlbmRhcic7XG5cdFx0XHR9IGVsc2UgaWYgKG1vZGVsLnVybC5pbmRleE9mKCdnaXRodWIuY29tJykgPiAtMSkge1xuXHRcdFx0XHRpY29uID0gJ2dpdGh1Yic7XG5cdFx0XHR9IGVsc2UgaWYgKG1vZGVsLnVybC5pbmRleE9mKCd5b3V0dWJlLmNvbScpID4gLTEpIHtcblx0XHRcdFx0aWNvbiA9ICd5b3V0dWJlLXBsYXknO1xuXHRcdFx0fSBlbHNlIGlmIChtb2RlbC51cmwuaW5kZXhPZigndmltZW8uY29tJykgPiAtMSkge1xuXHRcdFx0XHRpY29uID0gJ3ZpbWVvJztcblx0XHRcdH0gZWxzZSBpZiAobW9kZWwudXJsLmluZGV4T2YoJ2NvZGVzaGFyZS5pbycpID4gLTEgfHwgbW9kZWwudXJsLmluZGV4T2YoJ2NvZGVwZW4uaW8nKSA+IC0xKSB7XG5cdFx0XHRcdGljb24gPSAnY29kZS1mb3JrJztcblx0XHRcdH1cblx0XHRcdGxldCBodG1sID0gYFxuXHRcdFx0XHQ8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiJHttb2RlbC51cmx9XCI+XG5cdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJpY29uXCI+XG5cdFx0XHRcdFx0XHQ8aSBjbGFzcz1cImZhIGZhLSR7aWNvbn1cIj48L2k+XG5cdFx0XHRcdFx0PC9zcGFuPlxuXHRcdFx0XHRcdDxzcGFuPiR7bW9kZWwubmFtZX08L3NwYW4+XG5cdFx0XHRcdDwvYT5cblx0XHRcdFx0PGEgY2xhc3M9XCJpcy1kYW5nZXIgaXMtaGlkZGVuLXRvLW1lbnRvclwiPlxuXHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwiaWNvbiBlZGl0LWxpbmtcIiBkYXRhLWZvcj1cIiR7bW9kZWwua2V5fVwiPlxuXHRcdFx0XHRcdFx0PGkgY2xhc3M9XCJmYSBmYS1lZGl0XCI+PC9pPlxuXHRcdFx0XHRcdDwvc3Bhbj5cblx0XHRcdFx0PC9hPlxuXHRcdFx0YDtcblx0XHRcdGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0ZGl2LmNsYXNzTGlzdC5hZGQoJ3RlYW0tbGluaycpO1xuXHRcdFx0XHRkaXYuaW5uZXJIVE1MID0gaHRtbDtcblx0XHRcdHJldHVybiBkaXY7XG5cdFx0fSxcblxuXHRcdGdldFRlYW1UaWxlOiAobW9kZWwpID0+IHtcblx0XHRcdGxldCBvcmlnaW4gPSB3aW5kb3cubG9jYXRpb24ub3JpZ2luO1xuXHRcdFx0bGV0IGxpbmsgPSBgJHtvcmlnaW59L2NoYXJ0ZXIuaHRtbD90ZWFtPSR7bW9kZWwudGlkfWA7XG5cdFx0XHRsZXQgdGFnID0gYDxzcGFuIGNsYXNzPVwidGFnIGlzLXdhcm5pbmdcIj5UZW1wbGF0ZTwvc3Bhbj5gO1xuXHRcdFx0bGV0IGh0bWwgPSBgXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXZlcnRpY2FsXCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cImJveFwiPlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGVcIj5cblx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cblx0XHRcdFx0XHRcdFx0XHQ8aDMgY2xhc3M9XCJ0aXRsZVwiPiR7bW9kZWwubmFtZX0gJHttb2RlbC5pc1RlbXBsYXRlID8gdGFnIDogJyd9PC9oMz5cblx0XHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlXCI+XG5cdFx0XHRcdFx0XHRcdDxhIGhyZWY9XCIke2xpbmt9XCIgY2xhc3M9XCJidXR0b24gaXMtcHJpbWFyeSBpcy1vdXRsaW5lZFwiPlZpZXcgVGVhbSBDaGFydGVyPC9hPlxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PmA7XG5cdFx0XHRsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCdjb2x1bW4nKTtcblx0XHRcdFx0ZGl2LmNsYXNzTGlzdC5hZGQoJ2lzLTQnKTtcblx0XHRcdFx0ZGl2LmlubmVySFRNTCA9IGh0bWw7XG5cdFx0XHRyZXR1cm4gZGl2O1xuXHRcdH0sXG5cblx0XHRnZXRDbGFzc1RpbGU6IChtb2RlbCkgPT4ge1xuXHRcdFx0bGV0IG9yaWdpbiA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XG5cdFx0XHRsZXQgY2xhc3NMaW5rID0gYCR7b3JpZ2lufS9jbGFzcy5odG1sP2NsYXNzPSR7bW9kZWwuY2lkfWA7XG5cdFx0XHRsZXQgbGlzdCA9IE9iamVjdC5rZXlzKG1vZGVsLnRlYW1zKS5maWx0ZXIoKHRpZCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gT2JqZWN0LmtleXMobW9kZWwudGVhbXNbdGlkXSkubGVuZ3RoID4gMDtcblx0XHRcdH0pLm1hcCgodGlkKSA9PiB7XG5cdFx0XHRcdGxldCB0ZWFtID0gbW9kZWwudGVhbXNbdGlkXTtcblx0XHRcdFx0dGVhbS50aWQgPSB0aWQ7XG5cdFx0XHRcdHJldHVybiB0ZWFtO1xuXHRcdFx0fSk7XG5cdFx0XHRsZXQgbiA9IGxpc3QubGVuZ3RoO1xuXHRcdFx0bGV0IGl0ZW1zID0gbGlzdC5tYXAoKHRlYW0pID0+IHtcblx0XHRcdFx0bGV0IHRlYW1MaW5rID0gYCR7b3JpZ2lufS9jaGFydGVyLmh0bWw/dGVhbT0ke3RlYW0udGlkfSZtZW50b3I9dHJ1ZWA7XG5cdFx0XHRcdGxldCBpdGVtSFRNTCA9IGBcblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29sdW1uIGlzLTRcIj5cblx0XHRcdFx0XHRcdDxhIGhyZWY9JHt0ZWFtTGlua30gY2xhc3M9XCJidXR0b24gaXMtcHJpbWFyeSBpcy1vdXRsaW5lZCBpcy1mdWxsd2lkdGhcIj4ke3RlYW0ubmFtZX08L2E+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdGA7XG5cdFx0XHRcdHJldHVybiBpdGVtSFRNTDtcblx0XHRcdH0pO1xuXHRcdFx0bGV0IGh0bWwgPSBgXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLXZlcnRpY2FsXCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cInRpbGUgYm94IGlzLWNoaWxkXCI+XG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29udGVudFwiPlxuXHRcdFx0XHRcdFx0XHQ8aDMgY2xhc3M9XCJ0aXRsZVwiPiR7bW9kZWwubmFtZX08L2gzPlxuXHRcdFx0XHRcdFx0XHQ8cCBjbGFzcz1cInN1YnRpdGxlXCI+JHtufSB0ZWFtJHtuID09PSAxID8gJycgOiAncyd9IHwgQ29kZTogJHttb2RlbC5jaWR9PC9wPlxuXHRcdFx0XHRcdFx0XHQ8YSBocmVmPVwiJHtjbGFzc0xpbmt9XCIgY2xhc3M9XCJidXR0b24gaXMtcHJpbWFyeSBpcy1vdXRsaW5lZFwiPlZpZXcgQ2xhc3MgRGFzaGJvYXJkPC9hPlxuXHRcdFx0YDtcblx0XHRcdFx0XHRcdFx0Lyo8ZGl2IGNsYXNzPVwiY29sdW1ucyBpcy1tdWx0aWxpbmVcIj5cblx0XHRcdFx0XHRcdFx0XHQke2l0ZW1zLmpvaW4oJycpfVxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj4qL1xuXHRcdFx0aHRtbCArPSBgXG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PC9kaXY+YDtcblx0XHRcdFx0Ly88YSBocmVmPVwiJHtsaW5rfVwiIGNsYXNzPVwiYnV0dG9uIGlzLXByaW1hcnkgaXMtb3V0bGluZWRcIj5WaWV3IENsYXNzIFByb2dyZXNzPC9hPlxuXHRcdFx0bGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRkaXYuY2xhc3NMaXN0LmFkZCgnY29sdW1uJyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCdpcy00Jyk7XG5cdFx0XHRcdGRpdi5pbm5lckhUTUwgPSBodG1sO1xuXHRcdFx0cmV0dXJuIGRpdjtcblx0XHR9LFxuXG5cdFx0Z2V0VXNlclRpbGU6IChtb2RlbCkgPT4ge1xuXHRcdFx0bGV0IGh0bWwgPSBgXG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLWNoaWxkXCI+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cIm1lZGlhXCI+XG5cdFx0XHRcdFx0XHQ8ZmlndXJlIGNsYXNzPVwibWVkaWEtbGVmdFwiPlxuXHRcdFx0XHRcdFx0XHQ8cCBjbGFzcz1cImltYWdlIGlzLTQ4eDQ4IGltYWdlLXRhZy1yb3VuZGVkXCI+XG5cdFx0XHRcdFx0XHRcdFx0PGltZyBzcmM9XCIke21vZGVsLmltYWdlfVwiPlxuXHRcdFx0XHRcdFx0XHQ8L3A+XG5cdFx0XHRcdFx0XHQ8L2ZpZ3VyZT5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb250ZW50XCI+XG5cdFx0XHRcdFx0XHRcdDxoMyBjbGFzcz1cInRpdGxlIGlzLTVcIj4ke21vZGVsLm5hbWV9PC9oMz5cblx0XHRcdFx0XHRcdFx0PHAgY2xhc3M9XCJzdWJ0aXRsZSBpcy02XCI+JHttb2RlbC5zdWJ0aXRsZX08L3A+XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHRgO1xuXHRcdFx0bGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRkaXYuY2xhc3NMaXN0LmFkZCgnY29sdW1uJyk7XG5cdFx0XHRcdGRpdi5jbGFzc0xpc3QuYWRkKCdpcy00Jyk7XG5cdFx0XHRcdGRpdi5pbm5lckhUTUwgPSBodG1sO1xuXHRcdFx0cmV0dXJuIGRpdjtcblx0XHR9LFxuXG5cdFx0Z2V0Q2xhc3NUZWFtVGFibGU6IChtb2RlbCkgPT4ge1xuXHRcdFx0bGV0IGh0bWwgPSBgXG5cdFx0XHRcdDx0aGVhZD5cblx0XHRcdFx0XHQ8dHI+XG5cdFx0XHRcdFx0XHQ8dGg+VGVhbSBOYW1lPC90aD5cblx0XHRcdFx0XHRcdDx0aD5NZW1iZXJzPC90aD5cblx0XHRcdFx0XHRcdDx0aD5DaGFydGVyIEVkaXRzPC90aD5cblx0XHRcdFx0XHRcdDx0aD5Qcm9ncmVzcyBVcGRhdGVzPC90aD5cblx0XHRcdFx0XHRcdDx0aD5MYXN0IEFjdGl2ZTwvdGg+XG5cdFx0XHRcdFx0XHQ8dGg+VmlldyBUZWFtPC90aD5cblx0XHRcdFx0XHQ8L3RyPlxuXHRcdFx0XHQ8L3RoZWFkPlxuXHRcdFx0XHQ8dGJvZHk+XG5cdFx0XHRgO1xuXHRcdFx0bW9kZWwudGVhbXMuZm9yRWFjaCgodGVhbSkgPT4ge1xuXHRcdFx0XHRsZXQgdXBkYXRlcyA9IDA7XG5cdFx0XHRcdGZvciAobGV0IHVpZCBpbiB0ZWFtLnVwZGF0ZXMpIHtcblx0XHRcdFx0XHRmb3IgKGxldCB1cGlkIGluIHRlYW0udXBkYXRlc1t1aWRdKSB7XG5cdFx0XHRcdFx0XHR1cGRhdGVzKys7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGxldCBsaW5rID0gYCR7b3JpZ2lufS9jaGFydGVyLmh0bWw/dGVhbT0ke3RlYW0udGlkfSZtZW50b3I9dHJ1ZWA7XG5cdFx0XHRcdGxldCBtZW1iZXJzID0gdGVhbS5tZW1iZXJzIHx8IHt9O1xuXHRcdFx0XHRodG1sICs9IGBcblx0XHRcdFx0XHQ8dHI+XG5cdFx0XHRcdFx0XHQ8dGQ+JHt0ZWFtLm5hbWV9PC90ZD5cblx0XHRcdFx0XHRcdDx0ZD4ke09iamVjdC5rZXlzKG1lbWJlcnMpLmxlbmd0aH08L3RkPlxuXHRcdFx0XHRcdFx0PHRkPiR7T2JqZWN0LmtleXModGVhbS5lZGl0cykubGVuZ3RofTwvdGQ+XG5cdFx0XHRcdFx0XHQ8dGQ+JHt1cGRhdGVzfTwvdGQ+XG5cdFx0XHRcdFx0XHQ8dGQ+JHttb21lbnQodGVhbS5sYXN0QWNjZXNzKS5mcm9tTm93KCl9PC90ZD5cblx0XHRcdFx0XHRcdDx0ZD5cblx0XHRcdFx0XHRcdFx0PGEgaHJlZj1cIiR7bGlua31cIiBjbGFzcz1cImJ1dHRvbiBpcy1wcmltYXJ5IGlzLW91dGxpbmVkXCI+VmlldyBDaGFydGVyPC9hPlxuXHRcdFx0XHRcdFx0PC90ZD5cblx0XHRcdFx0XHQ8L3RyPlxuXHRcdFx0XHRgO1xuXHRcdFx0fSk7XG5cdFx0XHRodG1sICs9IGBcblx0XHRcdFx0PC90Ym9keT5cblx0XHRcdGA7XG5cdFx0XHRsZXQgdGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xuXHRcdFx0XHR0YWJsZS5jbGFzc0xpc3QuYWRkKCd0YWJsZScpO1xuXHRcdFx0XHR0YWJsZS5jbGFzc0xpc3QuYWRkKCdpcy1uYXJyb3cnKTtcblx0XHRcdFx0dGFibGUuY2xhc3NMaXN0LmFkZCgnaXMtZnVsbHdpZHRoJyk7XG5cdFx0XHRcdHRhYmxlLmlubmVySFRNTCA9IGh0bWw7XG5cdFx0XHRyZXR1cm4gdGFibGU7XG5cdFx0fSxcblxuXHRcdGdldENsYXNzVGVhbUdyaWQ6IChtb2RlbCkgPT4ge1xuXHRcdFx0bGV0IGh0bWwgPSBgYDtcblx0XHRcdG1vZGVsLnRlYW1zLmZvckVhY2goKHRlYW0pID0+IHtcblx0XHRcdFx0bGV0IHVwZGF0ZXMgPSAwO1xuXHRcdFx0XHRmb3IgKGxldCB1aWQgaW4gdGVhbS51cGRhdGVzKSB7XG5cdFx0XHRcdFx0Zm9yIChsZXQgdXBpZCBpbiB0ZWFtLnVwZGF0ZXNbdWlkXSkge1xuXHRcdFx0XHRcdFx0dXBkYXRlcysrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRsZXQgbGluayA9IGAke29yaWdpbn0vY2hhcnRlci5odG1sP3RlYW09JHt0ZWFtLnRpZH0mY29kZT0ke3RlYW0uam9pbkNvZGV9YDtcblx0XHRcdFx0bGV0IG1lbWJlcnMgPSB0ZWFtLm1lbWJlcnMgfHwge307XG5cdFx0XHRcdGh0bWwgKz0gYFxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb2x1bW4gaXMtNlwiPlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImJveCBjb250ZW50IGhhcy10ZXh0LWNlbnRlcmVkXCI+XG5cdFx0XHRcdFx0XHRcdDxoMiBjbGFzcz1cInRpdGxlIGlzLTRcIj4ke3RlYW0ubmFtZX08L2gyIGNsYXNzPVwidGl0bGUgaXMtNFwiPlxuXHRcdFx0XHRcdFx0XHQ8cCBjbGFzcz1cInN1YnRpdGxlIGlzLW5lYXRseS1zcGFjZWRcIj5MYXN0IGFjdGl2ZSAke21vbWVudCh0ZWFtLmxhc3RBY2Nlc3MpLmZyb21Ob3coKX08L3A+XG5cdFx0XHRcdFx0XHRcdDxwIGNsYXNzPVwic3VidGl0bGUgaXMtbmVhdGx5LXNwYWNlZFwiPiR7T2JqZWN0LmtleXModGVhbS5lZGl0cykubGVuZ3RofSBjaGFydGVyIGVkaXRzPC9wPlxuXHRcdFx0XHRgO1xuXHRcdFx0XHRmb3IgKGxldCB1aWQgaW4gdGVhbS5tZW1iZXJzKSB7XG5cdFx0XHRcdFx0bGV0IHByb2ZpbGUgPSBtb2RlbC5wcm9maWxlc1t1aWRdO1xuXHRcdFx0XHRcdGxldCB1c2VyTW9kZWwgPSB7XG5cdFx0XHRcdFx0XHRuYW1lOiAnVW5rbm93biBTdHVkZW50Jyxcblx0XHRcdFx0XHRcdGltYWdlOiAnLi9wdWJsaWMvaW1nL25vLXVzZXIucG5nJyxcblx0XHRcdFx0XHRcdHN1YnRpdGxlOiAnLi4uJ1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAocHJvZmlsZS5uYW1lKSB7XG5cdFx0XHRcdFx0XHR1c2VyTW9kZWwubmFtZSA9IHByb2ZpbGUubmFtZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHByb2ZpbGUuaW1hZ2UpIHtcblx0XHRcdFx0XHRcdHVzZXJNb2RlbC5pbWFnZSA9IHByb2ZpbGUuaW1hZ2U7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICh0ZWFtLm1lbWJlcnNbdWlkXS5yb2xlKSB7XG5cdFx0XHRcdFx0XHR1c2VyTW9kZWwuc3VidGl0bGUgPSB0ZWFtLm1lbWJlcnNbdWlkXS5yb2xlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRsZXQgdXNlckRpdiA9IHZpZXdzLmdldFVzZXJUaWxlKHVzZXJNb2RlbCk7XG5cdFx0XHRcdFx0aHRtbCArPSB1c2VyRGl2LmlubmVySFRNTDtcblx0XHRcdFx0fVxuXHRcdFx0XHRodG1sICs9IGBcblx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImlzLWdyb3VwZWQgaGFzLXRleHQtY2VudGVyZWRcIj5cblx0XHRcdFx0XHRcdFx0XHQ8YSBocmVmPVwiJHtsaW5rfVwiIGNsYXNzPVwiYnV0dG9uIGlzLXByaW1hcnkgaXMtb3V0bGluZWRcIj5Kb2luIFRlYW08L2E+XG5cdFx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdGA7XG5cdFx0XHR9KTtcblx0XHRcdGh0bWwgKz0gYFxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb2x1bW4gaXMtNlwiPlxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImJveCBjb250ZW50IGhhcy10ZXh0LWNlbnRlcmVkXCI+XG5cdFx0XHRcdFx0XHRcdDxoMiBjbGFzcz1cInRpdGxlIGlzLTRcIj5TdGFydCBOZXcgVGVhbTwvaDIgY2xhc3M9XCJ0aXRsZSBpcy00XCI+XG5cdFx0XHRcdFx0XHRcdDxwIGNsYXNzPVwic3VidGl0bGUgaXMtbmVhdGx5LXNwYWNlZFwiPkRvbid0IHNlZSB5b3VyIHRlYW0/PC9wPlxuXHRcdFx0YDtcblxuXHRcdFx0bGV0IHByb2ZpbGUgPSBtb2RlbC5wcm9maWxlc1ttb2RlbC51aWRdO1xuXHRcdFx0bGV0IHVzZXJNb2RlbCA9IHtcblx0XHRcdFx0bmFtZTogJ1Vua25vd24gU3R1ZGVudCcsXG5cdFx0XHRcdGltYWdlOiAnLi9wdWJsaWMvaW1nL25vLXVzZXIucG5nJyxcblx0XHRcdFx0c3VidGl0bGU6ICdUZWFtIE1lbWJlcidcblx0XHRcdH1cblx0XHRcdGlmIChwcm9maWxlLm5hbWUpIHtcblx0XHRcdFx0dXNlck1vZGVsLm5hbWUgPSBwcm9maWxlLm5hbWU7XG5cdFx0XHR9XG5cdFx0XHRpZiAocHJvZmlsZS5pbWFnZSkge1xuXHRcdFx0XHR1c2VyTW9kZWwuaW1hZ2UgPSBwcm9maWxlLmltYWdlO1xuXHRcdFx0fVxuXHRcdFx0bGV0IHVzZXJEaXYgPSB2aWV3cy5nZXRVc2VyVGlsZSh1c2VyTW9kZWwpO1xuXHRcdFx0aHRtbCArPSB1c2VyRGl2LmlubmVySFRNTDtcblxuXHRcdFx0aHRtbCArPSBgXHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImlzLWdyb3VwZWQgaGFzLXRleHQtY2VudGVyZWRcIj5cblx0XHRcdFx0XHRcdFx0XHQ8YSBpZD1cIm5ldy10ZWFtXCIgY2xhc3M9XCJidXR0b24gaXMtcHJpbWFyeSBpcy1vdXRsaW5lZFwiPlN0YXJ0IE5ldyBUZWFtPC9hPlxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0YDtcblx0XHRcdGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0ZGl2LmNsYXNzTGlzdC5hZGQoJ2NvbHVtbnMnKTtcblx0XHRcdFx0ZGl2LmNsYXNzTGlzdC5hZGQoJ2lzLW11bHRpbGluZScpO1xuXHRcdFx0XHRkaXYuaW5uZXJIVE1MID0gaHRtbDtcblx0XHRcdHJldHVybiBkaXY7XG5cdFx0fSxcblxuXHRcdGdldFByb21pc2VUYWJsZTogKG1vZGVsKSA9PiB7XG5cdFx0XHRsZXQgaHRtbCA9IGBcblx0XHRcdFx0PHRoZWFkPlxuXHRcdFx0XHRcdDx0cj5cblx0XHRcdFx0XHRcdDx0aD5OYW1lPC90aD5cblx0XHRcdFx0XHRcdDx0aD5NZW1iZXI8L3RoPlxuXHRcdFx0XHRcdFx0PHRoPlN0YXR1czwvdGg+XG5cdFx0XHRcdFx0XHQ8dGg+TGFzdCBBY3RpdmU8L3RoPlxuXHRcdFx0XHRcdFx0PHRoPlZpZXc8L3RoPlxuXHRcdFx0XHRcdDwvdHI+XG5cdFx0XHRcdDwvdGhlYWQ+XG5cdFx0XHRcdDx0Ym9keT5cblx0XHRcdGA7XG5cblx0XHRcdE9iamVjdC5rZXlzKG1vZGVsLnByb21pc2VzKS5tYXAoKHBkaWQpID0+IHtcblx0XHRcdFx0bGV0IHZhbCA9IG1vZGVsLnByb21pc2VzW3BkaWRdO1xuXHRcdFx0XHRcdHZhbC5rZXkgPSBwZGlkO1xuXHRcdFx0XHRyZXR1cm4gdmFsO1xuXHRcdFx0fSkuc29ydCgoYSwgYikgPT4ge1xuXHRcdFx0XHRyZXR1cm4gMDtcblx0XHRcdH0pLmZvckVhY2goKHByb21pc2UpID0+IHtcblx0XHRcdFx0bGV0IGF1dGhvck5hbWUgPSAnVW5rbm93bic7XG5cdFx0XHRcdGxldCBzaW5jZVN0YXJ0ID0gbW9tZW50KHByb21pc2Uuc3RhcnRlZCkuZnJvbU5vdygpO1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGF1dGhvck5hbWUgPSBtb2RlbC5wcm9maWxlc1twcm9taXNlLmF1dGhvcl0ubmFtZTtcblx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0bGV0IGR1ciA9IG1vbWVudC5kdXJhdGlvbihtb21lbnQocHJvbWlzZS5kdWUpLmRpZmYobW9tZW50KERhdGUubm93KCkpKSk7XG5cdFx0XHRcdGxldCBkYXlzTGVmdCA9IE1hdGguZmxvb3IoZHVyLmFzRGF5cygpKTtcblx0XHRcdFx0aHRtbCArPSBgXG5cdFx0XHRcdFx0PHRyPlxuXHRcdFx0XHRcdFx0PHRkPiR7cHJvbWlzZS50aXRsZX08L3RkPlxuXHRcdFx0XHRcdFx0PHRkPiR7YXV0aG9yTmFtZX08L3RkPlxuXHRcdFx0XHRcdFx0PHRkPiR7cHJvbWlzZS5jb21wbGV0ZWQgPyAnQ29tcGxldGUnIDogZGF5c0xlZnQgKyAnIGRheXMgbGVmdCd9PC90ZD5cblx0XHRcdFx0XHRcdDx0ZD4ke3NpbmNlU3RhcnR9PC90ZD5cblx0XHRcdFx0XHRcdDx0ZD5cblx0XHRcdFx0XHRcdFx0PGJ1dHRvbiBkYXRhLXByb21pc2VpZD1cIiR7cHJvbWlzZS5rZXl9XCIgY2xhc3M9XCJidXR0b24gaXMtcHJpbWFyeSBpcy1vdXRsaW5lZFwiPlZpZXc8L2J1dHRvbj5cblx0XHRcdFx0XHRcdDwvdGQ+XG5cdFx0XHRcdFx0PC90cj5cblx0XHRcdFx0YDtcblx0XHRcdH0pO1xuXHRcdFx0aHRtbCArPSBgXG5cdFx0XHRcdDwvdGJvZHk+XG5cdFx0XHRgO1xuXHRcdFx0bGV0IHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcblx0XHRcdFx0dGFibGUuY2xhc3NMaXN0LmFkZCgndGFibGUnKTtcblx0XHRcdFx0dGFibGUuY2xhc3NMaXN0LmFkZCgnaXMtbmFycm93Jyk7XG5cdFx0XHRcdHRhYmxlLmNsYXNzTGlzdC5hZGQoJ2lzLWZ1bGx3aWR0aCcpO1xuXHRcdFx0XHR0YWJsZS5jbGFzc0xpc3QuYWRkKCdpcy1zdHJpcGVkJyk7XG5cdFx0XHRcdHRhYmxlLmlubmVySFRNTCA9IGh0bWw7XG5cdFx0XHRyZXR1cm4gdGFibGU7XG5cdFx0fSxcblxuXHRcdGdldFByb21pc2VCb3g6IChtb2RlbCkgPT4ge1xuXHRcdFx0bGV0IHByb21pc2UgPSBtb2RlbC5wcm9taXNlO1xuXHRcdFx0bGV0IHByb2ZpbGVzID0gbW9kZWwucHJvZmlsZXM7XG5cdFx0XHRsZXQgbGV2ZWxUZXh0ID0gJ1Vua25vd24nO1xuXHRcdFx0c3dpdGNoIChwcm9taXNlLmxldmVsKSB7XG5cdFx0XHRcdGNhc2UgMTogbGV2ZWxUZXh0ID0gJ1NtYWxsJzsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgMjogbGV2ZWxUZXh0ID0gJ01lZGl1bSc7IGJyZWFrO1xuXHRcdFx0XHRjYXNlIDM6IGxldmVsVGV4dCA9ICdMYXJnZSc7IGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0bGV0IHNpbmNlU3RhcnQgPSBtb21lbnQocHJvbWlzZS5zdGFydGVkKS5mcm9tTm93KCk7XG5cdFx0XHRsZXQgZHVlRGF0ZSA9IG1vbWVudChwcm9taXNlLmR1ZSkuZm9ybWF0KCdNL0QnKTtcblx0XHRcdGxldCBhdXRob3JOYW1lID0gJ1Vua25vd24nO1xuXHRcdFx0bGV0IGF1dGhvckltYWdlID0gJy4vcHVibGljL2ltZy9uby11c2VyLnBuZyc7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhdXRob3JOYW1lID0gcHJvZmlsZXNbcHJvbWlzZS5hdXRob3JdLm5hbWU7XG5cdFx0XHRcdGF1dGhvckltYWdlID0gcHJvZmlsZXNbcHJvbWlzZS5hdXRob3JdLmltYWdlO1xuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKGUpXG5cdFx0XHR9XG5cdFx0XHQvLzxoMSBjbGFzcz1cInRpdGxlIGlzLTJcIj4ke3Byb21pc2UudGl0bGV9IDxzcGFuIGNsYXNzPVwidGFnIGlzLXdhcm5pbmdcIj4ke2xldmVsVGV4dH08L3NwYW4+PC9oMT5cblx0XHRcdGxldCBodG1sID0gYFxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29sdW1uXCI+XG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJib3ggY29udGVudFwiPlxuXHRcdFx0XHRcdDxoMSBjbGFzcz1cInRpdGxlIGlzLTJcIj4ke3Byb21pc2UudGl0bGV9PC9oMT5cblx0XHRcdFx0XHQ8cCBjbGFzcz1cInN1YnRpdGxlIGlzLW5lYXRseS1zcGFjZWRcIj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJjb21tZW50XCI+XG5cdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwiaW1hZ2UgaXMtMTZ4MTYgaXMtcm91bmRlZCBpcy1pbmxpbmUtaW1hZ2VcIj5cblx0XHRcdFx0XHRcdFx0XHQ8aW1nIHNyYz1cIiR7YXV0aG9ySW1hZ2V9XCI+XG5cdFx0XHRcdFx0XHRcdDwvc3Bhbj5cblx0XHRcdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJ0aXRsZSBpcy02XCI+JHthdXRob3JOYW1lfTwvc3Bhbj5cblx0XHRcdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJpcy1mYWRlZFwiPiBzdGFydGVkICR7c2luY2VTdGFydH08L3NwYW4+XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHQ8L3A+XG5cdFx0XHRcdFx0PHAgY2xhc3M9XCJzdWJ0aXRsZSBpcy1ub3JtYWxseS1zcGFjZWRcIj5JIHByb21pc2UgdG8gJHtwcm9taXNlLmRlc2NyaXB0aW9ufSBieSAke2R1ZURhdGV9LjwvcD5cblx0XHRcdGA7XG5cdFx0XHRsZXQgbGlua0xpc3QgPSBPYmplY3Qua2V5cyhwcm9taXNlLmxpbmtzKS5tYXAoKGtleSkgPT4ge1xuXHRcdFx0XHRsZXQgdmFsID0gcHJvbWlzZS5saW5rc1trZXldO1xuXHRcdFx0XHR2YWwua2V5ID0ga2V5O1xuXHRcdFx0XHRyZXR1cm4gdmFsO1xuXHRcdFx0fSk7XG5cdFx0XHRpZiAobGlua0xpc3QubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRodG1sICs9IGA8ZGl2PmA7XG5cdFx0XHRcdGxpbmtMaXN0LmZvckVhY2goKGxpbmspID0+IHtcblx0XHRcdFx0XHRodG1sICs9IGA8ZGl2IGNsYXNzPVwidGVhbS1saW5rXCI+JHt2aWV3cy5nZXRMaW5rSXRlbShsaW5rKS5pbm5lckhUTUx9PC9kaXY+YDtcblx0XHRcdFx0XHQvL2h0bWwgKz0gYDxsaT48YSBocmVmPVwiJHtsaW5rLnVybH1cIiB0YXJnZXQ9XCJfYmxhbmtcIj4ke2xpbmsubmFtZX08L2E+PC9saT5gO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0aHRtbCArPSBgPC9kaXY+YDtcblx0XHRcdH1cblx0XHRcdGh0bWwgKz0gYFxuXHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJpcy1ncm91cGVkXCI+XG5cdFx0XHRcdFx0XHQ8YnV0dG9uIGRhdGEtZnBiPVwiZWRpdFwiIGNsYXNzPVwiYnV0dG9uIGlzLXByaW1hcnkgaXMtb3V0bGluZWQgaXMtaGlkZGVuLXRvLW1lbnRvclwiPlxuXHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cImljb25cIj5cblx0XHRcdFx0XHRcdFx0XHQ8aSBjbGFzcz1cImZhIGZhLWVkaXRcIj48L2k+XG5cdFx0XHRcdFx0XHRcdDwvc3Bhbj5cblx0XHRcdFx0XHRcdFx0PHNwYW4+RWRpdDwvc3Bhbj5cblx0XHRcdFx0XHRcdDwvYnV0dG9uPlxuXHRcdFx0XHRcdFx0PGJ1dHRvbiBkYXRhLWZwYj1cImxpbmtcIiBjbGFzcz1cImJ1dHRvbiBpcy1wcmltYXJ5IGlzLW91dGxpbmVkIGlzLWhpZGRlbi10by1tZW50b3JcIj5cblx0XHRcdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJpY29uXCI+XG5cdFx0XHRcdFx0XHRcdFx0PGkgY2xhc3M9XCJmYSBmYS1saW5rXCI+PC9pPlxuXHRcdFx0XHRcdFx0XHQ8L3NwYW4+XG5cdFx0XHRcdFx0XHRcdDxzcGFuPkFkZCBMaW5rPC9zcGFuPlxuXHRcdFx0XHRcdFx0PC9idXR0b24+XG5cdFx0XHRcdFx0XHQ8YnV0dG9uIGRhdGEtZnBiPVwiYmFja1wiIGNsYXNzPVwiYnV0dG9uIGlzLWRhbmdlciBpcy1vdXRsaW5lZFwiPlxuXHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cImljb25cIj5cblx0XHRcdFx0XHRcdFx0XHQ8aSBjbGFzcz1cImZhIGZhLWFycm93LWxlZnRcIj48L2k+XG5cdFx0XHRcdFx0XHRcdDwvc3Bhbj5cblx0XHRcdFx0XHRcdFx0PHNwYW4+QmFjayB0byBQcm9taXNlczwvc3Bhbj5cblx0XHRcdFx0XHRcdDwvYnV0dG9uPlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDxkaXYgY2xhc3M9XCJjb2x1bW5cIj5cblx0XHRcdFx0PGRpdiBjbGFzcz1cImJveCBjb250ZW50XCI+XG5cdFx0XHRcdFx0PGgxIGNsYXNzPVwidGl0bGUgaXMtNFwiPlByb2dyZXNzPC9oMT5cblx0XHRcdFx0XHQ8ZGl2IGlkPVwiY29tbWVudHMtZmllbGRcIj5cblx0XHRcdFx0XHRgO1xuXG5cdFx0XHRPYmplY3Qua2V5cyhwcm9taXNlLmNvbW1lbnRzKS5tYXAoKGtleSkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gcHJvbWlzZS5jb21tZW50c1trZXldO1xuXHRcdFx0fSkuc29ydCgoYSwgYikgPT4ge1xuXHRcdFx0XHRyZXR1cm4gYS50aW1lc3RhbXAgLSBiLnRpbWVzdGFtcDtcblx0XHRcdH0pLmZvckVhY2goKGNvbW1lbnQpID0+IHtcblx0XHRcdFx0bGV0IGNvbW1lbnRBdXRob3IgPSB7XG5cdFx0XHRcdFx0bmFtZTogJ1Vua25vd24nLFxuXHRcdFx0XHRcdGltYWdlOiAnLi9wdWJsaWMvaW1nL25vLXVzZXIucG5nJ1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Y29tbWVudEF1dGhvci5uYW1lID0gcHJvZmlsZXNbY29tbWVudC5hdXRob3JdLm5hbWU7XG5cdFx0XHRcdFx0Y29tbWVudEF1dGhvci5pbWFnZSA9IHByb2ZpbGVzW2NvbW1lbnQuYXV0aG9yXS5pbWFnZTtcblx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoZSlcblx0XHRcdFx0fVxuXHRcdFx0XHRsZXQgc2luY2VDb21tZW50ID0gbW9tZW50KGNvbW1lbnQudGltZXN0YW1wKS5mb3JtYXQoJ00vRCBoOm1tIEEnKTsvLy5mcm9tTm93KCk7XG5cdFx0XHRcdGlmIChjb21tZW50LmdlbmVyYXRlZCkge1xuXHRcdFx0XHRcdGh0bWwgKz0gYFxuXHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImNvbW1lbnRcIj5cblx0XHRcdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJpbWFnZSBpcy0xNngxNiBpcy1yb3VuZGVkIGlzLWlubGluZS1pbWFnZVwiPlxuXHRcdFx0XHRcdFx0XHRcdDxpbWcgc3JjPVwiJHtjb21tZW50QXV0aG9yLmltYWdlfVwiPlxuXHRcdFx0XHRcdFx0XHQ8L3NwYW4+XG5cdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwidGl0bGUgaXMtNlwiPiR7Y29tbWVudEF1dGhvci5uYW1lfTwvc3Bhbj5cblx0XHRcdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJpcy1mYWRlZFwiPiAke3NpbmNlQ29tbWVudH06IDwvc3Bhbj5cblx0XHRcdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJnZW5lcmF0ZWQtdGV4dFwiPiR7Y29tbWVudC50ZXh0fTwvc3Bhbj5cblx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdGA7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aHRtbCArPSBgXG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwiY29tbWVudFwiPlxuXHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cImltYWdlIGlzLTE2eDE2IGlzLXJvdW5kZWQgaXMtaW5saW5lLWltYWdlXCI+XG5cdFx0XHRcdFx0XHRcdFx0PGltZyBzcmM9XCIke2NvbW1lbnRBdXRob3IuaW1hZ2V9XCI+XG5cdFx0XHRcdFx0XHRcdDwvc3Bhbj5cblx0XHRcdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJ0aXRsZSBpcy02XCI+JHtjb21tZW50QXV0aG9yLm5hbWV9PC9zcGFuPlxuXHRcdFx0XHRcdFx0XHQ8c3BhbiBjbGFzcz1cImlzLWZhZGVkXCI+ICR7c2luY2VDb21tZW50fTogPC9zcGFuPlxuXHRcdFx0XHRcdFx0XHQ8c3Bhbj4ke2NvbW1lbnQudGV4dH08L3NwYW4+XG5cdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRgO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0aHRtbCArPSBgXG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cImlzLWhpZGRlbi10by1tZW50b3JcIj5cblx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlIGlzLWNoaWxkXCI+XG5cdFx0XHRcdFx0XHRcdDxkaXYgY2xhc3M9XCJ0aWxlLWVkaXRhYmxlXCI+XG5cdFx0XHRcdFx0XHRcdFx0PHRleHRhcmVhIGRhdGEtZnBiPVwidGV4dGFyZWFcIiBjbGFzcz1cInRleHRhcmVhXCIgcm93cz1cIjJcIiBwbGFjZWhvbGRlcj1cIldyaXRlIGhlcmUuLi5cIj48L3RleHRhcmVhPlxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdFx0PGRpdiBjbGFzcz1cImlzLWdyb3VwZWRcIj5cblx0XHRcdFx0XHRcdFx0XHQ8YnV0dG9uIGRhdGEtZnBiPVwiY29tbWVudFwiIGNsYXNzPVwiYnV0dG9uIGlzLXByaW1hcnlcIj5cblx0XHRcdFx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwiaWNvblwiPlxuXHRcdFx0XHRcdFx0XHRcdFx0XHQ8aSBjbGFzcz1cImZhIGZhLWNvbW1lbnQtb1wiPjwvaT5cblx0XHRcdFx0XHRcdFx0XHRcdDwvc3Bhbj5cblx0XHRcdFx0XHRcdFx0XHRcdDxzcGFuPkNvbW1lbnQ8L3NwYW4+XG5cdFx0XHRcdFx0XHRcdFx0PC9idXR0b24+XG5cdFx0XHRcdFx0XHRcdFx0PGJ1dHRvbiBkYXRhLWZwYj1cImNvbXBsZXRlXCIgY2xhc3M9XCJidXR0b24gaXMtcHJpbWFyeSBpcy1vdXRsaW5lZFwiPlxuXHRcdFx0XHRcdFx0XHRcdFx0PHNwYW4gY2xhc3M9XCJpY29uXCI+XG5cdFx0XHRcdFx0XHRcdFx0XHRcdDxpIGNsYXNzPVwiZmEgJHtwcm9taXNlLmNvbXBsZXRlZCA/ICdmYS10aW1lcycgOiAnZmEtY2hlY2snfVwiPjwvaT5cblx0XHRcdFx0XHRcdFx0XHRcdDwvc3Bhbj5cblx0XHRcdFx0XHRcdFx0XHRcdDxzcGFuPiR7cHJvbWlzZS5jb21wbGV0ZWQgPyAnTWFyayBhcyBJbmNvbXBsZXRlJyA6ICdNYXJrIGFzIENvbXBsZXRlJ308L3NwYW4+XG5cdFx0XHRcdFx0XHRcdFx0PC9idXR0b24+XG5cdFx0XHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdFx0PC9kaXY+XG5cdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8L2Rpdj5cblx0XHRcdGA7XG5cdFx0XHRsZXQgYm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdGJveC5jbGFzc0xpc3QuYWRkKCdjb2x1bW5zJyk7XG5cdFx0XHRcdGJveC5pbm5lckhUTUwgPSBodG1sO1xuXHRcdFx0cmV0dXJuIGJveDtcblx0XHR9LFxuXG5cdFx0Z2V0UHJvbWlzZUVkaXRvcjogKG1vZGVsKSA9PiB7XG5cdFx0XHRpZiAobW9kZWwuZGVzY3JpcHRpb24gPT09ICcuLi4nKSB7XG5cdFx0XHRcdG1vZGVsLmRlc2NyaXB0aW9uID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRsZXQgaHRtbCA9IGBcblx0XHRcdFx0PGgxIGRhdGEtcGVmPVwidGl0bGVcIiBjbGFzcz1cInRpdGxlIGlzLTIgbmxwLWVkaXRhYmxlXCIgY29udGVudGVkaXRhYmxlPVwidHJ1ZVwiPiR7bW9kZWwudGl0bGUgPyBtb2RlbC50aXRsZSA6ICdUaXRsZSBvZiBQcm9taXNlJ308L2gxPlxuXHRcdFx0XHQ8cCBjbGFzcz1cInN1YnRpdGxlIGlzLW5lYXRseS1zcGFjZWRcIj5cblx0XHRcdFx0XHRJIHByb21pc2UgdG8gPHNwYW4gZGF0YS1wZWY9XCJkZXNjcmlwdGlvblwiIGNsYXNzPVwibmxwLWVkaXRhYmxlXCIgY29udGVudGVkaXRhYmxlPVwidHJ1ZVwiPiR7bW9kZWwuZGVzY3JpcHRpb24gPyBtb2RlbC5kZXNjcmlwdGlvbiA6ICcoZG8gc29tZXRoaW5nIGZvciBteSB0ZWFtKSd9PC9zcGFuPiBieSA8c3BhbiBkYXRhLXBlZj1cImR1ZVwiIGNsYXNzPVwibmxwLWVkaXRhYmxlXCIgY29udGVudGVkaXRhYmxlPVwidHJ1ZVwiPiR7bW9kZWwuZHVlID8gbW9tZW50KG1vZGVsLmR1ZSkuZm9ybWF0KCdNL0QvWVlZWScpIDonTU0vREQvWVlZWSd9PC9zcGFuPi5cblx0XHRcdFx0PC9wPlxuXHRcdFx0XHQ8cCBkYXRhLXBlZj1cIndhcm5pbmdcIiBjbGFzcz1cImlzLWRhbmdlci10ZXh0XCI+PC9wPlxuXHRcdFx0XHQ8YnV0dG9uIGRhdGEtcGVmPVwic3VibWl0XCIgY2xhc3M9XCJidXR0b24gaXMtcHJpbWFyeVwiPlNhdmUgUHJvbWlzZTwvYnV0dG9uPlxuXHRcdFx0YDtcblx0XHRcdGlmIChtb2RlbC5kZWxldGFibGUpIHtcblx0XHRcdFx0aHRtbCArPSBgPGJ1dHRvbiBkYXRhLXBlZj1cInJlbW92ZVwiIGNsYXNzPVwiYnV0dG9uIGlzLWRhbmdlciBpcy1vdXRsaW5lZFwiPkNhbmNlbDwvYnV0dG9uPmA7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRodG1sICs9IGA8YnV0dG9uIGRhdGEtcGVmPVwiY2FuY2VsXCIgY2xhc3M9XCJidXR0b24gaXMtZGFuZ2VyIGlzLW91dGxpbmVkXCI+Q2FuY2VsPC9idXR0b24+YDtcblx0XHRcdH1cblx0XHRcdGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0ZGl2LmNsYXNzTGlzdC5hZGQoJ2JveCcpO1xuXHRcdFx0XHRkaXYuY2xhc3NMaXN0LmFkZCgnY29udGVudCcpO1xuXHRcdFx0XHRkaXYuaW5uZXJIVE1MID0gaHRtbDtcblx0XHRcdHJldHVybiBkaXY7XG5cdFx0fVxuXG5cdH1cblxuXHRyZXR1cm4gdmlld3M7XG5cbn1cblxuZXhwb3J0IHtWaWV3c307XG4iXX0=\n"]}