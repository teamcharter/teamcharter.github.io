!function t(e,n,i){function s(r,o){if(!n[r]){if(!e[r]){var l="function"==typeof require&&require;if(!o&&l)return l(r,!0);if(a)return a(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[r]={exports:{}};e[r][0].call(d.exports,function(t){var n=e[r][1][t];return s(n||t)},d,d.exports,t,e,n,i)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<i.length;r++)s(i[r]);return s}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={apiKey:"AIzaSyBWk9EWPkkvqiruG8aYnHV0dBPg1z3EtN4",authDomain:"charter-ecb07.firebaseapp.com",databaseURL:"https://charter-ecb07.firebaseio.com",projectId:"charter-ecb07",storageBucket:"",messagingSenderId:"134239305153"};n.config=i},{}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.Database=function(t,e){var n=t.initializeApp(e,"Charter Database"),i=n.database(),s=n.auth();e.localhost=!0,e.noScreenshots=!0;var a=Prometheus(e,n),r={init:function(t,e){var n=!1;s.onAuthStateChanged(function(i){i?(a.logon(i.uid,{name:i.displayName,email:i.email,image:i.photoURL,uid:i.uid}),n||(n=!0,t(i))):n||(n=!0,e())})},login:function(e,n){var i=new t.auth.GoogleAuthProvider;"facebook"===n&&(i=new t.auth.FacebookAuthProvider),s.signInWithPopup(i).then(function(t){t.credential.accessToken;var n=t.user,i="Unknown Provider";try{i=n.providerData[0].providerId}catch(t){console.error(t)}a.logon(n.uid,{name:n.displayName,email:n.email,image:n.photoURL,uid:n.uid,provider:i}),e(n)}).catch(function(t){console.error(t)})},getPrometheus:function(){return a},getCurrentUser:function(){return s.currentUser||{}},saveFeedback:function(t,e,n){return i.ref("feedback").push({tid:t,uid:e,feedback:n,timestamp:Date.now()})},getUser:function(t){if(!t)throw Error("No user id given.");return new Promise(function(e,n){i.ref("prometheus/users/"+t+"/profile").once("value",function(t){var n=t.val();e(n)}).catch(n)})},getTeam:function(t){if(!t)throw Error("No team id given.");return new Promise(function(e,n){i.ref("teams/"+t).once("value",function(n){var i=n.val()||{};Object.keys(i).length>0?(i.tid=t,e(i)):e({})}).catch(n)})},getTeamEdits:function(t){if(!t)throw Error("No team id given.");return new Promise(function(e,n){i.ref("edits/"+t).once("value",function(t){var n=t.val()||{};e(n)}).catch(n)})},onTeamChange:function(t,e,n){if(!t)throw Error("No team id given.");var s={};i.ref("teams/"+t).on("value",function(t){var n=[],i=t.val()||{},a=i.members||{};for(var o in a)if(!(o in s))if("template"===a[o].status)s[o]={name:"Unknown",image:"./public/img/no-user.png",uid:o,email:"team@omnipointment.com"};else{var l=r.getUser(o);l.uid=o,n.push(l)}n.length>0?Promise.all(n).then(function(t){t.forEach(function(t,e){var i=n[e].uid;s[i]=t}),e(i,s)}):e(i,s)})},updateTeamName:function(t,e,n){if(!t)throw Error("No team id given.");return i.ref("edits/"+t).push({field:"name",uid:e,value:n,timestamp:Date.now()}),i.ref("teams/"+t+"/name").set(n)},updateQuestion:function(t,e,n){if(!t)throw Error("No team id given.");return i.ref("edits/"+t).push({field:"question",uid:e,value:n,timestamp:Date.now()}),i.ref("teams/"+t+"/question").set(n)},updateExpectations:function(t,e,n){if(!t)throw Error("No team id given.");return i.ref("edits/"+t).push({field:"expectations",uid:e,value:n,timestamp:Date.now()}),i.ref("teams/"+t+"/expectations").set(n)},submitUpdate:function(t,e,n){if(!t)throw Error("No team id given.");if(!e)throw Error("No user id given.");return a.save({type:"SUBMIT_UPDATE",tid:t,update:n}),i.ref("teams/"+t+"/updates/"+e).push({update:n,timestamp:Date.now()})},addLink:function(t,e,n){if(!t)throw Error("No team id given.");if(!e)throw Error("No user id given.");return a.save({type:"ADD_LINK",tid:t,name:n.name,url:n.url}),i.ref("edits/"+t).push({field:"link",uid:e,value:n,timestamp:Date.now()}),i.ref("teams/"+t+"/links").push({name:n.name,url:n.url,uid:e,added:Date.now()})},updateLink:function(t,e,n,s){if(!t)throw Error("No team id given.");if(!e)throw Error("No user id given.");if(!n)throw Error("No link id given.");a.save({type:"UPDATE_LINK",tid:t,name:s.name,url:s.url,key:n}),s.key=n,i.ref("edits/"+t).push({field:"link",uid:e,value:s,timestamp:Date.now()});var r=i.ref("teams/"+t+"/links/"+n+"/name").set(s.name),o=i.ref("teams/"+t+"/links/"+n+"/url").set(s.url);return Promise.all([r,o])},removeLink:function(t,e,n){if(!t)throw Error("No team id given.");if(!e)throw Error("No user id given.");if(!n)throw Error("No link id given.");return a.save({type:"REMOVE_LINK",tid:t,key:n}),i.ref("edits/"+t).push({field:"link",uid:e,value:{removed:!0,key:n},timestamp:Date.now()}),i.ref("teams/"+t+"/links/"+n).remove()},updateRole:function(t,e,n){if(!t)throw Error("No team id given.");if(!e)throw Error("No authoring user id given.");n.uid||(n.uid=e),a.save({type:"UPDATE_ROLE",tid:t,uid:n.uid,role:n.role,responsibility:n.responsibility}),i.ref("edits/"+t).push({field:"role",uid:e,value:n,timestamp:Date.now()});var s=i.ref("teams/"+t+"/members/"+n.uid+"/role").set(n.role),r=i.ref("teams/"+t+"/members/"+n.uid+"/responsibility").set(n.responsibility);return Promise.all([s,r])},addTemplateRole:function(t,e){return a.save({type:"ADD_TEMPLATE_ROLE",tid:t}),i.ref("teams/"+t+"/members").push({status:"template",role:"Team Member",joined:Date.now(),member:!0,icon:"user"})},updateRoleIcon:function(t,e,n){if(!t)throw Error("No team id given.");if(!e)throw Error("No authoring user id given.");return a.save({type:"UPDATE_ROLE_ICON",tid:t,uid:n.uid,icon:n.icon}),n.uid||(n.uid=e),i.ref("edits/"+t).push({field:"role",uid:e,value:n,timestamp:Date.now()}),i.ref("teams/"+t+"/members/"+n.uid+"/icon").set(n.icon)},joinTeam:function(t,e,n){if(!t)throw Error("No team id given.");if(!e)throw Error("No user id given");return new Promise(function(i,s){r.getTeam(t).then(function(a){n!==a.joinCode&&a.joinCode?i({success:!1}):r.addMember(t,e).then(function(t){i({success:!0})}).catch(s)}).catch(s)})},addMember:function(t,e){return a.save({type:"ADD_MEMBER",tid:t,uid:e}),i.ref("teams/"+t+"/members/"+e).set({status:"member",role:"Team Member",joined:Date.now(),member:!0})},removeMember:function(t,e,n){return a.save({type:"REMOVE_MEMBER",tid:t,uid:n}),i.ref("teams/"+t+"/members/"+n).remove()},getAllTeams:function(t){return new Promise(function(e,n){i.ref("teams").orderByChild("members/"+t+"/member").startAt(!0).endAt(!0).once("value",function(t){var n=t.val()||{};e(n)}).catch(n)})},createNewTeam:function(t,e,n){return new Promise(function(s,o){var l=n.name;i.ref("teams").push({name:l||"New Team Charter",joinCode:e,status:n.status||"regular"}).then(function(e){var i=e.path.ct,c=i[i.length-1];a.save({type:"CREATE_TEAM",tid:c,name:l,data:n}),r.addMember(c,t).then(function(t){s({tid:c})}).catch(o)}).catch(o)})},getInstructorClasses:function(t){return new Promise(function(e,n){i.ref("classes").orderByChild("members/"+t+"/access").startAt(!0).endAt(!0).once("value",function(t){var i=t.val()||{},s=Object.keys(i).map(function(t){var e=i[t];return e.cid=t,e});if(s.length>0){var a=[];s.forEach(function(t){var e=t.cid;for(var n in t.teams)!function(t){var n=new Promise(function(e,n){r.getTeam(t).then(e).catch(n)});n.cid=e,a.push(n)}(n)}),Promise.all(a).then(function(t){t.forEach(function(t,e){var n=a[e];i[n.cid]&&i[n.cid].teams[t.tid]&&(i[n.cid].teams[t.tid]=t)}),e(i)}).catch(n)}else e({})}).catch(n)})},getClassTeams:function(t){return new Promise(function(e,n){i.ref("classes/"+t).once("value",function(i){var s=i.val()||{},a={};a[t]=s;var o=Object.keys(a).map(function(t){var e=a[t];return e.cid=t,e});if(o.length>0){var l=[];o.forEach(function(t){var e=t.cid;for(var n in t.teams)!function(t){var n=new Promise(function(e,n){r.getTeam(t).then(e).catch(n)});n.cid=e,l.push(n)}(n)}),Promise.all(l).then(function(t){t.forEach(function(t,e){var n=l[e];a[n.cid]&&a[n.cid].teams[t.tid]&&(a[n.cid].teams[t.tid]=t)}),e(a)}).catch(n)}else e({})}).catch(n)})},addTeamToClass:function(t,e,n){return new Promise(function(e,s){i.ref("classes/"+n).once("value",function(r){var o=r.val();o?(a.save({type:"ADD_TEAM_TO_CLASS",tid:t,classCode:n}),i.ref("classes/"+n+"/teams/"+t).set({access:!0,joined:Date.now()}).then(function(t){e(o)}).catch(s)):s("Could not find a class with code: "+n+".")})})},addInstructorToClass:function(t,e){return new Promise(function(n,s){i.ref("classes/"+e).once("value",function(r){var o=r.val();if(o){var l=o.members||{};t in l?n({isAlreadyInstructor:!0,classData:o}):(a.save({type:"ADD_INSTRUCTOR_TO_CLASS",classCode:e}),i.ref("classes/"+e+"/members/"+t).set({access:!0,type:"instructor",joined:Date.now()}).then(function(t){n({isAlreadyInstructor:!1,classData:o})}).catch(s))}else s("Could not find a class with code: "+e+".")})})},getInstructorsByClass:function(t){},getTeamPromises:function(t){if(!t)throw Error("No team id given.");return new Promise(function(e,n){i.ref("promises/"+t).once("value",function(t){var n=t.val();e(n)}).catch(n)})},onTeamPromisesChange:function(t,e,n){if(!t)throw Error("No team id given.");try{i.ref("promises/"+t).on("value",function(t){var n=t.val();e(n)})}catch(t){console.error(t),n&&n(t)}},onPromiseChange:function(t,e,n,s){if(!t)throw Error("No team id given.");if(!e)throw Error("No promise id given");try{i.ref("promises/"+t).on("value",function(t){var e=t.val();n(e)})}catch(t){s?s(t):console.error(t)}},commentOnPromise:function(t){if(!t.tid)throw Error("No team id given.");if(!t.promiseid)throw Error("No promise id given");if(!t.author)throw Error("No author id given");if(!t.text)throw Error("No text given");return new Promise(function(e,n){i.ref("promises/"+t.tid).push({type:"comment",promiseid:t.promiseid,author:t.author,timestamp:Date.now(),text:t.text}).then(e).catch(n)})},addPromise:function(t){if(!t.tid)throw Error("No team id given.");if(!t.author)throw Error("No author id given");var e={type:"edit",author:t.author,timestamp:Date.now()};return new Promise(function(n,s){i.ref("promises/"+t.tid).push(e).then(function(a){var r=a.path.ct[2];i.ref("promises/"+t.tid+"/"+r+"/promiseid").set(r).then(function(t){e.promiseid=r,n({promiseid:r,data:e})}).catch(s)}).catch(s)})},unsetPromise:function(t){if(!t.tid)throw Error("No team id given.");if(!t.promiseid)throw Error("No promise id given");return new Promise(function(e,n){i.ref("promises/"+t.tid+"/"+t.promiseid).remove().then(e).catch(n)})},updatePromise:function(t){if(!t.tid)throw Error("No team id given.");if(!t.promiseid)throw Error("No promise id given");if(!t.author)throw Error("No author id given");var e=t.tid+"",n=t;return delete n.tid,n.timestamp=Date.now(),new Promise(function(t,s){i.ref("promises/"+e).push(n).then(t).catch(s)})},addLinkToPromise:function(t){if(!t.tid)throw Error("No team id given.");if(!t.promiseid)throw Error("No promise id given");if(!t.author)throw Error("No author id given");return new Promise(function(e,n){var s=!!t.linkid;i.ref("promises/"+t.tid).push({type:"link",promiseid:t.promiseid,linkid:t.linkid||!1,author:t.author,timestamp:Date.now(),name:t.name||!1,url:t.url||!1}).then(function(a){if(s)e(a);else{var r=a.path.ct[2];i.ref("promises/"+t.tid+"/"+r+"/linkid").set(r).then(e).catch(n)}}).catch(n)})},getRoleMap:function(t){if(!t.role)throw Error("No role id given.");return new Promise(function(e,n){i.ref("role_library/"+t.role).once("value",function(i){var s=i.val();s?e(s):n("No role found for: "+t.role)})})},saveRoleMap:function(t){if(!t.role)throw Error("No role id given.");if(!t.data)throw Error("No role map data given.");return new Promise(function(e,n){i.ref("role_library/"+t.role).set(t.data).then(function(t){e(!0)}).catch(n)})},getAllRoleMaps:function(){return new Promise(function(t,e){i.ref("role_library").once("value",function(e){var n=e.val();t(n)}).catch(e)})}};return r}},{}],3:[function(t,e,n){"use strict";function i(t,e,n){var s=l(e);document.getElementById("role-name").innerText=s.title,document.getElementById("role-icon").classList.add("fa-"+s.icon),document.getElementById("role-desc").innerText=s.description;var a=document.getElementById("card-out");a.innerHTML="",s.steps.map(function(t){return t.editable=n,t.isOpen=n,t}).map(function(t){return g.getRoleStepCard(t)}).forEach(function(t){a.appendChild(t)});var r=document.getElementById("details-out");r.innerHTML="";var o=g.getListCard({title:"Importance to Team",field:"importance",ps:s.importance,editable:n});r.appendChild(o);var d=g.getListCard({title:"Role in Codebase",field:"codebase",ps:s.codebase,hasCode:!0,editable:n});r.appendChild(d),Array.from(document.querySelectorAll("[collapsible]")).forEach(function(e){e.querySelector(".message-header").addEventListener("click",function(t){e.classList.contains("is-collapsed")?e.classList.remove("is-collapsed"):e.classList.add("is-collapsed")}),e.querySelector(".message-body button").addEventListener("click",function(n){vex.dialog.prompt({message:"What did you learn?",callback:function(n){n&&console.log(t.uid+" learned: "+n),n&&e.classList.contains("is-primary")&&(e.classList.remove("is-primary"),e.classList.add("is-success"))}})})}),n||Array.from(document.querySelectorAll("[data-linkid]")).forEach(function(e){e.addEventListener("click",function(n){var i=e.dataset.linkid;console.log(t.uid+" clicked: "+i)})}),Array.from(document.querySelectorAll("[data-action]")).forEach(function(r){r.addEventListener("click",function(o){var l=r.dataset.action,d=!1,u=!1,m=0,p=-1,f=!1;switch(l){case"save-note":d=r.dataset.step,f=a.querySelector('.step-note[data-step="'+d+'"]'),e.steps[d].note=f.innerText,i(t,e,n);break;case"edit-name":d=r.dataset.step;var v=e.steps[d];vex.dialog.prompt({message:"Rename Module",value:v.title,callback:function(s){s&&(e.steps[d].title=s,i(t,e,n))}});break;case"save-importance":f=document.querySelector('[data-textarea="get-importance"]'),e.importance=f.innerText,i(t,e,n);break;case"save-codebase":f=document.querySelector('[data-textarea="get-codebase"]'),e.codebase=f.innerText,i(t,e,n);break;case"add-step-link":d=r.dataset.step;var h="link"+(Object.keys(e.links).length-1+1);c({step:d},function(s){e.links[h]={title:s.title,step:s.step,url:s.url,type:s.type},i(t,e,n)});break;case"move-step-up":if(d=r.dataset.step,m=e.steps[d].order,p=-1,s.steps.forEach(function(t,e){t.order===m&&(p=e)}),m>0){var g=s.steps[p-1].id;e.steps[g].order=m,e.steps[d].order=m-1,i(t,e,n)}break;case"move-step-down":if(d=r.dataset.step,m=e.steps[d].order,p=-1,s.steps.forEach(function(t,e){t.order===m&&(p=e)}),m<Object.keys(e.steps).length-1){var b=s.steps[p+1];b&&(switchWith=b.id,e.steps[switchWith].order=m,e.steps[d].order=m+1,i(t,e,n))}break;case"edit-link":u=r.dataset.link;var y=e.links[u];d=y.step,c(y,function(s){e.links[u]={title:s.title,step:s.step,url:s.url,type:s.type},i(t,e,n)});break;case"remove-link":u=r.dataset.link,e.links[u].removed=!0,i(t,e,n);break;default:console.log(l,r.dataset)}})})}function s(t){console.error(t),vex.dialog.alert(t+"")}function a(t,e){for(var n=document.getElementsByClassName(t),i=0;i<n.length;i++)n[i].innerText=e}function r(t,e){for(var n=document.getElementsByClassName(t),i=0;i<n.length;i++)n[i].src=e}function o(t){return t.links=t.links||{},t.steps=t.steps||{},t.title=t.title||"Untitled Role",t.description=t.description||"Edit...",t.icon=t.icon||"user",t.importance=t.importance||"Edit...",t.codebase=t.codebase||"Edit...",t}function l(t){var e=o(t),n=JSON.parse(JSON.stringify(e)),i={};i.importance=n.importance.split("\n"),i.codebase=n.codebase.split("\n"),i.steps={};for(var s in n.steps)i.steps[s]=n.steps[s];for(var a in n.links){var r=n.links[a];r.id=a,i.steps[r.step].links||(i.steps[r.step].links={}),i.steps[r.step].links[a]=r}var l=Object.keys(i.steps).map(function(t){var e=i.steps[t];e.id=t,e.links||(e.links={});var n=Object.keys(e.links).map(function(t){return e.links[t]}).sort(function(t,e){return t.order-e.order}).filter(function(t){return!t.removed});return e.ps=e.note.split("\n"),e.links=n,e}).sort(function(t,e){return t.order-e.order});return i.steps=l,i.title=n.title,i.description=n.description,i.icon=n.icon,i}function c(t,e){vex.dialog.prompt({message:"Link URL",value:t.url,callback:function(n){n&&vex.dialog.prompt({message:"Link Title",value:t.title,callback:function(i){i&&vex.dialog.prompt({message:"Link Type",value:t.type,callback:function(s){s&&e({step:t.step,url:n,title:i,type:s})}})}})}})}var d=t("./config"),u=t("./database"),m=t("./views"),p=(0,u.Database)(firebase,d.config),f=function(t){t=t.split("+").join(" ");for(var e,n={},i=/[?&]?([^=]+)=([^&]*)/g;e=i.exec(t);)n[decodeURIComponent(e[1])]=decodeURIComponent(e[2]);return n}(document.location.search),v=f.role||!1,h=!1,g=(0,m.Views)(),b=(document.getElementById("login"),document.getElementById("feedback"));p.init(function(t){v||p.getAllRoleMaps().then(function(t){document.getElementById("section-role").classList.add("is-hidden"),document.getElementById("section-all").classList.remove("is-hidden");var e=document.getElementById("role-out");e.innerHTML="";for(var n in t){var i=t[n];i.id=n;var s=g.getRoleMapCard(i);e.appendChild(s)}}),f.create_role&&p.saveRoleMap({role:f.create_role,data:{exists:!0}}).then(function(t){window.location=window.location.origin+"/rolelibrary.html?role="+f.create_role}).catch(s),console.log("What makes working at Omnipointment better than, say, Google?"),a("fill-user-name",t.displayName),r("fill-user-image",t.photoURL);p.getPrometheus();b.addEventListener("click",function(t){vex.dialog.prompt({message:"What feedback do you have to share with us?",callback:function(t){if(t){var e=p.getCurrentUser().uid;p.saveFeedback(!1,e,t).then(function(t){vex.dialog.alert("Thank you for your feedback, it really helps us a lot!")}).catch(s)}}})}),v&&p.getRoleMap({role:v}).then(function(e){var n=o(e),a=document.getElementById("toggle-edit"),r=document.getElementById("add-module");p.getPrometheus().can("contributor",function(t){a.classList.remove("is-hidden")});var l=document.getElementById("role-name");l.addEventListener("click",function e(s){h&&vex.dialog.prompt({message:"Edit Title",value:n.title,callback:function(s){l.removeEventListener("click",e),s&&(n.title=s,i(t,n,h))}})});var c=document.getElementById("role-icon");c.addEventListener("click",function e(s){h&&vex.dialog.prompt({message:"Edit Icon",value:n.icon,callback:function(s){c.removeEventListener("click",e),s&&(n.icon=s,i(t,n,h))}})});var d=document.getElementById("role-desc");d.addEventListener("click",function e(s){h&&vex.dialog.prompt({message:"Edit Description",value:n.description,callback:function(s){d.removeEventListener("click",e),s&&(n.description=s,i(t,n,h))}})}),r.addEventListener("click",function(e){if(h){var s=Object.keys(n.steps).length-1,a="step-"+s;n.steps[a]={title:"Untitled Module",order:s,note:"..."},i(t,n,h)}}),a.addEventListener("click",function(e){(h=!h)?(a.innerText="Publish Role",a.classList.add("is-success"),a.classList.remove("is-warning"),r.classList.remove("is-hidden"),i(t,n,h)):(a.innerText="Edit Role",a.classList.remove("is-success"),a.classList.add("is-warning"),a.classList.add("is-loading"),r.classList.add("is-hidden"),p.saveRoleMap({role:v,data:n}).then(function(e){vex.dialog.alert("Saved Role: "+n.title),i(t,n,h),a.classList.remove("is-loading")}).catch(s))}),h?(a.innerText="Publish Role",a.classList.add("is-success"),a.classList.remove("is-warning"),r.classList.remove("is-hidden")):(a.innerText="Edit Role",a.classList.remove("is-success"),a.classList.add("is-warning"),r.classList.add("is-hidden")),i(t,n,h)}).catch(s),p.getPrometheus().save({type:"ROLE_LIBRARY",role:v})},function(){window.location=window.location.origin+"/login.html"+document.location.search})},{"./config":1,"./database":2,"./views":4}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.Views=function(){var t={getRoleAndUpdateTile:function(t){var e=new Date(t.timestamp),n=moment(e).format("M/D h:mm A"),i=moment(Date.now()).diff(moment(t.timestamp)),s=moment.duration(i).asDays(),a="is-success";s>=5?a="is-danger":s>=3&&(a="is-warning");var r='\n\t\t\t\t<div class="tile is-parent is-vertical is-5">\n\t\t\t\t\t<div class="tile is-child">\n\t\t\t\t\t\t<div class="media">\n\t\t\t\t\t\t\t<figure class="media-left">\n\t\t\t\t\t\t\t\t<p class="image is-48x48">\n\t\t\t\t\t\t\t\t\t<img src="'+t.image+'">\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t\t<div class="media-content content">\n\t\t\t\t\t\t\t\t<h3 class="title is-5">'+t.name+'</h3>\n\t\t\t\t\t\t\t\t<p class="subtitle is-6">'+t.role+'</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="tile is-parent is-vertical is-7">\n\t\t\t\t\t<div class="tile is-child">\n\t\t\t\t\t\t<div class="content">\n\t\t\t\t\t\t\t<span class="tag '+a+'">'+n+"</span> "+t.update+"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>",o=document.createElement("div");return o.classList.add("tile"),o.innerHTML=r,o},getRoleTile:function(t){var e='<div class="content">\n\t\t\t\t<h3 class="title is-5">'+t.role+'</h3>\n\t\t\t\t<p class="subtitle is-6">'+t.responsibility+"</p>\n\t\t\t</div>";t.editable&&(e='<div class="content">\n\t\t\t\t\t<h3 id="my-title" class="title is-5" contenteditable="true">'+t.role+'</h3>\n\t\t\t\t\t<p id="my-responsibility" class="subtitle is-6" contenteditable="true">'+t.responsibility+'</p>\n\t\t\t\t\t<button id="my-role-save" class="button is-primary is-outlined is-hidden-to-mentor">\n\t\t\t\t\t\t<span class="icon">\n\t\t\t\t\t\t\t<i class="fa fa-edit"></i>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span>Save Role</span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>');var n='\n\t\t\t\t<div class="tile is-parent is-vertical is-5">\n\t\t\t\t\t<div class="tile is-child">\n\t\t\t\t\t\t<div class="media">\n\t\t\t\t\t\t\t<figure class="media-left">\n\t\t\t\t\t\t\t\t<p class="image is-48x48">\n\t\t\t\t\t\t\t\t\t<img src="'+t.image+'">\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t\t<div class="content">\n\t\t\t\t\t\t\t\t<h3 class="title is-5">'+t.name+'</h3>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="tile is-parent is-vertical is-7">\n\t\t\t\t\t<div class="tile is-child">\n\t\t\t\t\t\t'+e+"\n\t\t\t\t\t</div>\n\t\t\t\t</div>",i=document.createElement("div");return i.classList.add("tile"),i.innerHTML=n,i},getRoleTemplateTile:function(t){var e='<div class="content">\n\t\t\t\t<h3 class="title is-5">'+t.role+'</h3>\n\t\t\t\t<p class="subtitle is-6">'+t.responsibility+"</p>\n\t\t\t</div>",n="";t.editable&&(e='<div class="content">\n\t\t\t\t\t<h3 data-bind="field-role" class="title is-5" contenteditable="true">'+t.role+'</h3>\n\t\t\t\t\t<p data-bind="field-responsibility" class="subtitle is-6" contenteditable="true">'+t.responsibility+"</p>\n\t\t\t\t</div>",n='\n\t\t\t\t<div class="tile is-parent is-vertical is-4">\n\t\t\t\t\t<button data-bind="button-save" class="button is-primary is-outlined is-hidden-to-mentor">\n\t\t\t\t\t\t<span class="icon">\n\t\t\t\t\t\t\t<i class="fa fa-edit"></i>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span>Save Role</span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t');var i='\n\t\t\t\t<div class="tile is-parent is-vertical {model.editable ? \'is-8\' : \'is-12\'}">\n\t\t\t\t\t<div class="tile is-child">\n\t\t\t\t\t\t<div class="media">\n\t\t\t\t\t\t\t<figure class="media-left">\n\t\t\t\t\t\t\t\t<div data-bind="field-icon" class="image is-48x48 icon-image">\n\t\t\t\t\t\t\t\t\t<i class="fa fa-'+(t.icon||"user")+'"></i>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t\t<div class="tile is-child">\n\t\t\t\t\t\t\t\t'+e+"\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t"+n+"\n\t\t\t",s=document.createElement("div");if(s.classList.add("tile"),s.innerHTML=i,t.editable&&t.onSave){var a=s.querySelectorAll("[data-bind=button-save]")[0],r=s.querySelectorAll("[data-bind=field-role]")[0],o=s.querySelectorAll("[data-bind=field-responsibility]")[0];a.addEventListener("click",function(e){t.onSave({e:e,model:t,role:r.innerText,responsibility:o.innerText})}),s.querySelectorAll("[data-bind=field-icon]")[0].addEventListener("click",function(e){t.onIconEdit({e:e,model:t})})}return s},getProgressUpdate:function(t){var e=new Date(t.timestamp),n=moment(e).format("M/D h:mm A"),i=moment(Date.now()).diff(moment(t.timestamp)),s=moment.duration(i).asDays(),a="is-success";s>=5?a="is-danger":s>=3&&(a="is-warning");var r='\n\t\t\t\t<div class="tile is-parent is-vertical is-5">\n\t\t\t\t\t<div class="tile is-child">\n\t\t\t\t\t\t<span class="tags has-addons">\n\t\t\t\t\t\t\t<span class="tag '+a+' is-medium">'+n+'</span>\n\t\t\t\t\t\t\t<span class="tag is-medium">\n\t\t\t\t\t\t\t\t<span class="image image-tag-rounded is-32x32">\n\t\t\t\t\t\t\t\t\t<img src="'+t.image+'">\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class="is-medium">\n\t\t\t\t\t\t\t\t\t'+t.name+'\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="tile is-parent is-vertical is-7">\n\t\t\t\t\t<div class="tile is-child">\n\t\t\t\t\t\t<div class="content">\n\t\t\t\t\t\t\t'+t.update+"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>",o=document.createElement("div");return o.classList.add("tile"),o.innerHTML=r,o},getLinkItem:function(t){var e="file";t.url.indexOf("docs.google")>-1?(e="google",t.url.indexOf("docs.google.com/document")>-1?e="file-text":t.url.indexOf("docs.google.com/spreadsheets")>-1?e="table":t.url.indexOf("docs.google.com/presentation")>-1&&(e="slideshare")):t.url.indexOf("omnipointment.com/meeting")>-1?e="calendar":t.url.indexOf("github.com")>-1?e="github":t.url.indexOf("youtube.com")>-1?e="youtube-play":t.url.indexOf("vimeo.com")>-1?e="vimeo":(t.url.indexOf("codeshare.io")>-1||t.url.indexOf("codepen.io")>-1)&&(e="code-fork");var n='\n\t\t\t\t<a target="_blank" href="'+t.url+'">\n\t\t\t\t\t<span class="icon">\n\t\t\t\t\t\t<i class="fa fa-'+e+'"></i>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span>'+t.name+'</span>\n\t\t\t\t</a>\n\t\t\t\t<a class="is-danger is-hidden-to-mentor">\n\t\t\t\t\t<span class="icon edit-link" data-for="'+t.key+'">\n\t\t\t\t\t\t<i class="fa fa-edit"></i>\n\t\t\t\t\t</span>\n\t\t\t\t</a>\n\t\t\t',i=document.createElement("div");return i.classList.add("team-link"),i.innerHTML=n,i},getTeamTile:function(t){var e=window.location.origin+"/charter.html?team="+t.tid,n='\n\t\t\t\t<div class="tile is-vertical">\n\t\t\t\t\t<div class="box">\n\t\t\t\t\t\t<div class="tile">\n\t\t\t\t\t\t\t<div class="content">\n\t\t\t\t\t\t\t\t<h3 class="title">'+t.name+" "+(t.isTemplate?'<span class="tag is-warning">Template</span>':"")+'</h3>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="tile">\n\t\t\t\t\t\t\t<a href="'+e+'" class="button is-primary is-outlined">View Team Charter</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>',i=document.createElement("div");return i.classList.add("column"),i.classList.add("is-4"),i.innerHTML=n,i},getClassTile:function(t){var e=window.location.origin,n=e+"/class.html?class="+t.cid,i=Object.keys(t.teams).filter(function(e){return Object.keys(t.teams[e]).length>0}).map(function(e){var n=t.teams[e];return n.tid=e,n}),s=i.length,a=(i.map(function(t){return'\n\t\t\t\t\t<div class="column is-4">\n\t\t\t\t\t\t<a href='+e+"/charter.html?team="+t.tid+'&mentor=true class="button is-primary is-outlined is-fullwidth">'+t.name+"</a>\n\t\t\t\t\t</div>\n\t\t\t\t"}),'\n\t\t\t\t<div class="tile is-vertical">\n\t\t\t\t\t<div class="tile box is-child">\n\t\t\t\t\t\t<div class="content">\n\t\t\t\t\t\t\t<h3 class="title">'+t.name+'</h3>\n\t\t\t\t\t\t\t<p class="subtitle">'+s+" team"+(1===s?"":"s")+" | Code: "+t.cid+'</p>\n\t\t\t\t\t\t\t<a href="'+n+'" class="button is-primary is-outlined">View Class Dashboard</a>\n\t\t\t');a+="\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>";var r=document.createElement("div");return r.classList.add("column"),r.classList.add("is-4"),r.innerHTML=a,r},getUserTile:function(t){var e='\n\t\t\t\t<div class="tile is-child">\n\t\t\t\t\t<div class="media">\n\t\t\t\t\t\t<figure class="media-left">\n\t\t\t\t\t\t\t<p class="image is-48x48 image-tag-rounded">\n\t\t\t\t\t\t\t\t<img src="'+t.image+'">\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t<div class="content">\n\t\t\t\t\t\t\t<h3 class="title is-5">'+t.name+'</h3>\n\t\t\t\t\t\t\t<p class="subtitle is-6">'+t.subtitle+"</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t",n=document.createElement("div");return n.classList.add("column"),n.classList.add("is-4"),n.innerHTML=e,n},getClassTeamTable:function(t){var e="\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>Team Name</th>\n\t\t\t\t\t\t<th>Members</th>\n\t\t\t\t\t\t<th>Charter Edits</th>\n\t\t\t\t\t\t<th>Progress Updates</th>\n\t\t\t\t\t\t<th>Last Active</th>\n\t\t\t\t\t\t<th>View Team</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t";t.teams.forEach(function(t){var n=0;for(var i in t.updates)for(var s in t.updates[i])n++;var a=window.location.origin+"/charter.html?team="+t.tid+"&mentor=true",r=t.members||{};e+="\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>"+t.name+"</td>\n\t\t\t\t\t\t<td>"+Object.keys(r).length+"</td>\n\t\t\t\t\t\t<td>"+Object.keys(t.edits).length+"</td>\n\t\t\t\t\t\t<td>"+n+"</td>\n\t\t\t\t\t\t<td>"+moment(t.lastAccess).fromNow()+'</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<a href="'+a+'" class="button is-primary is-outlined">View Charter</a>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t'}),e+="\n\t\t\t\t</tbody>\n\t\t\t";var n=document.createElement("table");return n.classList.add("table"),n.classList.add("is-narrow"),n.classList.add("is-fullwidth"),n.innerHTML=e,n},getClassTeamGrid:function(e){var n="";e.teams.forEach(function(i){for(var s in i.updates)for(var a in i.updates[s]);var r=window.location.origin+"/charter.html?team="+i.tid+"&code="+i.joinCode;i.members,n+='\n\t\t\t\t\t<div class="column is-6">\n\t\t\t\t\t\t<div class="box content has-text-centered">\n\t\t\t\t\t\t\t<h2 class="title is-4">'+i.name+'</h2 class="title is-4">\n\t\t\t\t\t\t\t<p class="subtitle is-neatly-spaced">Last active '+moment(i.lastAccess).fromNow()+'</p>\n\t\t\t\t\t\t\t<p class="subtitle is-neatly-spaced">'+Object.keys(i.edits).length+" charter edits</p>\n\t\t\t\t";for(var o in i.members){var l=e.profiles[o],c={name:"Unknown Student",image:"./public/img/no-user.png",subtitle:"..."};l.name&&(c.name=l.name),l.image&&(c.image=l.image),i.members[o].role&&(c.subtitle=i.members[o].role);var d=t.getUserTile(c);n+=d.innerHTML}n+='\n\t\t\t\t\t\t\t<div class="is-grouped has-text-centered">\n\t\t\t\t\t\t\t\t<a href="'+r+'" class="button is-primary is-outlined">Join Team</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t'}),n+='\n\t\t\t\t\t<div class="column is-6">\n\t\t\t\t\t\t<div class="box content has-text-centered">\n\t\t\t\t\t\t\t<h2 class="title is-4">Start New Team</h2 class="title is-4">\n\t\t\t\t\t\t\t<p class="subtitle is-neatly-spaced">Don\'t see your team?</p>\n\t\t\t';var i=e.profiles[e.uid],s={name:"Unknown Student",image:"./public/img/no-user.png",subtitle:"Team Member"};i.name&&(s.name=i.name),i.image&&(s.image=i.image);var a=t.getUserTile(s);n+=a.innerHTML,n+='\t\t\t\t\n\t\t\t\t\t\t\t<div class="is-grouped has-text-centered">\n\t\t\t\t\t\t\t\t<a id="new-team" class="button is-primary is-outlined">Start New Team</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t';var r=document.createElement("div");return r.classList.add("columns"),r.classList.add("is-multiline"),r.innerHTML=n,r},getPromiseTable:function(t){var e="\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>Name</th>\n\t\t\t\t\t\t<th>Member</th>\n\t\t\t\t\t\t<th>Status</th>\n\t\t\t\t\t\t<th>Last Active</th>\n\t\t\t\t\t\t<th>View</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t";Object.keys(t.promises).map(function(e){var n=t.promises[e];return n.key=e,n}).sort(function(t,e){return 0}).forEach(function(n){var i="Unknown",s=moment(n.lastActive).fromNow();try{i=t.profiles[n.author].name}catch(t){console.error(t)}var a=moment.duration(moment(n.due).diff(moment(Date.now()))),r=Math.floor(a.asDays());e+="\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>"+n.title+"</td>\n\t\t\t\t\t\t<td>"+i+"</td>\n\t\t\t\t\t\t<td>"+(n.completed?"Complete":r<0?Math.abs(r)+" days overdue":r+" days left")+"</td>\n\t\t\t\t\t\t<td>"+s+'</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<button data-promiseid="'+n.key+'" class="button is-primary is-outlined">View</button>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t'}),e+="\n\t\t\t\t</tbody>\n\t\t\t";var n=document.createElement("table");return n.classList.add("table"),n.classList.add("is-narrow"),n.classList.add("is-fullwidth"),n.classList.add("is-striped"),n.innerHTML=e,n},getPromiseBox:function(e){var n=e.promise,i=e.profiles;n.level;var s=moment(n.started).fromNow(),a=moment(n.due).format("M/D/YY"),r="Unknown",o="./public/img/no-user.png";try{r=i[n.author].name,o=i[n.author].image}catch(t){console.error(t)}var l='\n\t\t\t\t<div class="column">\n\t\t\t\t<div class="box content">\n\t\t\t\t\t<h1 class="title is-2">'+n.title+'</h1>\n\t\t\t\t\t<p class="subtitle is-neatly-spaced">\n\t\t\t\t\t\t<div class="comment">\n\t\t\t\t\t\t\t<span class="image is-16x16 is-rounded is-inline-image">\n\t\t\t\t\t\t\t\t<img src="'+o+'">\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class="title is-6">'+r+'</span>\n\t\t\t\t\t\t\t<span class="is-faded"> started '+s+'</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p class="subtitle is-normally-spaced">I promise to '+n.description+" by "+a+".</p>\n\t\t\t",c=Object.keys(n.links).map(function(t){var e=n.links[t];return e.key=t,e});c.length>0&&(l+="<div>",c.forEach(function(e){l+='<div class="team-link">'+t.getLinkItem(e).innerHTML+"</div>"}),l+="</div>"),l+='\n\t\t\t\t\t<div class="is-grouped">\n\t\t\t\t\t\t<button data-fpb="edit" class="button is-primary is-outlined is-hidden-to-mentor">\n\t\t\t\t\t\t\t<span class="icon">\n\t\t\t\t\t\t\t\t<i class="fa fa-edit"></i>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span>Edit</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button data-fpb="link" class="button is-primary is-outlined is-hidden-to-mentor">\n\t\t\t\t\t\t\t<span class="icon">\n\t\t\t\t\t\t\t\t<i class="fa fa-link"></i>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span>Add Link</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button data-fpb="back" class="button is-danger is-outlined">\n\t\t\t\t\t\t\t<span class="icon">\n\t\t\t\t\t\t\t\t<i class="fa fa-arrow-left"></i>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span>Back to Promises</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="column">\n\t\t\t\t<div class="box content">\n\t\t\t\t\t<h1 class="title is-4">Progress</h1>\n\t\t\t\t\t<div id="comments-field">\n\t\t\t\t\t',Object.keys(n.comments).map(function(t){return n.comments[t]}).sort(function(t,e){return t.timestamp-e.timestamp}).forEach(function(t){var e={name:"Unknown",image:"./public/img/no-user.png"};try{e.name=i[t.author].name,e.image=i[t.author].image}catch(t){console.error(t)}var n=moment(t.timestamp).format("M/D h:mm A");t.generated?l+='\n\t\t\t\t\t\t<div class="comment">\n\t\t\t\t\t\t\t<span class="image is-16x16 is-rounded is-inline-image">\n\t\t\t\t\t\t\t\t<img src="'+e.image+'">\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class="title is-6">'+e.name+'</span>\n\t\t\t\t\t\t\t<span class="is-faded"> '+n+': </span>\n\t\t\t\t\t\t\t<span class="generated-text">'+t.text+"</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t":l+='\n\t\t\t\t\t\t<div class="comment">\n\t\t\t\t\t\t\t<span class="image is-16x16 is-rounded is-inline-image">\n\t\t\t\t\t\t\t\t<img src="'+e.image+'">\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class="title is-6">'+e.name+'</span>\n\t\t\t\t\t\t\t<span class="is-faded"> '+n+": </span>\n\t\t\t\t\t\t\t<span>"+t.text+"</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t"}),l+='\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="is-hidden-to-mentor">\n\t\t\t\t\t\t<div class="tile is-child">\n\t\t\t\t\t\t\t<div class="tile-editable">\n\t\t\t\t\t\t\t\t<textarea data-fpb="textarea" class="textarea" rows="2" placeholder="Write here..."></textarea>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="is-grouped">\n\t\t\t\t\t\t\t\t<button data-fpb="comment" class="button is-primary">\n\t\t\t\t\t\t\t\t\t<span class="icon">\n\t\t\t\t\t\t\t\t\t\t<i class="fa fa-comment-o"></i>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span>Comment</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button data-fpb="complete" class="button is-primary is-outlined">\n\t\t\t\t\t\t\t\t\t<span class="icon">\n\t\t\t\t\t\t\t\t\t\t<i class="fa '+(n.completed?"fa-times":"fa-check")+'"></i>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span>'+(n.completed?"Mark as Incomplete":"Mark as Complete")+"</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t";var d=document.createElement("div");return d.classList.add("columns"),d.innerHTML=l,d},getPromiseEditor:function(t){"..."===t.description&&(t.description=!1);var e='\n\t\t\t\t<h1 data-pef="title" class="title is-2 nlp-editable" contenteditable="true">'+(t.title?t.title:"Title of Promise")+'</h1>\n\t\t\t\t<p class="subtitle is-neatly-spaced">\n\t\t\t\t\tI promise to <span data-pef="description" class="nlp-editable" contenteditable="true">'+(t.description?t.description:"(do something for my team)")+'</span> by <span data-pef="due" class="nlp-editable" contenteditable="true">'+(t.due?moment(t.due).format("M/D/YYYY"):"MM/DD/YYYY")+'</span>.\n\t\t\t\t</p>\n\t\t\t\t<p data-pef="warning" class="is-danger-text"></p>\n\t\t\t\t<button data-pef="submit" class="button is-primary">Save Promise</button>\n\t\t\t';t.deletable?e+='<button data-pef="remove" class="button is-danger is-outlined">Cancel</button>':e+='<button data-pef="cancel" class="button is-danger is-outlined">Cancel</button>';var n=document.createElement("div");return n.classList.add("box"),n.classList.add("content"),n.innerHTML=e,n},getRoleStepCard:function(t){var e='\n\t\t\t\t<div class="message '+(t.isOpen?"":"is-collapsed")+" "+(t.completed?"is-success":"is-primary")+'" collapsible>\n\t\t\t\t\t<div class="message-header is-contrast">\n\t\t\t\t\t\t<div class="circle">\n\t\t\t\t\t\t\t<span class="icon is-small">\n\t\t\t\t\t\t\t\t<i class="fa fa-check"></i>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<h3 class="title is-5">'+t.title+'</h3>\n\t\t\t\t\t\t<button>\n\t\t\t\t\t\t\t<span class="icon is-small">\n\t\t\t\t\t\t\t\t<i class="fa show-collapsed fa-chevron-up"></i>\n\t\t\t\t\t\t\t\t<i class="fa show-unfurled fa-chevron-down"></i>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="message-body">\n\t\t\t\t\t\t<div class="step-note" data-step="'+t.id+'" contenteditable="'+t.editable+'">\n\t\t\t\t\t\t\t'+t.ps.reduce(function(t,e){return t+"<p>"+e+"</p>"},"")+"\n\t\t\t\t\t\t</div>\n\t\t\t";t.editable&&(e+='\n\t\t\t\t\t<span data-action="save-note" data-step="'+t.id+'" class="button is-small is-dark is-outlined has-top-margin">\n\t\t\t\t\t\t<span class="icon is-small">\n\t\t\t\t\t\t\t<i class="fa fa-save"></i>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span>Save Note</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span data-action="edit-name" data-step="'+t.id+'" class="button is-small is-dark is-outlined has-top-margin">\n\t\t\t\t\t\t<span class="icon is-small">\n\t\t\t\t\t\t\t<i class="fa fa-edit"></i>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span>Edit Name</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span data-action="move-step-up" data-step="'+t.id+'" class="button is-small is-primary is-outlined has-top-margin">\n\t\t\t\t\t\t<span class="icon is-small">\n\t\t\t\t\t\t\t<i class="fa fa-arrow-up"></i>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span>Move Up</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span data-action="move-step-down" data-step="'+t.id+'" class="button is-small is-primary is-outlined has-top-margin">\n\t\t\t\t\t\t<span class="icon is-small">\n\t\t\t\t\t\t\t<i class="fa fa-arrow-down"></i>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span>Move Down</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<hr>\n\t\t\t\t'),e+='\n\t\t\t\t\t\t<div class="has-top-margin">\n\t\t\t\t\t\t\t'+t.links.reduce(function(e,n){var i='\n\t\t\t\t\t\t\t\t\t<div class="tags has-addons">\n\t\t\t\t\t\t\t\t';return t.editable&&(i+='\n\t\t\t\t\t\t\t\t\t\t<span class="tag is-medium is-transparent-background">\n\t\t\t\t\t\t\t\t\t\t\t<span data-action="edit-link" data-step="'+t.id+'" data-link="'+n.id+'" class="icon is-small">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-edit"></i>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<span data-action="remove-link" data-step="'+t.id+'" data-link="'+n.id+'" class="icon is-small">\n\t\t\t\t\t\t\t\t\t\t\t\t<i class="fa fa-remove"></i>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t'),i+='\n\t\t\t\t\t\t\t\t\t\t<span class="tag is-medium is-primary">'+n.type+'</span>\n\t\t\t\t\t\t\t\t\t\t<span class="tag is-medium is-warning">\n\t\t\t\t\t\t\t\t\t\t\t<a class="link" data-linkid="'+n.id+'" target="_blank" href="'+n.url+'">'+n.title+"</a>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t",e+i},"")+'\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button class="button is-primary is-outlined has-top-margin '+(t.editable?"is-hidden":"")+'">Mark Complete</button>\n\t\t\t',t.editable&&(e+='\n\t\t\t\t\t<span data-action="add-step-link" data-step="'+t.id+'" class="button is-small is-dark is-outlined has-top-margin">\n\t\t\t\t\t\t<span class="icon is-small">\n\t\t\t\t\t\t\t<i class="fa fa-plus"></i>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span>Add Link</span>\n\t\t\t\t\t</span>\n\t\t\t\t'),e+="\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t";var n=document.createElement("div");return n.innerHTML=e,n.classList.add("circle-connector"),n},tagCode:function(t){for(var e="",n=!1,i=0;i<t.length;i++)"`"===t[i]?(e+=n?"</span>":'<span class="tag is-code">',n=!n):e+=t[i];return n&&(e+="</span>"),e},getListCard:function(e){var n='\n\t\t\t\t<h2 class="title is-4">'+e.title+'</h2>\n\t\t\t\t<ul data-textarea="get-'+e.field+'" contenteditable="'+e.editable+'">\n\t\t\t\t\t'+e.ps.reduce(function(n,i){var s=i;return e.hasCode&&!e.editable&&(s=t.tagCode(i)),n+"<li>"+s+"</li>"},"")+"\n\t\t\t\t</ul>\n\t\t\t";e.editable&&(n+='\n\t\t\t\t\t<button data-action="save-'+e.field+'" class="button is-small is-primary is-outlined has-top-margin">\n\t\t\t\t\t\t<span class="icon is-small">\n\t\t\t\t\t\t\t<i class="fa fa-save"></i>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span>Save</span>\n\t\t\t\t\t</button>\n\t\t\t\t');var i=document.createElement("div");return i.innerHTML=n,i.classList.add("column"),i.classList.add("is-6"),i},getRoleMapCard:function(t){var e=window.location.origin+"/rolelibrary.html?role="+t.id,n='\n\t\t\t\t<div class="box">\n\t\t\t\t\t<h3 class="title is-4">\n\t\t\t\t\t\t<span class="icon">\n\t\t\t\t\t\t\t<i class="fa fa-'+t.icon+'"></i>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span>'+t.title+"</span>\n\t\t\t\t\t</h3>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t"+t.importance.split("\n").reduce(function(t,e){return t+"<li>"+e+"</li>"})+'\n\t\t\t\t\t</ul>\n\t\t\t\t\t<a href="'+e+'" class="button is-primary is-outlined has-top-margin">Preview Role</a>\n\t\t\t\t</div>\n\t\t\t',i=document.createElement("div");return i.innerHTML=n,i.classList.add("column"),i.classList.add("is-6"),i}};return t}},{}]},{},[3]);
//# sourceMappingURL=maps/role-library.js.map
